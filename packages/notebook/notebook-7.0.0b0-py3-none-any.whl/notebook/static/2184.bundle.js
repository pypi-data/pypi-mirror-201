"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[2184],{42184:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var a=t(89965),o=t(23450),i=t(8679),r=t(115),s=t(8476),l=t(10806),d=t(33140),c=t(82776),u=t(86559),g=t(10660),v=t(20133),b=t(46142),p=t(6513),m=t(98836);function h(e){Object.values(d.Debugger.CommandIDs).forEach((n=>{e.commands.hasCommand(n)&&e.commands.notifyCommandChanged(n)}))}const I={id:"@jupyterlab/debugger-extension:consoles",autoStart:!0,requires:[d.IDebugger,s.IConsoleTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new d.Debugger.Handler({type:"console",shell:e.shell,service:n}),i=async n=>{const{sessionContext:t}=n;await t.ready,await o.updateContext(n,t),h(e)};a?a.currentChanged.connect(((e,n)=>{const t=n.newValue;t instanceof s.ConsolePanel&&i(t)})):t.currentChanged.connect(((e,n)=>{n&&i(n)}))}},f={id:"@jupyterlab/debugger-extension:files",autoStart:!0,requires:[d.IDebugger,u.IEditorTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new d.Debugger.Handler({type:"file",shell:e.shell,service:n}),i={},r=async n=>{const t=e.serviceManager.sessions;try{const a=await t.findByPath(n.context.path);if(!a)return;let r=i[a.id];r||(r=t.connectTo({model:a}),i[a.id]=r),await o.update(n,r),h(e)}catch(e){return}};a?a.currentChanged.connect(((e,n)=>{const t=n.newValue;if(t instanceof c.DocumentWidget){const{content:e}=t;e instanceof u.FileEditor&&r(t)}})):t.currentChanged.connect(((e,n)=>{n&&r(n)}))}},C={id:"@jupyterlab/debugger-extension:notebooks",autoStart:!0,requires:[d.IDebugger,v.INotebookTracker],optional:[a.ILabShell,o.ICommandPalette,o.ISessionContextDialogs,m.ITranslator],provides:d.IDebuggerHandler,activate:(e,n,t,a,i,r,s)=>{const l=null!=s?s:m.nullTranslator,c=null!=r?r:new o.SessionContextDialogs({translator:l}),u=new d.Debugger.Handler({type:"notebook",shell:e.shell,service:n}),g=l.load("jupyterlab");e.commands.addCommand(d.Debugger.CommandIDs.restartDebug,{label:g.__("Restart Kernel and Debug…"),caption:g.__("Restart Kernel and Debug…"),isEnabled:()=>n.isStarted,execute:async()=>{const e=n.getDebuggerState();await n.stop();const a=t.currentWidget;if(!a)return;const{content:o,sessionContext:i}=a;await c.restart(i)&&(await n.restoreDebuggerState(e),await u.updateWidget(a,i.session),await v.NotebookActions.runAll(o,i,c,l))}});const b=async n=>{if(n){const{sessionContext:e}=n;await e.ready,await u.updateContext(n,e)}h(e)};return a?a.currentChanged.connect(((e,n)=>{const t=n.newValue;t instanceof v.NotebookPanel&&b(t)})):t.currentChanged.connect(((e,n)=>{n&&b(n)})),i&&i.addItem({category:"Notebook Operations",command:d.Debugger.CommandIDs.restartDebug}),u}},y={id:"@jupyterlab/debugger-extension:service",autoStart:!0,provides:d.IDebugger,requires:[d.IDebuggerConfig],optional:[d.IDebuggerSources,m.ITranslator],activate:(e,n,t,a)=>new d.Debugger.Service({config:n,debuggerSources:t,specsManager:e.serviceManager.kernelspecs,translator:a})},D={id:"@jupyterlab/debugger-extension:config",provides:d.IDebuggerConfig,autoStart:!0,activate:()=>new d.Debugger.Config},S={id:"@jupyterlab/debugger-extension:sources",autoStart:!0,provides:d.IDebuggerSources,requires:[d.IDebuggerConfig,r.IEditorServices],optional:[v.INotebookTracker,s.IConsoleTracker,u.IEditorTracker],activate:(e,n,t,a,o,i)=>new d.Debugger.Sources({config:n,shell:e.shell,editorServices:t,notebookTracker:a,consoleTracker:o,editorTracker:i})},_={id:"@jupyterlab/debugger-extension:variables",autoStart:!0,requires:[d.IDebugger,d.IDebuggerHandler,m.ITranslator],optional:[o.IThemeManager,b.IRenderMimeRegistry],activate:(e,n,t,a,i,r)=>{const s=a.load("jupyterlab"),{commands:l,shell:c}=e,u=new o.WidgetTracker({namespace:"debugger/inspect-variable"}),g=new o.WidgetTracker({namespace:"debugger/render-variable"}),b=d.Debugger.CommandIDs;l.addCommand(b.inspectVariable,{label:s.__("Inspect Variable"),caption:s.__("Inspect Variable"),isEnabled:e=>{var t,a,o,i;return!!(null===(t=n.session)||void 0===t?void 0:t.isStarted)&&Number(null!==(i=null!==(a=e.variableReference)&&void 0!==a?a:null===(o=n.model.variables.selectedVariable)||void 0===o?void 0:o.variablesReference)&&void 0!==i?i:0)>0},execute:async e=>{var t,a,r,s;let{variableReference:g,name:v}=e;g||(g=null===(t=n.model.variables.selectedVariable)||void 0===t?void 0:t.variablesReference),v||(v=null===(a=n.model.variables.selectedVariable)||void 0===a?void 0:a.name);const b=`jp-debugger-variable-${v}`;if(!v||!g||u.find((e=>e.id===b)))return;const p=await n.inspectVariable(g);if(!p||0===p.length)return;const m=n.model.variables,h=new o.MainAreaWidget({content:new d.Debugger.VariablesGrid({model:m,commands:l,scopes:[{name:v,variables:p}],themeManager:i})});h.addClass("jp-DebuggerVariables"),h.id=b,h.title.icon=d.Debugger.Icons.variableIcon,h.title.label=`${null===(s=null===(r=n.session)||void 0===r?void 0:r.connection)||void 0===s?void 0:s.name} - ${v}`,u.add(h);const I=()=>{h.dispose(),m.changed.disconnect(I)};m.changed.connect(I),c.add(h,"main",{mode:u.currentWidget?"split-right":"split-bottom",activate:!1,type:"Debugger Variables"})}}),l.addCommand(b.renderMimeVariable,{label:s.__("Render Variable"),caption:s.__("Render variable according to its mime type"),isEnabled:()=>{var e;return!!(null===(e=n.session)||void 0===e?void 0:e.isStarted)},isVisible:()=>n.model.hasRichVariableRendering&&(null!==r||t.activeWidget instanceof v.NotebookPanel),execute:e=>{var o,i,s,l,u,b,p,m;let{name:h,frameId:I}=e;h||(h=null===(o=n.model.variables.selectedVariable)||void 0===o?void 0:o.name),I||(I=null===(i=n.model.callstack.frame)||void 0===i?void 0:i.id);const f=t.activeWidget;let C=f instanceof v.NotebookPanel?f.content.rendermime:r;if(!C)return;const y=`jp-debugger-variable-mime-${h}-${null===(l=null===(s=n.session)||void 0===s?void 0:s.connection)||void 0===l?void 0:l.path.replace("/","-")}`;if(!h||g.find((e=>e.id===y))||!I&&n.hasStoppedThreads())return;const D=n.model.variables,S=new d.Debugger.VariableRenderer({dataLoader:()=>n.inspectRichVariable(h,I),rendermime:C,translator:a});S.addClass("jp-DebuggerRichVariable"),S.id=y,S.title.icon=d.Debugger.Icons.variableIcon,S.title.label=`${h} - ${null===(b=null===(u=n.session)||void 0===u?void 0:u.connection)||void 0===b?void 0:b.name}`,S.title.caption=`${h} - ${null===(m=null===(p=n.session)||void 0===p?void 0:p.connection)||void 0===m?void 0:m.path}`,g.add(S);const _=()=>{S.dispose(),D.changed.disconnect(w),null==f||f.disposed.disconnect(_)},w=()=>{t.activeWidget===f&&S.refresh()};S.disposed.connect(_),D.changed.connect(w),null==f||f.disposed.connect(_),c.add(S,"main",{mode:g.currentWidget?"split-right":"split-bottom",activate:!1,type:"Debugger Variables"})}}),l.addCommand(b.copyToClipboard,{label:s.__("Copy to Clipboard"),caption:s.__("Copy text representation of the value to clipboard"),isEnabled:()=>{var e,t;return!!(null===(e=n.session)||void 0===e?void 0:e.isStarted)&&!!(null===(t=n.model.variables.selectedVariable)||void 0===t?void 0:t.value)},isVisible:()=>t.activeWidget instanceof v.NotebookPanel,execute:async()=>{const e=n.model.variables.selectedVariable.value;e&&o.Clipboard.copyToSystem(e)}})}},w={id:"@jupyterlab/debugger-extension:sidebar",provides:d.IDebuggerSidebar,requires:[d.IDebugger,r.IEditorServices,m.ITranslator],optional:[o.IThemeManager,p.ISettingRegistry],autoStart:!0,activate:async(e,n,t,a,o,i)=>{const{commands:r}=e,s=d.Debugger.CommandIDs,l={registry:r,continue:s.debugContinue,terminate:s.terminate,next:s.next,stepIn:s.stepIn,stepOut:s.stepOut,evaluate:s.evaluate},c={registry:r,pauseOnExceptions:s.pauseOnExceptions},u=new d.Debugger.Sidebar({service:n,callstackCommands:l,breakpointsCommands:c,editorServices:t,themeManager:o,translator:a});if(i){const e=await i.load(x.id),t=()=>{var t,a,o,i;const r=e.get("variableFilters").composite,s=null!==(i=null===(o=null===(a=null===(t=n.session)||void 0===t?void 0:t.connection)||void 0===a?void 0:a.kernel)||void 0===o?void 0:o.name)&&void 0!==i?i:"";s&&r[s]&&(u.variables.filter=new Set(r[s]));const l=e.get("defaultKernelSourcesFilter").composite;u.kernelSources.filter=l};t(),e.changed.connect(t),n.sessionChanged.connect(t)}return u}},x={id:"@jupyterlab/debugger-extension:main",requires:[d.IDebugger,d.IDebuggerSidebar,r.IEditorServices,m.ITranslator],optional:[o.ICommandPalette,d.IDebuggerSources,a.ILabShell,a.ILayoutRestorer,g.ILoggerRegistry,p.ISettingRegistry],autoStart:!0,activate:async(e,n,t,a,r,s,c,u,g,v,p)=>{var m;const I=r.load("jupyterlab"),{commands:f,shell:C,serviceManager:y}=e,{kernelspecs:D}=y,S=d.Debugger.CommandIDs;if("true"!==l.PageConfig.getOption("alwaysShowDebuggerExtension").toLowerCase()){await D.ready;const e=null===(m=D.specs)||void 0===m?void 0:m.kernelspecs;if(!e)return;const n=Object.keys(e).some((n=>{var t,a,o;return!(null===(o=null===(a=null===(t=e[n])||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.debugger)||void 0===o||!o)}));if(!n)return}const _=new b.RenderMimeRegistry({initialFactories:b.standardRendererFactories});f.addCommand(S.evaluate,{label:I.__("Evaluate Code"),caption:I.__("Evaluate Code"),icon:d.Debugger.Icons.evaluateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{var e,t,o;const r=await(async()=>{var e,t,o;const i=null===(t=null===(e=n.session)||void 0===e?void 0:e.connection)||void 0===t?void 0:t.kernel;if(!i)return"";const r=(await i.info).language_info.name;return null!==(o=a.mimeTypeService.getMimeTypeByLanguage({name:r}))&&void 0!==o?o:""})(),s=await d.Debugger.Dialogs.getCode({title:I.__("Evaluate Code"),okLabel:I.__("Evaluate"),cancelLabel:I.__("Cancel"),mimeType:r,contentFactory:new i.CodeCell.ContentFactory({editorFactory:e=>a.factoryService.newInlineEditor(e)}),rendermime:_}),l=s.value;if(!s.button.accept||!l)return;const c=await n.evaluate(l);if(c){const a=c.result,i=null===(t=null===(e=null==n?void 0:n.session)||void 0===e?void 0:e.connection)||void 0===t?void 0:t.path,r=i?null===(o=null==v?void 0:v.getLogger)||void 0===o?void 0:o.call(v,i):void 0;r?r.log({type:"text",data:a,level:r.level}):console.debug(a)}}}),f.addCommand(S.debugContinue,{label:()=>n.hasStoppedThreads()?I.__("Continue"):I.__("Pause"),caption:()=>n.hasStoppedThreads()?I.__("Continue"):I.__("Pause"),icon:()=>n.hasStoppedThreads()?d.Debugger.Icons.continueIcon:d.Debugger.Icons.pauseIcon,isEnabled:()=>{var e,t;return null!==(t=null===(e=n.session)||void 0===e?void 0:e.isStarted)&&void 0!==t&&t},execute:async()=>{n.hasStoppedThreads()?await n.continue():await n.pause(),f.notifyCommandChanged(S.debugContinue)}}),f.addCommand(S.terminate,{label:I.__("Terminate"),caption:I.__("Terminate"),icon:d.Debugger.Icons.terminateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.restart(),h(e)}}),f.addCommand(S.next,{label:I.__("Next"),caption:I.__("Next"),icon:d.Debugger.Icons.stepOverIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.next()}}),f.addCommand(S.stepIn,{label:I.__("Step In"),caption:I.__("Step In"),icon:d.Debugger.Icons.stepIntoIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepIn()}}),f.addCommand(S.stepOut,{label:I.__("Step Out"),caption:I.__("Step Out"),icon:d.Debugger.Icons.stepOutIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepOut()}}),f.addCommand(S.pauseOnExceptions,{label:e=>e.filter||"Breakpoints on exception",caption:e=>e.description,isToggled:e=>{var t;return(null===(t=n.session)||void 0===t?void 0:t.isPausingOnException(e.filter))||!1},isEnabled:()=>n.pauseOnExceptionsIsValid(),execute:async e=>{var t,a,i;if(null==e?void 0:e.filter){let t=e.filter;await n.pauseOnExceptionsFilter(t)}else{let e=[];null===(a=null===(t=n.session)||void 0===t?void 0:t.exceptionBreakpointFilters)||void 0===a||a.forEach((n=>{e.push(n.filter)}));const r=await o.InputDialog.getMultipleItems({title:I.__("Select a filter for breakpoints on exception"),items:e,defaults:(null===(i=n.session)||void 0===i?void 0:i.currentExceptionFilters)||[]});let s=r.button.accept?r.value:null;null!==s&&await n.pauseOnExceptions(s)}}});let w=!1;if(p){const e=await p.load(x.id),n=()=>{w=e.get("autoCollapseDebuggerSidebar").composite};n(),e.changed.connect(n)}if(n.eventMessage.connect(((n,a)=>{h(e),u&&"initialized"===a.event?u.activateById(t.id):u&&t.isVisible&&"terminated"===a.event&&w&&u.collapseRight()})),n.sessionChanged.connect((n=>{h(e)})),g&&g.add(t,"debugger-sidebar"),t.node.setAttribute("role","region"),t.node.setAttribute("aria-label",I.__("Debugger section")),t.title.caption=I.__("Debugger"),C.add(t,"right",{type:"Debugger"}),f.addCommand(S.showPanel,{label:r.load("jupyterlab").__("Debugger Panel"),execute:()=>{C.activateById(t.id)}}),s){const e=I.__("Debugger");[S.debugContinue,S.terminate,S.next,S.stepIn,S.stepOut,S.evaluate,S.pauseOnExceptions].forEach((n=>{s.addItem({command:n,category:e})}))}if(c){const{model:e}=n,t=new d.Debugger.ReadOnlyEditorFactory({editorServices:a}),o=(e,t)=>{var a,o,i,r,s,l,u,g,v;c.find({focus:!0,kernel:null!==(r=null===(i=null===(o=null===(a=n.session)||void 0===a?void 0:a.connection)||void 0===o?void 0:o.kernel)||void 0===i?void 0:i.name)&&void 0!==r?r:"",path:null!==(u=null===(l=null===(s=n.session)||void 0===s?void 0:s.connection)||void 0===l?void 0:l.path)&&void 0!==u?u:"",source:null!==(v=null===(g=null==t?void 0:t.source)||void 0===g?void 0:g.path)&&void 0!==v?v:""}).forEach((e=>{requestAnimationFrame((()=>{e.reveal().then((()=>{const n=e.get();n&&d.Debugger.EditorHandler.showCurrentLine(n,t.line)}))}))}))},i=(e,a,o)=>{var i,r,s,u,g,v,b;if(!a)return;const{content:p,mimeType:m,path:h}=a,I=c.find({focus:!0,kernel:null!==(u=null===(s=null===(r=null===(i=n.session)||void 0===i?void 0:i.connection)||void 0===r?void 0:r.kernel)||void 0===s?void 0:s.name)&&void 0!==u?u:"",path:null!==(b=null===(v=null===(g=n.session)||void 0===g?void 0:g.connection)||void 0===v?void 0:v.path)&&void 0!==b?b:"",source:h});if(I.length>0)return void(o&&void 0!==o.line&&I.forEach((e=>{e.reveal().then((()=>{var n;null===(n=e.get())||void 0===n||n.revealPosition({line:o.line-1,column:o.column||0})}))})));const f=t.createNewEditor({content:p,mimeType:m,path:h}),C=f.editor,y=new d.Debugger.EditorHandler({debuggerService:n,editorReady:()=>Promise.resolve(C),getEditor:()=>C,path:h,src:C.model.sharedModel});f.disposed.connect((()=>y.dispose())),c.open({label:l.PathExt.basename(h),caption:h,editorWrapper:f});const D=n.model.callstack.frame;D&&d.Debugger.EditorHandler.showCurrentLine(C,D.line)},r=(e,n,t)=>{n&&i(null,n,t)};e.callstack.currentFrameChanged.connect(o),e.sources.currentSourceOpened.connect(i),e.kernelSources.kernelSourceOpened.connect(r),e.breakpoints.clicked.connect((async(e,t)=>{var a;const o=null===(a=t.source)||void 0===a?void 0:a.path,r=await n.getSource({sourceReference:0,path:o});i(null,r,t)}))}}},k=[y,I,f,C,_,w,x,S,D]}}]);