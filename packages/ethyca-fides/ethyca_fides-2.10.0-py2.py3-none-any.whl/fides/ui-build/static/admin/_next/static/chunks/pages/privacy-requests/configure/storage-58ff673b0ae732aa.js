(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{11739:function(e,t,r){"use strict";r.d(t,{At:function(){return f},aG:function(){return v},gN:function(){return h}});var n=r(81439),s=r(15031),a=r(26450),i=r(67294);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}var l=["spacing"],u=["isCurrentPage","as","className","href"],d=["isCurrentPage","separator","isLastChild","spacing","children","className"],m=["children","spacing","separator","className"],p=(0,n.Gp)((function(e,t){var r=e.spacing,s=o(e,l),a=c({mx:r},(0,n.yK)().separator);return i.createElement(n.m$.span,c({ref:t,role:"presentation"},s,{__css:a}))}));s.Ts&&(p.displayName="BreadcrumbSeparator");var f=(0,n.Gp)((function(e,t){var r=e.isCurrentPage,a=e.as,l=e.className,d=e.href,m=o(e,u),p=(0,n.yK)(),f=c({ref:t,as:a,className:(0,s.cx)("chakra-breadcrumb__link",l)},m);return r?i.createElement(n.m$.span,c({"aria-current":"page",__css:p.link},f)):i.createElement(n.m$.a,c({__css:p.link,href:d},f))}));s.Ts&&(f.displayName="BreadcrumbLink");var h=(0,n.Gp)((function(e,t){var r=e.isCurrentPage,l=e.separator,u=e.isLastChild,m=e.spacing,h=e.children,v=e.className,g=o(e,d),x=(0,a.WR)(h).map((function(e){return e.type===f?i.cloneElement(e,{isCurrentPage:r}):e.type===p?i.cloneElement(e,{spacing:m,children:e.props.children||l}):e})),j=c({display:"inline-flex",alignItems:"center"},(0,n.yK)().item),y=(0,s.cx)("chakra-breadcrumb__list-item",v);return i.createElement(n.m$.li,c({ref:t,className:y},g,{__css:j}),x,!u&&i.createElement(p,{spacing:m},l))}));s.Ts&&(h.displayName="BreadcrumbItem");var v=(0,n.Gp)((function(e,t){var r=(0,n.jC)("Breadcrumb",e),l=(0,n.Lr)(e),u=l.children,d=l.spacing,p=void 0===d?"0.5rem":d,f=l.separator,h=void 0===f?"/":f,v=l.className,g=o(l,m),x=(0,a.WR)(u),j=x.length,y=x.map((function(e,t){return i.cloneElement(e,{separator:h,spacing:p,isLastChild:j===t+1})})),b=(0,s.cx)("chakra-breadcrumb",v);return i.createElement(n.m$.nav,c({ref:t,"aria-label":"breadcrumb",className:b,__css:r.container},g),i.createElement(n.Fo,{value:r},i.createElement(n.m$.ol,{className:"chakra-breadcrumb__list"},y)))}));s.Ts&&(v.displayName="Breadcrumb")},70783:function(e,t,r){"use strict";r.d(t,{HK:function(){return a},VY:function(){return n.V}});var n=r(63719),s=r(65698),a=function(){var e=(0,n.V)().errorAlert;return{handleError:function(t){var r="An unexpected error occurred. Please try again.";(0,s.Ot)(t)?r=t.data.detail:(0,s.tB)(t)&&(r=t.data.detail[0].msg),e(r)}}};r(67294)},63719:function(e,t,r){"use strict";r.d(t,{V:function(){return d}});var n=r(59499),s=r(28609),a=r(6886),i=r(68527),c=r(84746),o=r(85893);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){var e=(0,s.pm)();return{errorAlert:function(t,r,n){var s=u(u({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,o.jsxs)(a.bZ,{alignItems:"normal",status:"error",children:[(0,o.jsx)(a.zM,{}),(0,o.jsxs)(i.xu,{children:[r&&(0,o.jsx)(a.Cd,{children:r}),(0,o.jsx)(a.X,{children:t})]}),(0,o.jsx)(c.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)},successAlert:function(t,r,n){var s=u(u({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,o.jsxs)(a.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,o.jsx)(a.zM,{}),(0,o.jsxs)(i.xu,{children:[r&&(0,o.jsx)(a.Cd,{children:r}),(0,o.jsx)(a.X,{children:t})]}),(0,o.jsx)(c.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)}}}},83689:function(e,t,r){"use strict";r.d(t,{DE:function(){return a},MP:function(){return n},qX:function(){return s}});var n=new Map([["Approved","approved"],["Canceled","canceled"],["Completed","complete"],["Denied","denied"],["Error","error"],["In Progress","in_processing"],["New","pending"],["Paused","paused"],["Unverified","identity_unverified"],["Requires input","requires_input"]]),s={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},a={local:"local",s3:"s3"}},13850:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(50029),s=r(16835),a=r(87794),i=r.n(a),c=r(68527),o=r(11739),l=r(9680),u=r(41664),d=r.n(u),m=r(67294),p=r(65698),f=r(70783),h=r(48057),v=r(83689),g=r(70918),x=r(15193),j=r(82175),y=r(96016),b=r(85893),_=function(e){var t,r,a,o,l,u=e.storageDetails,d=(0,m.useState)(""),h=d[0],_=d[1],k=(0,g.gC)(),w=(0,s.Z)(k,1)[0],C=(0,g.cf)(),E=(0,s.Z)(C,1)[0],S=(0,f.HK)().handleError,P=(0,f.VY)().successAlert,O={type:v.DE.s3,auth_method:null!==(t=null===u||void 0===u||null===(r=u.details)||void 0===r?void 0:r.auth_method)&&void 0!==t?t:"",bucket:null!==(a=null===u||void 0===u||null===(o=u.details)||void 0===o?void 0:o.bucket)&&void 0!==a?a:"",format:null!==(l=null===u||void 0===u?void 0:u.format)&&void 0!==l?l:""},N=function(){var e=(0,n.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({type:v.DE.s3,details:{auth_method:t.auth_method,bucket:t.bucket},format:t.format});case 2:r=e.sent,(0,p.D4)(r)?S(r.error):(_(t.auth_method),P("S3 storage credentials successfully updated."));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,n.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({details:{aws_access_key_id:t.aws_access_key_id,aws_secret_access_key:t.aws_secret_access_key},type:v.DE.s3});case 2:r=e.sent,(0,p.D4)(r)?S(r.error):P("S3 storage secrets successfully updated.");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.X6,{fontSize:"md",fontWeight:"semibold",mt:10,children:"S3 storage configuration"}),(0,b.jsx)(c.Kq,{children:(0,b.jsx)(j.J9,{initialValues:O,onSubmit:N,enableReinitialize:!0,children:function(e){var t=e.isSubmitting,r=e.handleReset;return(0,b.jsxs)(j.l0,{children:[(0,b.jsxs)(c.Kq,{mt:5,spacing:5,children:[(0,b.jsx)(y.AP,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,b.jsx)(y.AP,{name:"auth_method",label:"Auth method",options:[{label:"secret_keys",value:"secret_keys"},{label:"automatic",value:"automatic"}],"data-testid":"auth_method",isRequired:!0}),(0,b.jsx)(y.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,b.jsx)(x.zx,{onClick:function(){return r()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,b.jsx)(x.zx,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})}})}),"secret_keys"===h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.iz,{mt:5}),(0,b.jsx)(c.X6,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,b.jsx)(c.Kq,{children:(0,b.jsx)(j.J9,{initialValues:{aws_access_key_id:"",aws_secret_access_key:""},onSubmit:D,children:function(e){var t=e.isSubmitting,r=e.handleReset;return(0,b.jsxs)(j.l0,{children:[(0,b.jsxs)(c.Kq,{mt:5,spacing:5,children:[(0,b.jsx)(y.j0,{name:"aws_access_key_id",label:"AWS access key ID"}),(0,b.jsx)(y.j0,{name:"aws_secret_access_key",label:"AWS secret access key",type:"password"})]}),(0,b.jsxs)(c.xu,{mt:10,children:[(0,b.jsx)(x.zx,{onClick:function(){return r()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,b.jsx)(x.zx,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})]})}})})]}):null]})},k=function(){var e=(0,f.VY)().successAlert,t=(0,f.HK)().handleError,r=(0,m.useState)(""),a=r[0],u=r[1],x=(0,g.PW)().data,j=(0,g.Au)({type:a}).data,y=(0,g.gC)(),k=(0,s.Z)(y,2),w=k[0],C=k[1].isLoading,E=(0,g.QG)(),S=(0,s.Z)(E,1)[0];(0,m.useEffect)((function(){x&&u(x.type)}),[x]);var P=function(){var r=(0,n.Z)(i().mark((function r(n){var s,a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n!==v.DE.local){r.next=5;break}return r.next=3,w({type:n,details:{},format:"json"});case 3:s=r.sent,(0,p.D4)(s)?t(s.error):e("Configured storage details successfully.");case 5:return r.next=7,S({storage:{active_default_storage_type:n}});case 7:a=r.sent,(0,p.D4)(a)?t(a.error):u(n);case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return(0,b.jsxs)(h.Z,{title:"Configure Privacy Requests - Storage",children:[(0,b.jsx)(c.xu,{mb:8,children:(0,b.jsxs)(o.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600",children:[(0,b.jsx)(o.gN,{children:(0,b.jsx)(o.At,{as:d(),href:"/privacy-requests",children:"Privacy requests"})}),(0,b.jsx)(o.gN,{children:(0,b.jsx)(o.At,{as:d(),href:"/privacy-requests/configure",children:"Configuration"})}),(0,b.jsx)(o.gN,{color:"complimentary.500",children:(0,b.jsx)(o.At,{as:d(),href:"/privacy-requests/configure/storage",isCurrentPage:!0,children:"Configure storage"})})]})}),(0,b.jsx)(c.X6,{mb:5,fontSize:"2xl",fontWeight:"semibold",children:"Configure storage"}),(0,b.jsxs)(c.xu,{display:"flex",flexDirection:"column",width:"50%",children:[(0,b.jsx)(c.xu,{mb:5,children:"Fides requires a storage destination to store and share the results of privacy requests. For a production setup, it is highly recommended to have S3 as a storage destination. Ensure you have completed the setup for the storage destination and have the details handy prior to the following steps."}),(0,b.jsxs)(c.xu,{children:["To configure a Storage destination, first choose a method to store your results. Fides currently supports"," ",(0,b.jsx)(c.xv,{as:"span",color:"complimentary.500",children:"Local"})," ","and"," ",(0,b.jsx)(c.xv,{as:"span",color:"complimentary.500",children:"S3"})," ","storage methods."]}),(0,b.jsx)(c.X6,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Choose storage type to configure"}),(0,b.jsx)(l.Ee,{isDisabled:C,onChange:P,value:a,"data-testid":"privacy-requests-storage-selection",colorScheme:"secondary",p:3,children:(0,b.jsxs)(c.Kq,{direction:"row",children:[(0,b.jsx)(l.Y8,{value:"local","data-testid":"option-local",mr:5,children:"Local"},"local"),(0,b.jsx)(l.Y8,{value:"s3","data-testid":"option-s3",children:"S3"},"s3")]})}),"s3"===a&&j?(0,b.jsx)(_,{storageDetails:j}):null]})]})},w=function(){return(0,b.jsx)(k,{})}},68821:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/configure/storage",function(){return r(13850)}])}},function(e){e.O(0,[5630,3206,8057,7080,9774,2888,179],(function(){return t=68821,e(e.s=t);var t}));var t=e.O();_N_E=t}]);