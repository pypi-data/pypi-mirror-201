"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2490],{58144:function(e,r,n){var t=n(59499),i=n(43871),o=n(68527),s=n(15193),c=n(85893);function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}r.Z=function(e){var r=e.isOpen,n=e.onClose,t=e.onConfirm,a=e.title,l=e.message,d=e.cancelButtonText,p=e.cancelButtonThemingProps,f=e.continueButtonText,b=e.continueButtonThemingProps,h=e.isLoading,g=e.returnFocusOnClose,v=e.isCentered,O=e.testId,j=void 0===O?"confirmation-modal":O;return(0,c.jsxs)(i.u_,{isOpen:r,onClose:n,size:"lg",returnFocusOnClose:null===g||void 0===g||g,isCentered:v,children:[(0,c.jsx)(i.ZA,{}),(0,c.jsxs)(i.hz,{textAlign:"center",p:2,"data-testid":j,children:[a?(0,c.jsx)(i.xB,{fontWeight:"medium",children:a}):null,l?(0,c.jsx)(i.fe,{children:l}):null,(0,c.jsx)(i.mz,{children:(0,c.jsxs)(o.MI,{columns:2,width:"100%",children:[(0,c.jsx)(s.zx,u(u({variant:"outline",mr:3,onClick:n,"data-testid":"cancel-btn",isDisabled:h},p),{},{children:d||"Cancel"})),(0,c.jsx)(s.zx,u(u({colorScheme:"primary",onClick:t,"data-testid":"continue-btn",isLoading:h},b),{},{children:f||"Continue"}))]})})]})]})}},90710:function(e,r,n){var t=n(96356),i=(n(67294),n(32135)),o=n(85893);r.Z=function(e){var r=e.daysLeft,n=e.includeText,s=e.status;if(!r||s===i.q.COMPLETE||s===i.q.CANCELED||s===i.q.DENIED||s===i.q.IDENTITY_UNVERIFIED)return null;var c="";switch(!0){case r>=10:c="green.500";break;case r<10&&r>4:c="orange.500";break;case r<5:c="red.400"}var a=n?"".concat(r," days left"):r;return(0,o.jsx)(t.Vp,{backgroundColor:c,color:"white",children:a})}},3357:function(e,r,n){var t=n(85893);r.Z=function(e){var r=e.data,n=e.revealPII?r:r.replace(/./g,"*");return(0,t.jsx)(t.Fragment,{children:n})}},26012:function(e,r,n){var t=n(84304),i=(n(67294),n(85893));r.Z=function(e){var r=e.revealPII,n=e.onChange;return(0,i.jsx)(t.r,{colorScheme:"secondary",isChecked:r,onChange:function(e){return n(e.target.checked)}})}},9234:function(e,r,n){var t=n(68527),i=n(85893),o={approved:{bg:"yellow.500",label:"Approved"},complete:{bg:"green.500",label:"Completed"},awaiting_email_send:{bg:"gray.400",label:"Awaiting Email Send"},denied:{bg:"red.500",label:"Denied"},canceled:{bg:"red.600",label:"Canceled"},error:{bg:"red.800",label:"Error"},in_processing:{bg:"orange.500",label:"In Progress"},paused:{bg:"gray.400",label:"Paused"},pending:{bg:"blue.400",label:"New"},identity_unverified:{bg:"red.400",label:"Unverified"},requires_input:{bg:"yellow.400",label:"Requires Input"}};r.Z=function(e){var r=e.status;return(0,i.jsx)(t.Ct,{color:"white",bg:o[r].bg,width:"100%",lineHeight:"18px",textAlign:"center","data-testid":"request-status-badge",children:o[r].label})}},13720:function(e,r,n){var t=n(96356),i=n(68527),o=n(44188),s=(n(67294),n(73662)),c=n(85893);r.Z=function(e){var r=e.rules,n=Array.from(new Set(r.filter((function(e){return Object.values(o.U).includes(e.action_type)})).map((function(e){return(0,s.kC)(e.action_type)})))).map((function(e){return(0,c.jsx)(t.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:e},e)}));return(0,c.jsx)(i.xu,{children:n})}},70783:function(e,r,n){n.d(r,{HK:function(){return o},VY:function(){return t.V}});var t=n(63719),i=n(65698),o=function(){var e=(0,t.V)().errorAlert;return{handleError:function(r){var n="An unexpected error occurred. Please try again.";(0,i.Ot)(r)?n=r.data.detail:(0,i.tB)(r)&&(n=r.data.detail[0].msg),e(n)}}};n(67294)},63719:function(e,r,n){n.d(r,{V:function(){return d}});var t=n(59499),i=n(28609),o=n(6886),s=n(68527),c=n(84746),a=n(85893);function u(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var d=function(){var e=(0,i.pm)();return{errorAlert:function(r,n,t){var i=l(l({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,a.jsxs)(o.bZ,{alignItems:"normal",status:"error",children:[(0,a.jsx)(o.zM,{}),(0,a.jsxs)(s.xu,{children:[n&&(0,a.jsx)(o.Cd,{children:n}),(0,a.jsx)(o.X,{children:r})]}),(0,a.jsx)(c.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)},successAlert:function(r,n,t){var i=l(l({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,a.jsxs)(o.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,a.jsx)(o.zM,{}),(0,a.jsxs)(s.xu,{children:[n&&(0,a.jsx)(o.Cd,{children:n}),(0,a.jsx)(o.X,{children:r})]}),(0,a.jsx)(c.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)}}}},53782:function(e,r,n){n.d(r,{Z:function(){return b}});var t=n(59499),i=n(81439),o=n(97375),s=n(58144),c=n(67294),a=n(85893),u=function(e){var r=e.isOpen,n=e.onClose,t=e.onApproveRequest,i=e.isLoading,o=(0,c.useCallback)((function(){t().then((function(){n()}))}),[t,n]);return(0,a.jsx)(s.Z,{isOpen:r,onClose:n,onConfirm:o,message:"Are you sure you want to approve this privacy request?",continueButtonText:"Confirm",continueButtonThemingProps:{variant:"solid"},isLoading:i,returnFocusOnClose:!1,isCentered:!0})},l=n(90917),d=n(807);function p(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?p(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var b=(0,i.Gp)((function(e,r){var n=e.buttonProps,t=e.children,i=e.onClose,s=e.subjectRequest,c=(0,l.Z)({subjectRequest:s}),p=c.handleApproveRequest,b=c.isLoading,h=(0,o.qY)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.S,f(f({ref:r,onClick:h.onOpen,isLoading:b,isDisabled:b},n),{},{"data-testid":"privacy-request-approve-btn",children:t})),(0,a.jsx)(u,{isOpen:h.isOpen,isLoading:b,onClose:function(){h.onClose(),null===i||void 0===i||i()},onApproveRequest:p})]})}))},76899:function(e,r,n){n.d(r,{Z:function(){return j}});var t=n(59499),i=n(81439),o=n(97375),s=n(43871),c=n(15193),a=n(96016),u=n(82175),l=n(67294),d=n(74231),p=n(85893),f={denialReason:""},b=function(e){var r=e.isOpen,n=e.onClose,t=e.onDenyRequest,i=(0,l.useCallback)((function(e,r){var i=r.setSubmitting;t(e.denialReason).then((function(){i(!1),n()}))}),[t,n]);return(0,p.jsxs)(s.u_,{isOpen:r,onClose:n,isCentered:!0,returnFocusOnClose:!1,children:[(0,p.jsx)(s.ZA,{}),(0,p.jsx)(s.hz,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,p.jsx)(u.J9,{initialValues:f,validationSchema:d.Ry({denialReason:d.Z_().required().label("Reason for denial")}),onSubmit:i,children:function(e){var r=e.isSubmitting,t=e.dirty,i=e.isValid;return(0,p.jsxs)(u.l0,{children:[(0,p.jsx)(s.xB,{children:"Privacy Request Denial"}),(0,p.jsx)(s.fe,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,p.jsx)(s.fe,{children:(0,p.jsx)(a.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,p.jsxs)(s.mz,{children:[(0,p.jsx)(c.zx,{size:"sm",width:"100%",maxWidth:"198px",colorScheme:"gray.200",mr:3,disabled:r,onClick:n,children:"Close"}),(0,p.jsx)(c.zx,{type:"submit",size:"sm",width:"100%",maxWidth:"198px",colorScheme:"primary",variant:"solid",disabled:!t||!i,isLoading:r,"data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})},h=n(90917),g=n(807);function v(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function O(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var j=(0,i.Gp)((function(e,r){var n=e.buttonProps,t=e.children,i=e.onClose,s=e.subjectRequest,c=(0,h.Z)({subjectRequest:s}),a=c.handleDenyRequest,u=c.isLoading,l=(0,o.qY)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g.S,O(O({ref:r,onClick:l.onOpen,isLoading:u,isDisabled:u},n),{},{"data-testid":"privacy-request-deny-btn",children:t})),(0,p.jsx)(b,{isOpen:l.isOpen,onClose:function(){l.onClose(),null===i||void 0===i||i()},onDenyRequest:a})]})}))},1521:function(e,r,n){var t=n(59499),i=n(50029),o=n(16835),s=n(87794),c=n.n(s),a=n(81439),u=n(68527),l=n(15193),d=n(67294),p=n(97142),f=n(65698),b=n(70783),h=n(70918),g=n(85893);function v(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function O(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var j=(0,a.Gp)((function(e,r){var n=e.buttonProps,t=e.handleBlur,s=e.subjectRequest,a=(0,p.T)(),v=(0,d.useState)(!1),j=v[0],y=v[1],x=(0,b.VY)(),m=x.errorAlert,P=x.successAlert,w=(0,p.C)(h.fe).errorRequests,C=(0,h.JD)(),D=(0,o.Z)(C,1)[0],R=(0,h.Fq)(),q=(0,o.Z)(R,1)[0],S=function(){var e=(0,i.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,D(w);case 3:"error"in(r=e.sent)?(a((0,h.uT)({checkAll:!1,errorRequests:[]})),m((0,f.e$)(r.error),"DSR batch automation has failed due to the following:",{duration:null})):(r.data.failed.length>0&&m((0,g.jsxs)(u.xu,{children:["DSR automation has failed for"," ",(0,g.jsx)(u.xv,{as:"span",fontWeight:"semibold",children:r.data.failed.length})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null}),r.data.succeeded.length>0&&P("Privacy request(s) are now being reprocessed.")),y(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return y(!0),e.next=5,q(s);case 5:"error"in(n=e.sent)?m((0,f.e$)(n.error),"DSR automation has failed for this privacy request due to the following:",{duration:null}):P("Privacy request is now being reprocessed."),y(!1),t&&t(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)(l.zx,O(O({},n),{},{isDisabled:j,isLoading:j,loadingText:"Reprocessing",onClick:s?E:S,ref:r,spinnerPlacement:"end",variant:"outline",_hover:{bg:"gray.100"},_loading:{opacity:1,div:{opacity:.4}},children:"Reprocess"}))}));r.Z=j},807:function(e,r,n){n.d(r,{S:function(){return a}});var t=n(59499),i=n(81439),o=n(15193),s=n(85893);function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}var a=(0,i.Gp)((function(e,r){return(0,s.jsx)(o.zx,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({ref:r,size:"xs",bg:"white",_loading:{opacity:1,div:{opacity:.4}},_hover:{bg:"gray.100"}},e))}))},90917:function(e,r,n){n.d(r,{Z:function(){return o}});var t=n(16835),i=n(70918),o=function(e){var r=e.subjectRequest,n=(0,i.RW)({fixedCacheKey:r.id}),o=(0,t.Z)(n,2),s=o[0],c=o[1],a=(0,i.F1)({fixedCacheKey:r.id}),u=(0,t.Z)(a,2),l=u[0],d=u[1],p=d.isLoading||c.isLoading;return{approveRequest:s,approveRequestResult:c,denyRequest:l,denyRequestResult:d,handleApproveRequest:function(){return s(r)},handleDenyRequest:function(e){return l({id:r.id,reason:e})},isLoading:p}}},44188:function(e,r,n){var t,i;n.d(r,{U:function(){return t},n:function(){return i}}),function(e){e.ACCESS="access",e.ERASURE="erasure",e.CONSENT="consent",e.UPDATE="update"}(t||(t={})),function(e){e.IN_PROCESSING="in_processing",e.PENDING="pending",e.COMPLETE="complete",e.ERROR="error",e.PAUSED="paused",e.RETRYING="retrying",e.SKIPPED="skipped"}(i||(i={}))}}]);