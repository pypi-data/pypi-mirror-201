(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{79042:function(e,r,t){"use strict";t.d(r,{$R:function(){return g},Td:function(){return y},Th:function(){return x},Tr:function(){return v},hr:function(){return j},iA:function(){return f},p3:function(){return b},xJ:function(){return h}});var n=t(81439),i=t(15031),s=t(67294);function o(){return o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o.apply(this,arguments)}function c(e,r){if(null==e)return{};var t,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}var a=["overflow","overflowX","className"],l=["className"],u=["placement"],d=["isNumeric"],p=["isNumeric"],h=(0,n.Gp)((function(e,r){var t,l=e.overflow,u=e.overflowX,d=e.className,p=c(e,a);return s.createElement(n.m$.div,o({ref:r,className:(0,i.cx)("chakra-table__container",d)},p,{__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:null!=(t=null!=l?l:u)?t:"auto",overflowY:"hidden",maxWidth:"100%"}}))})),f=(0,n.Gp)((function(e,r){var t=(0,n.jC)("Table",e),a=(0,n.Lr)(e),u=a.className,d=c(a,l);return s.createElement(n.Fo,{value:t},s.createElement(n.m$.table,o({role:"table",ref:r,__css:t.table,className:(0,i.cx)("chakra-table",u)},d)))}));i.Ts&&(f.displayName="Table");var m=(0,n.Gp)((function(e,r){var t=e.placement,i=void 0===t?"bottom":t,a=c(e,u),l=(0,n.yK)();return s.createElement(n.m$.caption,o({},a,{ref:r,__css:o({},l.caption,{captionSide:i})}))}));i.Ts&&(m.displayName="TableCaption");var j=(0,n.Gp)((function(e,r){var t=(0,n.yK)();return s.createElement(n.m$.thead,o({},e,{ref:r,__css:t.thead}))})),b=(0,n.Gp)((function(e,r){var t=(0,n.yK)();return s.createElement(n.m$.tbody,o({},e,{ref:r,__css:t.tbody}))})),g=(0,n.Gp)((function(e,r){var t=(0,n.yK)();return s.createElement(n.m$.tfoot,o({},e,{ref:r,__css:t.tfoot}))})),x=(0,n.Gp)((function(e,r){var t=e.isNumeric,i=c(e,d),a=(0,n.yK)();return s.createElement(n.m$.th,o({},i,{ref:r,__css:a.th,"data-is-numeric":t}))})),v=(0,n.Gp)((function(e,r){var t=(0,n.yK)();return s.createElement(n.m$.tr,o({role:"row"},e,{ref:r,__css:t.tr}))})),y=(0,n.Gp)((function(e,r){var t=e.isNumeric,i=c(e,p),a=(0,n.yK)();return s.createElement(n.m$.td,o({role:"gridcell"},i,{ref:r,__css:a.td,"data-is-numeric":t}))}))},10867:function(e,r,t){"use strict";t.d(r,{Tg:function(){return o},uC:function(){return c}});var n=t(97142),i=t(65648),s=t(85893),o=function(e){return(0,n.C)(i.uu).filter((function(r){return e.includes(r)})).length>0},c=function(e){return(0,n.C)(i.C0).filter((function(r){return e.includes(r)})).length>0};r.ZP=function(e){var r=e.scopes,t=e.children;return o(r)?(0,s.jsx)(s.Fragment,{children:t}):null}},49743:function(e,r,t){"use strict";var n=t(59499),i=t(4730),s=t(4612),o=t(48591),c=t(15193),a=t(85893),l=["search","onChange","withIcon","withClear"];function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.search,t=e.onChange,n=e.withIcon,u=e.withClear,p=(0,i.Z)(e,l);return(0,a.jsxs)(s.BZ,{size:"sm",minWidth:"308px",children:[n?(0,a.jsx)(s.Z8,{pointerEvents:"none",children:(0,a.jsx)(o.PT,{color:"gray.300",w:"17px",h:"17px"})}):null,(0,a.jsx)(s.II,d({autoComplete:"off",type:"search",minWidth:200,size:"sm",borderRadius:"md",value:r,name:"search",onChange:function(e){return t(e.target.value)}},p)),u?(0,a.jsx)(s.xH,{width:"3.5rem",display:"flex",alignItems:"center",children:(0,a.jsx)(c.zx,{fontWeight:"light",size:"sm",onClick:function(){t("")},height:"95%",width:"95%",children:"Clear"})}):null]})}},10846:function(e,r,t){"use strict";t.d(r,{MA:function(){return u},Vo:function(){return p},t5:function(){return d}});var n=t(59499),i=t(68527),s=t(85893);function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var a=function(e){var r=e.message;return(0,s.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",r]})},l=function(e){var r=e.message;return(0,s.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",r]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var r=(0,s.jsx)(a,{message:e});return c(c({},u),{description:r})},p=function(e){var r=(0,s.jsx)(l,{message:e});return c(c({},u),{description:r,status:"error"})}},78221:function(e,r,t){"use strict";var n=t(4730),i=t(50029),s=t(16835),o=t(87794),c=t.n(o),a=t(28609),l=t(43871),u=t(68527),d=t(15193),p=t(82175),h=t(11163),f=(t(67294),t(74231)),m=t(97142),j=t(18459),b=t(96016),g=t(65698),x=t(10846),v=t(43072),y=t(85893),O=["user"],w={username:"",usernameConfirmation:""};r.Z=function(e){var r=e.user,t=(0,n.Z)(e,O),o=t.isOpen,P=t.onClose,E=function(e){var r=e.id,t=e.username,n=e.onClose,o=(0,a.pm)(),l=(0,h.useRouter)(),u=(0,m.T)(),d=(0,v.I1)(),p=(0,s.Z)(d,1)[0],b=function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(r);case 2:t=e.sent,(0,g.D4)(t)?o((0,x.Vo)((0,g.e$)(t.error))):(o((0,x.t5)("Successfully deleted user")),n()),u((0,v.Vv)(void 0)),l.push(j.e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleDeleteUser:b,validationSchema:f.Ry().shape({username:f.Z_().required().oneOf([t],"Username must match this user's").label("Username"),usernameConfirmation:f.Z_().required().oneOf([f.iH("username")],"Usernames must match").label("Username confirmation")})}}({id:r.id,username:r.username,onClose:P}),_=E.handleDeleteUser,C=E.validationSchema;return(0,y.jsxs)(l.u_,{isCentered:!0,isOpen:o,onClose:P,children:[(0,y.jsx)(l.ZA,{}),(0,y.jsx)(l.hz,{"data-testid":"delete-user-modal",children:(0,y.jsx)(p.J9,{initialValues:w,validationSchema:C,onSubmit:_,children:function(e){var r=e.isSubmitting,t=e.dirty,n=e.isValid;return(0,y.jsxs)(p.l0,{children:[(0,y.jsx)(l.xB,{children:"Delete User"}),(0,y.jsx)(l.ol,{}),(0,y.jsx)(l.fe,{children:(0,y.jsxs)(u.Kq,{direction:"column",spacing:4,children:[(0,y.jsx)(b.j0,{name:"username",label:"Enter username"}),(0,y.jsx)(b.j0,{name:"usernameConfirmation",label:"Confirm username"})]})}),(0,y.jsx)(l.mz,{children:(0,y.jsxs)(d.hE,{size:"sm",spacing:"2",width:"100%",children:[(0,y.jsx)(d.zx,{onClick:P,variant:"outline",width:"50%",children:"Cancel"}),(0,y.jsx)(d.zx,{colorScheme:"primary",disabled:!t||!n,isLoading:r,type:"submit",width:"50%","data-testid":"submit-btn",children:"Delete User"})]})})]})}})})]})}},41040:function(e,r,t){"use strict";t.d(r,{K:function(){return i}});var n=t(7045),i=[{label:"Owner",permissions_label:"Owner",roleKey:n.A7.OWNER,description:"Owners have view and edit access to the whole organization and can create new users"},{label:"Contributor",permissions_label:"Contributor",roleKey:n.A7.CONTRIBUTOR,description:"Contributors can create new users and have view and edit access to the whole organization apart from configuring storage and messaging"},{label:"Viewer",permissions_label:"Viewer",roleKey:n.A7.VIEWER,description:"Viewers have view access to the Data Map and all systems"},{label:"Viewer & Approver",permissions_label:"Viewer & Approver",roleKey:n.A7.VIEWER_AND_APPROVER,description:"Viewer & Approvers have view access to the Data Map but can also manage Privacy Requests"},{label:"Approver",permissions_label:"Approver",roleKey:n.A7.APPROVER,description:"Approvers can only access the Privacy Requests portal to manage requests"}]},42498:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Z}});var n=t(68527),i=t(67294),s=t(59499),o=t(79042),c=t(15193),a=t(2664),l=t(97142),u=t(43072),d=t(97375),p=t(81655),h=t(48591),f=t(46871),m=t(11163),j=t(37161),b=t(10867),g=t(41040),x=t(7045),v=t(18459),y=t(78221),O=t(85893);function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var E=function(e){var r,t,i=e.user,s=(0,m.useRouter)(),a=(0,d.qY)(),w=(0,l.C)(j.dy),E=!!w&&w.id===i.id,_=(0,b.Tg)([x.Sh.USER_UPDATE])||E,C=function(){_&&s.push("".concat(v.e3,"/profile/").concat(i.id))},S=(0,u.gU)(null!==(r=i.id)&&void 0!==r?r:"",{skip:!i.id}).data,T=(0,u.d6)(null!==(t=i.id)&&void 0!==t?t:"",{skip:!i.id}).data,D=[];return S&&S.roles&&S.roles.forEach((function(e){var r=g.K.find((function(r){return r.roleKey===e}));r&&D.push(r.permissions_label)})),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(o.Tr,{_hover:{bg:"gray.50",cursor:_?"pointer":void 0},height:"36px","data-testid":"row-".concat(i.id),children:[(0,O.jsx)(o.Td,{pl:0,py:1,onClick:C,children:i.username}),(0,O.jsx)(o.Td,{pl:0,py:1,onClick:C,children:i.first_name}),(0,O.jsx)(o.Td,{pl:0,py:1,onClick:C,children:i.last_name}),(0,O.jsx)(o.Td,{pl:0,py:1,onClick:C,children:D.map((function(e){return(0,O.jsx)(n.Ct,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-permissions-badge",children:e},e)}))}),(0,O.jsx)(o.Td,{pl:0,py:1,onClick:C,children:(0,O.jsx)(n.Ct,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-systems-badge",children:T?T.length:0})}),(0,O.jsx)(o.Td,{pl:0,py:1,onClick:C,children:i.created_at?new Date(i.created_at).toUTCString():null}),(0,O.jsx)(b.ZP,{scopes:[x.Sh.USER_UPDATE,x.Sh.USER_DELETE],children:(0,O.jsx)(o.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:(0,O.jsx)(c.hE,{children:(0,O.jsxs)(p.v2,{children:[(0,O.jsx)(p.j2,{as:c.zx,size:"xs",bg:"white","data-testid":"menu-btn",children:(0,O.jsx)(h.nX,{color:"gray.700",w:18,h:18})}),(0,O.jsx)(f.h_,{children:(0,O.jsxs)(p.qy,{shadow:"xl","data-testid":"menu-".concat(i.id),children:[(0,O.jsx)(b.ZP,{scopes:[x.Sh.USER_UPDATE],children:(0,O.jsx)(p.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:C,"data-testid":"edit-btn",children:(0,O.jsx)(n.xv,{fontSize:"sm",children:"Edit"})})}),(0,O.jsx)(b.ZP,{scopes:[x.Sh.USER_DELETE],children:(0,O.jsx)(p.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:a.onOpen,"data-testid":"delete-btn",children:(0,O.jsx)(n.xv,{fontSize:"sm",children:"Delete"})})})]})})]})})})})]},i.id),(0,O.jsx)(y.Z,P({user:i},a))]})};function _(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function C(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var S=function(){var e=function(){var e=(0,a.useDispatch)(),r=(0,a.useSelector)(u.lq),t=(0,u.wv)(r),n=t.data,i=t.isLoading,s=n||{users:[],total:0},o=s.items,c=s.total;return C(C({},r),{},{isLoading:i,users:o,total:c,handleNextPage:function(){e((0,u.YA)(r.page+1))},handlePreviousPage:function(){e((0,u.YA)(r.page-1))}})}(),r=e.users,t=e.total,s=e.page,d=e.size,p=e.handleNextPage,h=e.handlePreviousPage,f=(s-1)*d+1,m=Math.min(t,s*d),j=(0,l.T)();return(0,i.useEffect)((function(){j((0,u.Vv)(void 0))}),[j]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(o.iA,{size:"sm","data-testid":"user-management-table",children:[(0,O.jsx)(o.hr,{children:(0,O.jsxs)(o.Tr,{children:[(0,O.jsx)(o.Th,{pl:0,children:"Username"}),(0,O.jsx)(o.Th,{pl:0,children:"First Name"}),(0,O.jsx)(o.Th,{pl:0,children:"Last Name"}),(0,O.jsx)(o.Th,{pl:0,children:"Permissions"}),(0,O.jsx)(o.Th,{pl:0,children:"Assigned Systems"}),(0,O.jsx)(o.Th,{pl:0,children:"Created At"})]})}),(0,O.jsx)(o.p3,{children:null===r||void 0===r?void 0:r.map((function(e){return(0,O.jsx)(E,{user:e},e.id)}))})]}),(0,O.jsxs)(n.kC,{justifyContent:"space-between",mt:6,children:[(0,O.jsx)(n.xv,{fontSize:"xs",color:"gray.600",children:t>0?(0,O.jsxs)(O.Fragment,{children:["Showing ",Number.isNaN(f)?0:f," to"," ",Number.isNaN(m)?0:m," of"," ",Number.isNaN(t)?0:t," results"]}):"0 results"}),(0,O.jsxs)("div",{children:[(0,O.jsx)(c.zx,{disabled:s<=1,onClick:h,mr:2,size:"sm",children:"Previous"}),(0,O.jsx)(c.zx,{disabled:s*d>=t,onClick:p,size:"sm",children:"Next"})]})]})]})};S.defaultProps={users:[]};var T=S,D=t(41664),N=t.n(D),k=t(49743);function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var R=function(){var e=(0,a.useSelector)(u.lq),r=(0,a.useDispatch)();return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?A(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({handleSearchChange:function(e){r((0,u.SY)(e))}},e)},z=function(){var e=R(),r=e.handleSearchChange,t=e.username;return(0,O.jsxs)(n.Kq,{direction:"row",spacing:4,mb:6,children:[(0,O.jsx)(k.Z,{search:t,onChange:r,placeholder:"Search by Username"}),(0,O.jsx)(b.ZP,{scopes:[x.Sh.USER_CREATE],children:(0,O.jsx)(N(),{href:"".concat(v.e3,"/new"),passHref:!0,children:(0,O.jsx)(c.zx,{colorScheme:"primary",flexShrink:0,size:"sm","data-testid":"add-new-user-btn",children:"Add New User"})})})]})},U=t(48057),Z=function(){return(0,O.jsxs)(U.Z,{title:"User Management",children:[(0,O.jsx)(n.X6,{fontSize:"2xl",fontWeight:"semibold",mb:4,children:"User Management"}),(0,O.jsx)(z,{}),(0,O.jsx)(T,{})]})}},58769:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-management",function(){return t(42498)}])}},function(e){e.O(0,[5630,3206,4231,8057,7080,9774,2888,179],(function(){return r=58769,e(e.s=r);var r}));var r=e.O();_N_E=r}]);