

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!--
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be)
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->
    <title>gui.appMenu &#8212; pyFormex 3.3 documentation</title>

    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pyformex.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<link rel="icon" type="image/png" href="../../_static/pyformex_fav.png" />

  </head><body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="../../_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="../../_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href="">gui.appMenu</a></li--> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<!-- PYFORMEX_SIDEBAR_LOGO -->
<!-- PYFORMEX_WEBSITE_SIDEBAR_TOP -->

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for gui.appMenu</h1><div class="highlight"><pre>
<span></span><span class="c1">#</span>
<span class="c1">##</span>
<span class="c1">##  SPDX-FileCopyrightText: Â© 2007-2023 Benedict Verhegghe &lt;bverheg@gmail.com&gt;</span>
<span class="c1">##  SPDX-License-Identifier: GPL-3.0-or-later</span>
<span class="c1">##</span>
<span class="c1">##  This file is part of pyFormex 3.3  (Sun Mar 26 20:16:15 CEST 2023)</span>
<span class="c1">##  pyFormex is a tool for generating, manipulating and transforming 3D</span>
<span class="c1">##  geometrical models by sequences of mathematical operations.</span>
<span class="c1">##  Home page: https://pyformex.org</span>
<span class="c1">##  Project page: https://savannah.nongnu.org/projects/pyformex/</span>
<span class="c1">##  Development: https://gitlab.com/bverheg/pyformex</span>
<span class="c1">##  Distributed under the GNU General Public License version 3 or later.</span>
<span class="c1">##</span>
<span class="c1">##  This program is free software: you can redistribute it and/or modify</span>
<span class="c1">##  it under the terms of the GNU General Public License as published by</span>
<span class="c1">##  the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">##  (at your option) any later version.</span>
<span class="c1">##</span>
<span class="c1">##  This program is distributed in the hope that it will be useful,</span>
<span class="c1">##  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">##  GNU General Public License for more details.</span>
<span class="c1">##</span>
<span class="c1">##  You should have received a copy of the GNU General Public License</span>
<span class="c1">##  along with this program.  If not, see http://www.gnu.org/licenses/.</span>
<span class="c1">##</span>
<span class="sd">&quot;&quot;&quot;Menu with pyFormex apps.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">import</span> <span class="nn">pyformex</span> <span class="k">as</span> <span class="nn">pf</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">apps</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">olist</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">script</span>
<span class="kn">from</span> <span class="nn">pyformex.gui</span> <span class="kn">import</span> <span class="n">menu</span>
<span class="kn">from</span> <span class="nn">pyformex.gui</span> <span class="kn">import</span> <span class="n">draw</span>
<span class="kn">from</span> <span class="nn">pyformex.gui.menus</span> <span class="kn">import</span> <span class="n">Settings</span>


<span class="n">catname</span> <span class="o">=</span> <span class="s1">&#39;apps.cat&#39;</span>


<div class="viewcode-block" id="sortSets"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.sortSets">[docs]</a><span class="k">def</span> <span class="nf">sortSets</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Turn the set values in d into sorted lists.</span>

<span class="sd">    - `d`: a Python dictionary</span>

<span class="sd">    All the values in the dictionary are checked. Those that are of type</span>
<span class="sd">    `set` are converted to a sorted list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="nb">set</span><span class="p">):</span>
            <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">])</span></div>


<div class="viewcode-block" id="classify"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.classify">[docs]</a><span class="k">def</span> <span class="nf">classify</span><span class="p">(</span><span class="n">appdir</span><span class="p">,</span> <span class="n">pkg</span><span class="p">,</span> <span class="n">nmax</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Classify the files in submenus according to keywords.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">class</span> <span class="nc">failed</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;A class to allow failing examples in the catalog&quot;&quot;&quot;</span>
        <span class="n">_status</span> <span class="o">=</span> <span class="s1">&#39;failed&#39;</span>

    <span class="n">all_apps</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">apps</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="n">appdir</span><span class="p">))</span>
    <span class="n">kat</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;byname&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="s1">&#39;topics&#39;</span><span class="p">,</span> <span class="s1">&#39;techniques&#39;</span><span class="p">]</span>
    <span class="n">cat</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">k</span><span class="p">,</span> <span class="nb">set</span><span class="p">())</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kat</span><span class="p">])</span>
    <span class="n">cat</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;failed&#39;</span><span class="p">,</span> <span class="s1">&#39;checked&#39;</span><span class="p">,</span> <span class="s1">&#39;unchecked&#39;</span><span class="p">]</span>
    <span class="n">cat</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;beginner&#39;</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="s1">&#39;advanced&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
    <span class="n">col</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">nmax</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># Do not exagerate!</span>
        <span class="c1"># split the full collection in alphabetical groups of length nmax</span>
        <span class="n">lbl</span><span class="p">,</span> <span class="n">grp</span> <span class="o">=</span> <span class="n">splitAlpha</span><span class="p">(</span><span class="n">all_apps</span><span class="p">,</span> <span class="n">nmax</span><span class="p">)</span>
        <span class="n">cat</span><span class="p">[</span><span class="s1">&#39;byname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lbl</span>
        <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">lbl</span><span class="p">,</span> <span class="n">grp</span><span class="p">):</span>
            <span class="n">col</span><span class="p">[</span><span class="s1">&#39;byname/&#39;</span><span class="o">+</span><span class="n">l</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">appname</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_apps</span><span class="p">):</span>

        <span class="c1">#col[&#39;all&#39;].update([appname])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fullname</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pkg</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">appname</span>
            <span class="n">app</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">fullname</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">app</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;App &#39;</span><span class="si">%s</span><span class="s2">&#39; has no run method&quot;</span> <span class="o">%</span> <span class="n">fullname</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">app</span> <span class="o">=</span> <span class="n">failed</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to load app &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">fullname</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kat</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">k</span><span class="p">):</span>
                <span class="n">v</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">k</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="n">vi</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">vi</span> <span class="ow">in</span> <span class="n">v</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;level&#39;</span><span class="p">]:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cat</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                    <span class="n">ki</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">ki</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
                        <span class="n">col</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                    <span class="n">col</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="n">appname</span><span class="p">])</span>

    <span class="n">sortSets</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
    <span class="n">sortSets</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">all_apps</span><span class="p">,</span> <span class="n">kat</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">col</span></div>


<div class="viewcode-block" id="splitAlpha"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.splitAlpha">[docs]</a><span class="k">def</span> <span class="nf">splitAlpha</span><span class="p">(</span><span class="n">strings</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">ignorecase</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Split a series of strings in alphabetic collections.</span>

<span class="sd">    The strings are split over a series of bins in alphabetical order.</span>
<span class="sd">    Each bin can contain strings starting with multiple successive</span>
<span class="sd">    characters, but not more than n items. Items starting with the same</span>
<span class="sd">    character are always in the same bin. If any starting character</span>
<span class="sd">    occurs more than n times, the maximum will be exceeded.</span>

<span class="sd">    - `files`: a list of strings start with an upper case letter (&#39;A&#39;-&#39;Z&#39;)</span>
<span class="sd">    - `n`: the desired maximum number of items in a bin.</span>

<span class="sd">    Returns: a tuple of</span>

<span class="sd">    - `labels`: a list of strings specifying the range of start characters</span>
<span class="sd">      (or the single start character) for the bins</span>
<span class="sd">    - `groups`: a list with the contents of the bins. Each item is a list</span>
<span class="sd">      of sorted strings starting with one of the characters in the</span>
<span class="sd">      corresponding label</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">pyformex.arraytools</span> <span class="kn">import</span> <span class="n">multiplicity</span>
    <span class="k">if</span> <span class="n">ignorecase</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span>
    <span class="n">strings</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">strings</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
    <span class="n">mult</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">multiplicity</span><span class="p">([</span><span class="nb">ord</span><span class="p">(</span><span class="n">key</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">strings</span><span class="p">])</span>
    <span class="n">count</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">mult</span><span class="p">))</span>
    <span class="n">cat</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">grp</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">accept</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">mtot</span><span class="p">,</span> <span class="n">skip</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">skip</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">:</span>
                <span class="n">cat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%c</span><span class="s1">-</span><span class="si">%c</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="nb">chr</span><span class="p">(</span><span class="n">j</span><span class="p">)))</span>
            <span class="n">grp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">strings</span><span class="p">[:</span><span class="n">mtot</span><span class="p">])</span>
        <span class="k">del</span> <span class="n">strings</span><span class="p">[:</span><span class="n">mtot</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">group</span><span class="p">(</span><span class="n">fromchar</span><span class="p">,</span> <span class="n">tochar</span><span class="p">,</span> <span class="n">skip</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Take the group from fromchar to tochar, inclusive</span>

<span class="sd">        fromchar and tochar are characters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">fromchar</span><span class="p">)</span>
        <span class="n">mtot</span> <span class="o">=</span> <span class="n">count</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="nb">ord</span><span class="p">(</span><span class="n">tochar</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">mtot</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
                <span class="n">accept</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">mtot</span><span class="p">,</span> <span class="n">skip</span><span class="p">)</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">mtot</span> <span class="o">=</span> <span class="n">count</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mj</span> <span class="o">=</span> <span class="n">count</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">mtot</span><span class="o">+</span><span class="n">mj</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
                    <span class="n">accept</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">mtot</span><span class="p">,</span> <span class="n">skip</span><span class="p">)</span>
                    <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">=</span> <span class="n">j</span><span class="o">+</span><span class="mi">1</span>
                    <span class="n">mtot</span> <span class="o">=</span> <span class="n">mj</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">mtot</span> <span class="o">+=</span> <span class="n">mj</span>
        <span class="k">if</span> <span class="n">mtot</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">accept</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">mtot</span><span class="p">,</span> <span class="n">skip</span><span class="p">)</span>

    <span class="c1"># The grouping has to start from char(0) and loop over all values!</span>
    <span class="n">group</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">31</span><span class="p">),</span> <span class="n">skip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">group</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;@&#39;</span><span class="p">)</span>
    <span class="n">group</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ignorecase</span><span class="p">:</span>
        <span class="c1"># we should skip the group between</span>
        <span class="n">group</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">cat</span><span class="p">,</span> <span class="n">grp</span></div>


<div class="viewcode-block" id="AppMenu"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu">[docs]</a><span class="k">class</span> <span class="nc">AppMenu</span><span class="p">(</span><span class="n">menu</span><span class="o">.</span><span class="n">Menu</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A menu of pyFormex applications in a directory or list.</span>

<span class="sd">    This class creates a menu of pyFormex applications or scripts</span>
<span class="sd">    collected from a directory or specified as a list of modules.</span>
<span class="sd">    It is used in the pyFormex GUI to create</span>
<span class="sd">    the examples menu, and for the apps history. The pyFormex apps</span>
<span class="sd">    can then be run from the menu or from the button toolbar.</span>
<span class="sd">    The user may use this class to add his own apps/scripts</span>
<span class="sd">    into the pyFormex GUI.</span>

<span class="sd">    Apps are simply Python modules that have a &#39;run&#39; function.</span>
<span class="sd">    Only these modules will be added to the menu.</span>
<span class="sd">    Only files that are recognized by :func:`utils.is_pyFormex()` as being</span>
<span class="sd">    pyFormex scripts will be added to the menu.</span>

<span class="sd">    The constructor takes the following arguments:</span>

<span class="sd">    - `title`: the top level label for the menu</span>
<span class="sd">    - `dir`: an optional directory path. If specified, and no `files` argument</span>
<span class="sd">      is specified, all Python files in `dir` that do not start with either</span>
<span class="sd">      &#39;.&#39; or &#39;_&#39;, will be considered for inclusion in the menu.</span>
<span class="sd">      If mode==&#39;app&#39;, they will only be included if</span>
<span class="sd">      they can be loaded as a module. If mode==&#39;script&#39;, they will only be</span>
<span class="sd">      included if they are considered a pyFormex script by utils.is_pyFormex.</span>
<span class="sd">      If `files` is specified, `dir` will just be prepended to each file in</span>
<span class="sd">      the list.</span>
<span class="sd">    - `files`: an explicit list of file names of pyFormex scripts.</span>
<span class="sd">      If no `dir` nor `ext` arguments are given, these should be the full path</span>
<span class="sd">      names to the script files. Otherwise, `dir` is prepended and `ext` is</span>
<span class="sd">      appended to each filename.</span>
<span class="sd">    - `ext`: an extension to be added to each filename. If `dir` was specified,</span>
<span class="sd">      the default extension is &#39;.py&#39;. If no `dir` was specified, the default</span>
<span class="sd">      extension is an empty string.</span>
<span class="sd">    - `recursive`: if True, a cascading menu of all pyFormex scripts in the</span>
<span class="sd">      directory and below will be constructed. If only `dir` and no `files`</span>
<span class="sd">      are specified, the default is True</span>
<span class="sd">    - `max`: if specified, the list of files will be truncated to this number</span>
<span class="sd">      of items. Adding more files to the menu will then be done at the top and</span>
<span class="sd">      the surplus number of files will be dropped from the bottom of the list.</span>

<span class="sd">    The defaults were thus chosen to be convenient for the three most frequent</span>
<span class="sd">    uses of this class::</span>

<span class="sd">      AppMenu(&#39;My Apps&#39;,dir=&quot;/path/to/my/appsdir&quot;)</span>

<span class="sd">    creates a menu with all pyFormex apps in the specified path and its</span>
<span class="sd">    subdirectories.</span>

<span class="sd">    ::</span>

<span class="sd">      ApptMenu(&#39;My Scripts&#39;,dir=&quot;/path/to/my/sciptsdir&quot;,mode=&#39;scripts&#39;)</span>

<span class="sd">    creates a menu with all pyFormex scripts in the specified path and its</span>
<span class="sd">    subdirectories.</span>

<span class="sd">    ::</span>

<span class="sd">      AppMenu(&#39;History&#39;,files=[&quot;/my/script1.py&quot;,&quot;/some/other/script.pye&quot;],\</span>
<span class="sd">          mode=&#39;script&#39;,recursive=False)</span>

<span class="sd">    is typically used to create a history menu of previously visited script</span>
<span class="sd">    files.</span>

<span class="sd">    With the resulting file list, a menu is created. Selecting a menu item</span>
<span class="sd">    will make the corresponding file the current script and unless the</span>
<span class="sd">    `autoplay` configuration variable was set to False, the script is executed.</span>

<span class="sd">    Furthermore, if the menu is a toplevel one, it will have the following</span>
<span class="sd">    extra options:</span>

<span class="sd">    - :menuselection:`Classify scripts`</span>
<span class="sd">    - :menuselection:`Remove catalog`</span>
<span class="sd">    - :menuselection:`Reload scripts`</span>

<span class="sd">    The first option uses the keyword specifications in the scripts docstring</span>
<span class="sd">    to make a classification of the scripts according to keywords.</span>
<span class="sd">    See the :func:`scriptKeywords()` function for more info. The second option</span>
<span class="sd">    removes the classification. Both options are especially useful for the</span>
<span class="sd">    pyFormex examples.</span>

<span class="sd">    The last option reloads a ScriptMenu. This can be used to update the menu</span>
<span class="sd">    when you created a new script file.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">recursive</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">autoplay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">toplevel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">before</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a menu with pyFormex apps/scripts to play.&quot;&quot;&quot;</span>
        <span class="n">pf</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;New AppMenu </span><span class="si">%s</span><span class="s2">: dir=</span><span class="si">%s</span><span class="s2">; files=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="nb">dir</span><span class="p">,</span> <span class="n">files</span><span class="p">),</span>
                 <span class="n">pf</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">APPS</span><span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">Menu</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">before</span><span class="o">=</span><span class="n">before</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">dir</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">files</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;At least one of &#39;dir&#39; or &#39;files&#39; must be set.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="nb">dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">=</span> <span class="nb">dir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="n">files</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_actions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">!=</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ext</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ext</span> <span class="o">=</span> <span class="s1">&#39;.py&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ext</span> <span class="o">=</span> <span class="n">ext</span>
        <span class="k">if</span> <span class="n">recursive</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">recursive</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recursive</span> <span class="o">=</span> <span class="n">recursive</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toplevel</span> <span class="o">=</span> <span class="n">toplevel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">=</span> <span class="nb">max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoplay</span> <span class="o">=</span> <span class="n">autoplay</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pkg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pkg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">loadCatalog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">catfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">/</span> <span class="n">catname</span>
        <span class="k">if</span> <span class="n">catfile</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">execFile</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">catfile</span><span class="p">),</span> <span class="nb">globals</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kat</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;all_apps&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">!=</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
                    <span class="n">files</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">mk</span> <span class="o">=</span> <span class="n">AppMenu</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span> <span class="nb">dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                             <span class="n">mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">toplevel</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">autoplay</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">autoplay</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cat</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="s1">&#39;-&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
                        <span class="c1"># alpha label like A-B</span>
                        <span class="n">lbl</span> <span class="o">=</span> <span class="n">i</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># string from catalog file</span>
                        <span class="n">lbl</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
                    <span class="n">ki</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                    <span class="n">mi</span> <span class="o">=</span> <span class="n">AppMenu</span><span class="p">(</span><span class="n">lbl</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">col</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ki</span><span class="p">,</span> <span class="p">[]),</span>
                                 <span class="n">mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">toplevel</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">autoplay</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">autoplay</span><span class="p">,</span>
                                 <span class="n">parent</span><span class="o">=</span><span class="n">mk</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>


    <span class="k">def</span> <span class="nf">loadSubmenus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dirs</span><span class="o">=</span><span class="p">[]):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">dirs</span><span class="p">:</span>
            <span class="n">dirs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">dirnames</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dirs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;._&#39;</span><span class="p">:</span>  <span class="c1"># skip hidden and private dirs</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">AppMenu</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">/</span> <span class="n">d</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">,</span>
                            <span class="n">autoplay</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">autoplay</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">recursive</span><span class="p">,</span>
                            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>


<div class="viewcode-block" id="AppMenu.getFiles"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.getFiles">[docs]</a>    <span class="k">def</span> <span class="nf">getFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a list of scripts in self.dir&quot;&quot;&quot;</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="o">.</span><span class="n">filenames</span><span class="p">()</span> <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;._&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">:</span>
            <span class="n">filtr</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">)</span>
            <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">[:</span><span class="o">-</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">filtr</span><span class="p">(</span><span class="n">f</span><span class="p">)]</span>

        <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterFiles</span><span class="p">(</span><span class="n">files</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">files</span></div>


<div class="viewcode-block" id="AppMenu.filterFiles"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.filterFiles">[docs]</a>    <span class="k">def</span> <span class="nf">filterFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">files</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filter a list of scripts&quot;&quot;&quot;</span>
        <span class="n">filtr</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_pyFormex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fileName</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">filtr</span><span class="p">(</span><span class="n">f</span><span class="p">)]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="n">files</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">files</span></div>


<div class="viewcode-block" id="AppMenu.loadFiles"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.loadFiles">[docs]</a>    <span class="k">def</span> <span class="nf">loadFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load the app/script files in this menu&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">files</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">detect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFiles</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">!=</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterFiles</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="n">files</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="n">files</span>

        <span class="n">pf</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found </span><span class="si">%s</span><span class="s2">s in </span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">capitalize</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">),</span> <span class="n">pf</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">APPS</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">my_actions</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">insert_action</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span></div>


    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loadFiles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loadCatalog</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recursive</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loadSubmenus</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loadFiles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">toplevel</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">insert_sep</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s1">&#39;Classify apps&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_classify</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s1">&#39;Remove catalog&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unclassify</span><span class="p">)</span>

                <span class="c1"># Confined to &#39;app&#39;, crashes when applied on script</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s1">&#39;Reload apps&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">)</span>


<div class="viewcode-block" id="AppMenu.fileName"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.fileName">[docs]</a>    <span class="k">def</span> <span class="nf">fileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the full pathname for a script.&quot;&quot;&quot;</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">:</span>
            <span class="n">fn</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">:</span>
            <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">/</span> <span class="n">fn</span>
        <span class="k">return</span> <span class="n">fn</span></div>


<div class="viewcode-block" id="AppMenu.fullAppName"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.fullAppName">[docs]</a>    <span class="k">def</span> <span class="nf">fullAppName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the pkg.module name for an app.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pkg</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pkg</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">app</span></div>


<div class="viewcode-block" id="AppMenu.listApps"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.listApps">[docs]</a>    <span class="k">def</span> <span class="nf">listApps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the full AppNAme of all apps under this menu.</span>

<span class="sd">        The default recursive=True includes all apps under submenus as well.</span>

<span class="sd">        This is only for app mode menus!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullAppName</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">menuNames</span><span class="p">():</span>
                <span class="n">files</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">listApps</span><span class="p">(</span><span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">files</span></div>


<div class="viewcode-block" id="AppMenu.run"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run the selected app.</span>

<span class="sd">        This function is executed when the menu item is selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">app</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">app</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">runApp</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">play</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">autoplay</span><span class="p">)</span></div>


<div class="viewcode-block" id="AppMenu.runApp"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.runApp">[docs]</a>    <span class="k">def</span> <span class="nf">runApp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">,</span> <span class="n">play</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set/Run the specified app.</span>

<span class="sd">        Set the specified app as the current app,</span>
<span class="sd">        and run it if play==True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current</span> <span class="o">=</span> <span class="n">app</span>
        <span class="c1">#if self.mode != &#39;app&#39;:</span>
        <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">setcurfile</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">play</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
                <span class="n">appname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullAppName</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">appname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
            <span class="n">pf</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Running application </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">appname</span><span class="p">,</span> <span class="n">pf</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">APPS</span><span class="o">|</span><span class="n">pf</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">MENU</span><span class="p">)</span>
            <span class="n">script</span><span class="o">.</span><span class="n">runAny</span><span class="p">(</span><span class="n">appname</span><span class="p">)</span></div>


<div class="viewcode-block" id="AppMenu.runAll"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.runAll">[docs]</a>    <span class="k">def</span> <span class="nf">runAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">startfrom</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">stopat</span><span class="o">=</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">timeout</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">pause</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">random</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run all apps with a name in the range [startfrom,stopat[.</span>

<span class="sd">        Runs the apps with a name &gt;= `startfrom` and &lt; `stopat`.</span>
<span class="sd">        The default will run all apps starting with a capital (like</span>
<span class="sd">        the examples). Specify None to disable the limit.</span>
<span class="sd">        If count is positive, at most count scripts are executed.</span>
<span class="sd">        If recursive is True, also the files in submenu are played.</span>
<span class="sd">        If random is True, the files in any submenu are shuffled before running.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pyformex.gui.draw</span> <span class="kn">import</span> <span class="n">layout</span><span class="p">,</span> <span class="n">reset</span><span class="p">,</span> <span class="n">sleep</span>
        <span class="kn">from</span> <span class="nn">pyformex.gui</span> <span class="kn">import</span> <span class="n">widgets</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">!=</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I can only do this in &#39;App&#39; mode, not &#39;Script&#39; mode&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">startfrom</span><span class="p">,</span> <span class="n">stopat</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>

        <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">enableButtons</span><span class="p">(</span><span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">actions</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Stop&#39;</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span>
        <span class="k">if</span> <span class="n">startfrom</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">f</span> <span class="o">&gt;=</span> <span class="n">startfrom</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">stopat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="n">stopat</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">random</span><span class="p">:</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="n">files</span><span class="p">[:</span><span class="n">count</span><span class="p">]</span>

        <span class="n">tcount</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tcount</span><span class="p">,</span> <span class="n">files</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">tcount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Run these files</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running </span><span class="si">%s</span><span class="s2"> applications from &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">()))</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
            <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">runallmode</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">save</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">input_timeout</span>
            <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">drawlock</span><span class="o">.</span><span class="n">free</span><span class="p">()</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">input_timeout</span> <span class="o">=</span> <span class="n">timeout</span>
            <span class="n">tcount</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                    <span class="n">layout</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">reset</span><span class="p">()</span>
                    <span class="n">pf</span><span class="o">.</span><span class="n">PF</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running app &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">f</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">runApp</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                    <span class="n">script</span><span class="o">.</span><span class="n">breakpt</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Breakpoint from runall&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">script</span><span class="o">.</span><span class="n">exitrequested</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="n">tcount</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">sleep</span><span class="p">(</span><span class="n">pause</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">widgets</span><span class="o">.</span><span class="n">input_timeout</span> <span class="o">=</span> <span class="n">save</span>
                <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">drawlock</span><span class="o">.</span><span class="n">allow</span><span class="p">()</span>
                <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">runallmode</span> <span class="o">=</span> <span class="kc">False</span>


        <span class="c1"># if room for more, recurse into submenus</span>
        <span class="k">if</span> <span class="n">recursive</span> <span class="ow">and</span> <span class="p">(</span><span class="n">count</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">tcount</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">menuNames</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">runAll</span><span class="p">(</span><span class="n">startfrom</span><span class="p">,</span> <span class="n">stopat</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="o">-</span><span class="n">tcount</span><span class="p">,</span>
                             <span class="n">recursive</span><span class="o">=</span><span class="n">recursive</span><span class="p">,</span> <span class="n">random</span><span class="o">=</span><span class="n">random</span><span class="p">)</span>
                <span class="n">tcount</span> <span class="o">+=</span> <span class="n">n</span>
                <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">tcount</span> <span class="o">&gt;=</span> <span class="n">count</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ran </span><span class="si">%s</span><span class="s2"> examples; getting out&quot;</span> <span class="o">%</span> <span class="n">tcount</span><span class="p">)</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Still want </span><span class="si">%s</span><span class="s2"> more examples&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">count</span><span class="o">-</span><span class="n">tcount</span><span class="p">))</span>

        <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">enableButtons</span><span class="p">(</span><span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">actions</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Stop&#39;</span><span class="p">],</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tcount</span></div>



<div class="viewcode-block" id="AppMenu.reload"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.reload">[docs]</a>    <span class="k">def</span> <span class="nf">reload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reload the scripts from dir.</span>

<span class="sd">        This is only available if a directory path was specified and</span>
<span class="sd">        no files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pf</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Reloading this menu&quot;</span><span class="p">,</span> <span class="n">pf</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">APPS</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span></div>


<div class="viewcode-block" id="AppMenu.add"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.AppMenu.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">skipconfig</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a new filename to the front of the menu.</span>

<span class="sd">        This function is used to add app/scripts to the history menus.</span>
<span class="sd">        By default, only legal pyFormex apps or scripts can be added, and</span>
<span class="sd">        scripts from the user config will not be added.</span>
<span class="sd">        Setting strict and or skipconfig to False will skip the filter(s).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
                <span class="n">appname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullAppName</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="n">app</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">appname</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="n">strict</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">app</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> is not a pyFormex app!&quot;</span> <span class="o">%</span> <span class="n">appname</span><span class="p">)</span>
                    <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_pyFormex</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                    <span class="k">return</span>
                <span class="k">if</span> <span class="n">skipconfig</span><span class="p">:</span>
                    <span class="c1"># This is here to skip the startup script</span>
                    <span class="k">if</span> <span class="n">Path</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span> <span class="o">==</span> <span class="n">pf</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;userconfdir&#39;</span><span class="p">]:</span>
                        <span class="k">return</span>

        <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span>
        <span class="n">olist</span><span class="o">.</span><span class="n">toFront</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="n">files</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">max</span><span class="p">]</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_actions</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_actions</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">files</span><span class="p">):</span>
            <span class="n">a</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">))</span></div>


    <span class="k">def</span> <span class="nf">_classify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nmax</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Classify, symlink and reload the scripts&quot;&quot;&quot;</span>
        <span class="n">pf</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Classifying scripts&quot;</span><span class="p">,</span> <span class="n">pf</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">APPS</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">:</span>
            <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">/</span> <span class="n">catname</span>
            <span class="n">all_apps</span><span class="p">,</span> <span class="n">kat</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="n">classify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pkg</span><span class="p">,</span> <span class="n">nmax</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;# Do not edit this file! It was generated by </span><span class="si">%s</span><span class="s2">.</span>
<span class="s2">#</span>
<span class="s2">all_apps = </span><span class="si">%r</span><span class="s2"></span>
<span class="s2">#</span>
<span class="s2">kat = </span><span class="si">%r</span><span class="s2"></span>
<span class="s2">#</span>
<span class="s2">cat = </span><span class="si">%r</span><span class="s2"></span>
<span class="s2">#</span>
<span class="s2">col = </span><span class="si">%r</span><span class="s2"></span>
<span class="s2">#</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pf</span><span class="o">.</span><span class="n">fullVersion</span><span class="p">(),</span> <span class="n">all_apps</span><span class="p">,</span> <span class="n">kat</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">fn</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fil</span><span class="p">:</span>
                <span class="n">fil</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Created catalog </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">fn</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">_unclassify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove the catalog and reload the scripts unclassified&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span><span class="p">:</span>
            <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir</span> <span class="o">/</span> <span class="n">catname</span>
            <span class="k">if</span> <span class="n">fn</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">fn</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span></div>


<span class="c1">############### The pyFormex App menu ############################</span>

<span class="k">def</span> <span class="nf">unloadCurrentApp</span><span class="p">():</span>
    <span class="n">appname</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;curfile&#39;</span><span class="p">]</span>
    <span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">apps</span>
    <span class="n">apps</span><span class="o">.</span><span class="n">unload</span><span class="p">(</span><span class="n">appname</span><span class="p">)</span>


<div class="viewcode-block" id="createAppMenu"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.createAppMenu">[docs]</a><span class="k">def</span> <span class="nf">createAppMenu</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">before</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create the menu(s) with pyFormex apps</span>

<span class="sd">    This creates a menu with all examples distributed with pyFormex.</span>
<span class="sd">    By default, this menu is put in the top menu bar with menu label &#39;Examples&#39;.</span>

<span class="sd">    The user can add his own app directories through the configuration</span>
<span class="sd">    settings. In that case the &#39;Examples&#39; menu and menus for all the</span>
<span class="sd">    configured app paths will be gathered in a top level popup menu labeled</span>
<span class="sd">    &#39;Apps&#39;.</span>

<span class="sd">    The menu will be placed in the top menu bar before the specified item.</span>
<span class="sd">    If a menu item named &#39;Examples&#39; or &#39;Apps&#39; already exists, it is</span>
<span class="sd">    replaced.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Mode</span> <span class="o">=</span> <span class="n">mode</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
    <span class="n">appmenu</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="s1">&#39;&amp;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">Mode</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">before</span><span class="o">=</span><span class="n">before</span><span class="p">)</span>
    <span class="n">appmenu</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
        <span class="n">appdirs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">d</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">pf</span><span class="o">.</span><span class="n">appdirs</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">appdirs</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;scriptdirs&#39;</span><span class="p">]</span>


    <span class="n">history</span> <span class="o">=</span> <span class="n">AppMenu</span><span class="p">(</span><span class="s1">&#39;History&#39;</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="n">pf</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;gui/</span><span class="si">%s</span><span class="s1">history&#39;</span><span class="o">%</span><span class="n">mode</span><span class="p">],</span> <span class="nb">max</span><span class="o">=</span><span class="n">pf</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;gui/history_max&#39;</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">appmenu</span><span class="p">)</span>

    <span class="c1"># Fill in missing default locations : this enables the user</span>
    <span class="c1"># to keep the pyFormex installed examples in his config</span>
    <span class="n">appdirs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">apps</span><span class="o">.</span><span class="n">guessDir</span><span class="p">(</span><span class="o">*</span><span class="n">d</span><span class="p">))</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">appdirs</span><span class="p">]</span>
    <span class="n">appdirs</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">appdirs</span> <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="ow">and</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()]</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">appdirs</span><span class="p">:</span>
        <span class="n">pf</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Loading menu </span><span class="si">%s</span><span class="s2"> from </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">),</span> <span class="n">pf</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">MENU</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">AppMenu</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">autoplay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">appmenu</span><span class="p">)</span>

    <span class="nb">setattr</span><span class="p">(</span><span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">history&quot;</span><span class="p">,</span> <span class="n">history</span><span class="p">)</span>

    <span class="n">appmenu</span><span class="o">.</span><span class="n">insertItems</span><span class="p">([</span>
        <span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Show </span><span class="si">{</span><span class="n">Mode</span><span class="si">}</span><span class="s1"> Info&#39;</span><span class="p">,</span> <span class="n">draw</span><span class="o">.</span><span class="n">showDoc</span><span class="p">),</span>
        <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Configure </span><span class="si">{</span><span class="n">Mode</span><span class="si">}</span><span class="s1"> Paths&#39;</span><span class="p">,</span> <span class="n">Settings</span><span class="o">.</span><span class="n">setDirs</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s1">dirs&#39;</span><span class="p">}),</span>
        <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Reload </span><span class="si">{</span><span class="n">Mode</span><span class="si">}</span><span class="s1"> Menu&#39;</span><span class="p">,</span> <span class="n">reloadMenu</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">mode</span><span class="p">}),</span>
        <span class="p">])</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
        <span class="n">appmenu</span><span class="o">.</span><span class="n">insertItems</span><span class="p">([</span>
            <span class="p">(</span><span class="s1">&#39;List loaded Apps&#39;</span><span class="p">,</span> <span class="n">script</span><span class="o">.</span><span class="n">printLoadedApps</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;Unload Current App&#39;</span><span class="p">,</span> <span class="n">unloadCurrentApp</span><span class="p">),</span>
            <span class="p">])</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;script&#39;</span><span class="p">:</span>
        <span class="n">appmenu</span><span class="o">.</span><span class="n">insertItems</span><span class="p">([</span>
            <span class="p">(</span><span class="s1">&#39;Force Finish Script&#39;</span><span class="p">,</span> <span class="n">script</span><span class="o">.</span><span class="n">force_finish</span><span class="p">),</span>
        <span class="p">])</span>

    <span class="k">return</span> <span class="n">appmenu</span></div>


<div class="viewcode-block" id="reloadMenu"><a class="viewcode-back" href="../../ref/gui.appMenu.html#gui.appMenu.reloadMenu">[docs]</a><span class="k">def</span> <span class="nf">reloadMenu</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;app&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reload the named menu.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reloading </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">mode</span>  <span class="c1"># +&#39;s&#39;</span>
    <span class="n">item</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">before</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">nextItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ITEM BEFORE &quot;</span><span class="p">,</span><span class="n">before</span><span class="p">)</span>
        <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;app&#39;</span><span class="p">:</span>
            <span class="c1"># reset pf.appdirs, we may have configuration changes</span>
            <span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">apps</span>
            <span class="n">apps</span><span class="o">.</span><span class="n">setAppDirs</span><span class="p">()</span>
        <span class="n">createAppMenu</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="o">.</span><span class="n">menu</span><span class="p">,</span> <span class="n">before</span><span class="p">)</span></div>



<span class="c1"># End</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href="">gui.appMenu</a></li--> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2023, Benedict Verhegghe.
    </span>
      Last updated on Mar 27, 2023.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.4.3.
    </span>
    </div>
  </body>
</html>