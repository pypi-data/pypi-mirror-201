

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!--
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be)
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->
    <title>gui.dialogs &#8212; pyFormex 3.3 documentation</title>

    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pyformex.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<link rel="icon" type="image/png" href="../../_static/pyformex_fav.png" />

  </head><body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="../../_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="../../_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href="">gui.dialogs</a></li--> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<!-- PYFORMEX_SIDEBAR_LOGO -->
<!-- PYFORMEX_WEBSITE_SIDEBAR_TOP -->

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for gui.dialogs</h1><div class="highlight"><pre>
<span></span><span class="c1">#</span>
<span class="c1">##</span>
<span class="c1">##  SPDX-FileCopyrightText: Â© 2007-2023 Benedict Verhegghe &lt;bverheg@gmail.com&gt;</span>
<span class="c1">##  SPDX-License-Identifier: GPL-3.0-or-later</span>
<span class="c1">##</span>
<span class="c1">##  This file is part of pyFormex 3.3  (Sun Mar 26 20:16:15 CEST 2023)</span>
<span class="c1">##  pyFormex is a tool for generating, manipulating and transforming 3D</span>
<span class="c1">##  geometrical models by sequences of mathematical operations.</span>
<span class="c1">##  Home page: https://pyformex.org</span>
<span class="c1">##  Project page: https://savannah.nongnu.org/projects/pyformex/</span>
<span class="c1">##  Development: https://gitlab.com/bverheg/pyformex</span>
<span class="c1">##  Distributed under the GNU General Public License version 3 or later.</span>
<span class="c1">##</span>
<span class="c1">##  This program is free software: you can redistribute it and/or modify</span>
<span class="c1">##  it under the terms of the GNU General Public License as published by</span>
<span class="c1">##  the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">##  (at your option) any later version.</span>
<span class="c1">##</span>
<span class="c1">##  This program is distributed in the hope that it will be useful,</span>
<span class="c1">##  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">##  GNU General Public License for more details.</span>
<span class="c1">##</span>
<span class="c1">##  You should have received a copy of the GNU General Public License</span>
<span class="c1">##  along with this program.  If not, see http://www.gnu.org/licenses/.</span>
<span class="c1">##</span>
<span class="sd">&quot;&quot;&quot;Specialized dialogs for the pyFormex GUI.</span>

<span class="sd">This module provides some dialogs that collect specific input for some</span>
<span class="sd">pyFormex GUI function. Most of these dialogs are normally accessed from</span>
<span class="sd">the GUI menus. But the user can also use these in his scripts.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">pyformex</span> <span class="k">as</span> <span class="nn">pf</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">pyformex.path</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">pyformex.script</span> <span class="kn">import</span> <span class="n">chdir</span>
<span class="kn">from</span> <span class="nn">pyformex.gui.widgets</span> <span class="kn">import</span> <span class="n">Dialog</span><span class="p">,</span> <span class="n">_I</span><span class="p">,</span> <span class="n">_C</span><span class="p">,</span> <span class="n">_G</span><span class="p">,</span> <span class="n">_T</span><span class="p">,</span> <span class="n">InputBool</span>
<span class="kn">from</span> <span class="nn">pyformex.gui</span> <span class="kn">import</span> <span class="n">image</span>
<span class="kn">from</span> <span class="nn">pyformex.gui</span> <span class="kn">import</span> <span class="n">qtutils</span>


<span class="k">def</span> <span class="nf">addToSidebar</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;gui/sidebardirs&#39;</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pf</span><span class="o">.</span><span class="n">prefcfg</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>   <span class="c1"># keys() required here!</span>
        <span class="n">pf</span><span class="o">.</span><span class="n">prefcfg</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">refcfg</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">parent</span>
    <span class="n">pf</span><span class="o">.</span><span class="n">prefcfg</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>


<div class="viewcode-block" id="FileDialog"><a class="viewcode-back" href="../../ref/gui.dialogs.html#gui.dialogs.FileDialog">[docs]</a><span class="k">class</span> <span class="nc">FileDialog</span><span class="p">(</span><span class="n">Dialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A customizable file selection Dialog.</span>

<span class="sd">    This is a specialized Dialog for the input of one or more file or</span>
<span class="sd">    directory paths. It includes a customized QFileDialog and being</span>
<span class="sd">    subclassed from Dialog, it can be easily further customized to add</span>
<span class="sd">    more input fields.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path: :term:`path_like`</span>
<span class="sd">        The initial path displayed in the file selector widget.</span>
<span class="sd">    filter: list of str</span>
<span class="sd">        The filters for the files selectable in the file selector widget.</span>
<span class="sd">    mode: str</span>
<span class="sd">        Determines what can be selected. One of:</span>

<span class="sd">        - &#39;file&#39;: select a file (existing or not). This is the default.</span>
<span class="sd">        - &#39;exist&#39;: select an existing file</span>
<span class="sd">        - &#39;dir&#39;: select an existing directory (widget allows to create a new)</span>
<span class="sd">        - &#39;any&#39;: select a file (existing or not) or a directory</span>
<span class="sd">        - &#39;multi&#39;: select multiple existing paths from the same directory</span>
<span class="sd">    compr: bool</span>
<span class="sd">        If True, the specified filters will be expanded to also include</span>
<span class="sd">        compressed files of the specified patterns. Compression algorithms</span>
<span class="sd">        include &#39;gz&#39; and &#39;bz2&#39;. For example, a filter &#39;Python files (\\*.py)&#39;</span>
<span class="sd">        would be changed to &#39;Python files (\\*.py \\*.py.gz \\*.py.bz2)&#39;.</span>
<span class="sd">    auto_suffix: bool</span>
<span class="sd">        If True (default), new file names will automatically be changed</span>
<span class="sd">        to have an extension matching the current filter.</span>
<span class="sd">        If False, any name is accepted as a new file name.</span>
<span class="sd">    sidebar: list</span>
<span class="sd">        A list of :term:`path_like` strings to add to the sidebar of the</span>
<span class="sd">        file selection widget. This is typically used to provide shortcuts</span>
<span class="sd">        to often used directories.</span>
<span class="sd">    extra: list</span>
<span class="sd">        A list of input items to be added to the FileDialog. No input item</span>
<span class="sd">        should be named &#39;filename&#39;.</span>
<span class="sd">    kargs:</span>
<span class="sd">        Other keyword parameters to be passed to the :class:`Dialog` super</span>
<span class="sd">        class.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict</span>
<span class="sd">        The results dict of the Dialog. If the selection was accepted,</span>
<span class="sd">        this will at least include a key &#39;filename&#39; with the path of</span>
<span class="sd">        the selected file or files or directory. If extra items were</span>
<span class="sd">        specified, there will be keys corresponding to the item names.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    GeometryFileDialog: A FileDialog to select a pyFormex Geometry File (PGF)</span>
<span class="sd">    ProjectDialog: A FileDialog to select a pyFormex Project File (PYF)</span>
<span class="sd">    ImageSaveDialog: A FileDialog for saving the rendering to an image file</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="s1">&#39;Select a file, existing or new&#39;</span><span class="p">,</span>
        <span class="s1">&#39;exist&#39;</span><span class="p">:</span> <span class="s1">&#39;Select an existing file&#39;</span><span class="p">,</span>
        <span class="s1">&#39;dir&#39;</span><span class="p">:</span> <span class="s1">&#39;Select a directory&#39;</span><span class="p">,</span>
        <span class="s1">&#39;any&#39;</span><span class="p">:</span> <span class="s1">&#39;Select a file or a directory&#39;</span><span class="p">,</span>
        <span class="s1">&#39;multi&#39;</span><span class="p">:</span> <span class="s1">&#39;Select multiple existing paths from one directory&#39;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;file&#39;</span><span class="p">,</span>
                 <span class="n">compr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto_suffix</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">sidebar</span><span class="o">=</span><span class="p">[],</span> <span class="n">add_to_sidebar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">chdir</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">extra</span><span class="o">=</span><span class="p">[],</span> <span class="n">enablers</span><span class="o">=</span><span class="p">[],</span>
                 <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;pyFormex File Dialog&quot;</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the dialog.&quot;&quot;&quot;</span>
        <span class="n">pf</span><span class="o">.</span><span class="n">verbose</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;FILEDIALOG mode </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2"> kargs </span><span class="si">{</span><span class="n">kargs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">items</span><span class="o">=</span><span class="p">[</span>
            <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">itemtype</span><span class="o">=</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
               <span class="n">compr</span><span class="o">=</span><span class="n">compr</span><span class="p">,</span> <span class="n">auto_suffix</span><span class="o">=</span><span class="n">auto_suffix</span><span class="p">,</span> <span class="n">sidebar</span><span class="o">=</span><span class="n">sidebar</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
            <span class="p">]</span> <span class="o">+</span> <span class="n">extra</span>
        <span class="c1"># TODO: if we want to make the auto_suffix a dialog item,</span>
        <span class="c1"># we have to connect the changing of the auto_suffix value to an</span>
        <span class="c1"># auto_suffix setter on the filename item.</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">items</span><span class="o">=</span><span class="n">items</span><span class="p">,</span> <span class="n">enablers</span><span class="o">=</span><span class="n">enablers</span><span class="p">,</span> <span class="n">modal</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">caption</span><span class="o">=</span><span class="n">caption</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">pf</span><span class="o">.</span><span class="n">GUI</span><span class="p">,</span>
                         <span class="n">message</span><span class="o">=</span><span class="n">FileDialog</span><span class="o">.</span><span class="n">message</span><span class="p">[</span><span class="n">mode</span><span class="p">])</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">add_to_sidebar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span> <span class="o">=</span> <span class="n">InputBool</span><span class="p">(</span>
                <span class="s1">&#39;_sidebar&#39;</span><span class="p">,</span> <span class="n">add_to_sidebar</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Add to sidebar&#39;</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">chdir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chdir</span> <span class="o">=</span> <span class="n">InputBool</span><span class="p">(</span>
                <span class="s1">&#39;_chdir&#39;</span><span class="p">,</span> <span class="n">chdir</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Change workdir&#39;</span><span class="p">)</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chdir</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>


<div class="viewcode-block" id="FileDialog.selectFile"><a class="viewcode-back" href="../../ref/gui.dialogs.html#gui.dialogs.FileDialog.selectFile">[docs]</a>    <span class="k">def</span> <span class="nf">selectFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fn</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the current selection on the file widget&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">selectFile</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span></div>


<div class="viewcode-block" id="FileDialog.close"><a class="viewcode-back" href="../../ref/gui.dialogs.html#gui.dialogs.FileDialog.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Perform additional actions on close&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;sidebar&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
                <span class="n">addToSidebar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;chdir&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">chdir</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
                <span class="n">dirname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;multi&#39;</span><span class="p">:</span>
                    <span class="n">dirname</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">!=</span> <span class="s1">&#39;dir&#39;</span><span class="p">:</span>
                    <span class="n">dirname</span> <span class="o">=</span> <span class="n">dirname</span><span class="o">.</span><span class="n">parent</span>
                <span class="n">chdir</span><span class="p">(</span><span class="n">dirname</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="GeometryFileDialog"><a class="viewcode-back" href="../../ref/gui.dialogs.html#gui.dialogs.GeometryFileDialog">[docs]</a><span class="k">class</span> <span class="nc">GeometryFileDialog</span><span class="p">(</span><span class="n">FileDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A file selection dialog specialized for opening .pgf files.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;pgf&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                 <span class="n">fmode</span><span class="o">=</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                 <span class="n">intend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the dialog.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;KARGS1 </span><span class="si">{</span><span class="n">kargs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">kargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">,</span> <span class="s2">&quot;pyFormex Geometry File Dialog&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: should set mode based on access and exist</span>
        <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;file&#39;</span>
        <span class="n">exist</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;exist&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">intend</span> <span class="o">==</span> <span class="s1">&#39;r&#39;</span><span class="p">:</span>
            <span class="n">access</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">intend</span> <span class="o">==</span> <span class="s1">&#39;w&#39;</span><span class="p">:</span>
            <span class="n">access</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wr&#39;</span><span class="p">,</span> <span class="s1">&#39;rw&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">access</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wr&#39;</span><span class="p">,</span> <span class="s1">&#39;rw&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">]</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;access&#39;</span><span class="p">,</span> <span class="n">itemtype</span><span class="o">=</span><span class="s1">&#39;radio&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Access Mode&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">access</span><span class="p">,</span>
               <span class="n">spacer</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span>
               <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;wr=read if exist; rw=must exist; w=overwrite; r=readonly&quot;</span>
            <span class="p">)]</span>
        <span class="k">if</span> <span class="s1">&#39;w&#39;</span> <span class="ow">in</span> <span class="n">access</span><span class="p">:</span>
            <span class="n">extra</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="n">fmode</span><span class="p">,</span> <span class="n">itemtype</span><span class="o">=</span><span class="s1">&#39;radio&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Write mode&quot;</span><span class="p">,</span>
                   <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span> <span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;short lines ascii&#39;</span><span class="p">],</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;&#39;binary&#39; produces smaller files, &quot;</span>
                   <span class="s2">&quot;&#39;short lines ascii&#39; is easier to edit, &quot;</span>
                   <span class="s2">&quot;&#39;ascii&#39; types may be compressed to produce smaller files&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;compression&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="p">,</span> <span class="n">itemtype</span><span class="o">=</span><span class="s1">&#39;slider&#39;</span><span class="p">,</span>
                   <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Compression level (0-9)&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Higher compression levels result in smaller &quot;</span>
                   <span class="s2">&quot;files, but higher load and save times.&quot;</span>
                <span class="p">)</span>
            <span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;KARGS2 </span><span class="si">{</span><span class="n">kargs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;pgf&#39;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="ProjectDialog"><a class="viewcode-back" href="../../ref/gui.dialogs.html#gui.dialogs.ProjectDialog">[docs]</a><span class="k">class</span> <span class="nc">ProjectDialog</span><span class="p">(</span><span class="n">FileDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A file selection dialog specialized for opening projects.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;pyf&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                 <span class="n">compression</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the dialog.&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">project</span>
        <span class="kn">import</span> <span class="nn">pickle</span>

        <span class="n">kargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">,</span> <span class="s2">&quot;pyFormex Project File Dialog&quot;</span><span class="p">)</span>
        <span class="n">exist</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;exist&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">access</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">access</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;rw&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">exist</span> <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;wr&#39;</span><span class="p">,</span> <span class="s1">&#39;rw&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">]</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;access&#39;</span><span class="p">,</span> <span class="n">itemtype</span><span class="o">=</span><span class="s1">&#39;radio&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Access Mode&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">access</span><span class="p">,</span>
               <span class="n">spacer</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span>
               <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;wr=read if exist; rw=must exist; w=overwrite; r=readonly&quot;</span>
            <span class="p">),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">exist</span><span class="p">:</span>
            <span class="n">extra</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;convert&#39;</span><span class="p">,</span> <span class="n">convert</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Automatically convert file to latest format&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;It is recommended to automatically convert your &quot;</span>
                   <span class="s2">&quot;project files to the latest format, to avoid future &quot;</span>
                   <span class="s2">&quot;compatibility problems. The only reason to not convert &quot;</span>
                   <span class="s2">&quot;is if you still need to read your files with older &quot;</span>
                   <span class="s2">&quot;versions of pyFormex. The conversion will not be &quot;</span>
                   <span class="s2">&quot;performed if pyFormex can not correctly read your file.&quot;</span><span class="p">,</span>
                <span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exist</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">protocol</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">protocol</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">default_protocol</span>
            <span class="n">extra</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;protocol&#39;</span><span class="p">,</span> <span class="n">protocol</span><span class="p">,</span> <span class="n">itemtype</span><span class="o">=</span><span class="s1">&#39;int&#39;</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Protocol&quot;</span><span class="p">,</span>
                   <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                   <span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;Use at most protocol 2 if you need to read &quot;</span>
                   <span class="s2">&quot;back the project from Python2 version&quot;</span>
                <span class="p">),</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;compression&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="p">,</span> <span class="n">itemtype</span><span class="o">=</span><span class="s1">&#39;slider&#39;</span><span class="p">,</span>
                   <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Compression level (0-9)&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Higher compression levels result in smaller &quot;</span>
                   <span class="s2">&quot;files, but higher load and save times.&quot;</span>
                <span class="p">)</span>
            <span class="p">])</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;pyf&#39;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="SaveImageDialog"><a class="viewcode-back" href="../../ref/gui.dialogs.html#gui.dialogs.SaveImageDialog">[docs]</a><span class="k">class</span> <span class="nc">SaveImageDialog</span><span class="p">(</span><span class="n">FileDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dialog for saving an image to a file.</span>

<span class="sd">    This is a specialized Dialog for the input of all data required to</span>
<span class="sd">    save the current pyFormex rendering to an image file. It is a</span>
<span class="sd">    convenient interactive frontend for the :func:`image.saveImage`</span>
<span class="sd">    function. The Dialog ask for the target file name and all the</span>
<span class="sd">    other parameters accepted by that function.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path: :term:`path_like`</span>
<span class="sd">        The initial path displayed in the file selector widget.</span>
<span class="sd">        See FileDialog.</span>
<span class="sd">    filer: list of str</span>
<span class="sd">        The filters for the files selectable in the file selecter widget.</span>
<span class="sd">        See FileDialog.</span>
<span class="sd">    multi: bool</span>
<span class="sd">        If True, the dialog will show the multisave option initially</span>
<span class="sd">        checked.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">default_size</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;img&#39;</span><span class="p">,</span> <span class="s1">&#39;icon&#39;</span><span class="p">,</span> <span class="s1">&#39;all&#39;</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">multi</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the dialog.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">SaveImageDialog</span><span class="o">.</span><span class="n">default_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Late initialization because pf.canvas needed</span>
            <span class="n">SaveImageDialog</span><span class="o">.</span><span class="n">default_size</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">getSize</span><span class="p">()</span>

        <span class="n">kargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pyFormex Save Image Dialog&quot;</span>
        <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;exist&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">extra</span><span class="o">=</span><span class="p">[</span>
            <span class="n">_C</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,[</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;extent&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">image_extents</span><span class="p">(),</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Extent:&quot;</span><span class="p">,</span>
                   <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">change_extent</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;The part(s) of the pyFormex window to be saved&quot;</span><span class="p">),</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;tool&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">image_tools</span><span class="p">(),</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Tool:&quot;</span><span class="p">,</span>
                   <span class="c1"># func=self.change_tool,  # can not do both !!</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;The tool to be used for saving the image.&quot;</span>
                   <span class="s2">&quot; The possible extents and formats depend on it.&quot;</span><span class="p">),</span>
               <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;set_size&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;Width&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Both&#39;</span><span class="p">],</span>
                   <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Set Size:&#39;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Adjust one or both image dimensions. Beware, &quot;</span>
                   <span class="s2">&quot; this may give incorrect results if transparency is used.&quot;</span><span class="p">),</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="n">itemtype</span><span class="o">=</span><span class="s1">&#39;ivector&#39;</span><span class="p">,</span>
                   <span class="n">value</span><span class="o">=</span><span class="n">SaveImageDialog</span><span class="o">.</span><span class="n">default_size</span><span class="p">,</span>
                   <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">],</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Size:&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;The size of the save image.&quot;</span><span class="p">),</span>
            <span class="p">],</span> <span class="n">newline</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="n">_C</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,[</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;From Extension&#39;</span><span class="p">],</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Format:&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;The image format to be used. Normally derived from&quot;</span>
                   <span class="s2">&quot;extension&quot;</span><span class="p">),</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;quality&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Quality:&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;For compressed image formats (like JPG), specifies&quot;</span>
                   <span class="s2">&quot; the compression level (PNG:0..9; JPEG: 1..100&quot;</span><span class="p">),</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Keep Alpha&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Keep the alpha channel in the result (Experimental!)&quot;</span><span class="p">),</span>
            <span class="p">],</span> <span class="n">spacer</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">),</span>
            <span class="n">_C</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,[</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;multi&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Multisave mode&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;In multisave mode you can save sequences of images,&quot;</span>
                   <span class="s2">&quot; by pressing a hotkey and/or automatically on drawing&quot;</span><span class="p">),</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;hotkey&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Activate hotkey&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;A new image will be saved every time you hit the hotkey&quot;</span>
                   <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">pf</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;keys/save&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">) while the focus is on the canvas&quot;</span><span class="p">),</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;autosave&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Activate ausave mode&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;In autosave mode, a new image will be saved&quot;</span>
                   <span class="s2">&quot; at each draw operation&quot;</span><span class="p">),</span>
            <span class="p">],</span> <span class="n">spacer</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="n">enablers</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;multi&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;hotkey&#39;</span><span class="p">,</span> <span class="s1">&#39;autosave&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;set_size&#39;</span><span class="p">,</span> <span class="s1">&#39;Width&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;set_size&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;set_size&#39;</span><span class="p">,</span> <span class="s1">&#39;Both&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">,</span> <span class="n">enablers</span><span class="o">=</span><span class="n">enablers</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="s1">&#39;extent&#39;</span><span class="p">])</span>

    <span class="c1"># !! only one of change_tool or change_extent can be activated</span>
    <span class="k">def</span> <span class="nf">change_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="n">tool</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;extent&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setChoices</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">extent_options</span><span class="p">(</span><span class="n">tool</span><span class="p">))</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;From Extension&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">image</span><span class="o">.</span><span class="n">imageFormats</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setChoices</span><span class="p">(</span><span class="n">formats</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">change_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="n">extent</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="n">tools</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">tool_options</span><span class="p">(</span><span class="n">extent</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;tool&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setChoices</span><span class="p">(</span><span class="n">tools</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;tool&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">tools</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;From Extension&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">image</span><span class="o">.</span><span class="n">imageFormats</span><span class="p">(</span><span class="n">tools</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setChoices</span><span class="p">(</span><span class="n">formats</span><span class="p">)</span>


<div class="viewcode-block" id="SaveImageDialog.validate"><a class="viewcode-back" href="../../ref/gui.dialogs.html#gui.dialogs.SaveImageDialog.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">validate</span><span class="p">():</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span>
            <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">SaveImageDialog</span><span class="o">.</span><span class="n">default_size</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span>
            <span class="n">resize</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;set_size&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">resize</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>
                <span class="n">h</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="n">resize</span> <span class="o">==</span> <span class="s1">&#39;H&#39;</span><span class="p">:</span>
                <span class="n">w</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="n">resize</span> <span class="o">==</span> <span class="s1">&#39;N&#39;</span><span class="p">:</span>
                <span class="n">w</span> <span class="o">=</span> <span class="n">h</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>    <span class="c1"># This would use unscaled offline rendering</span>
            <span class="n">res</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">resize</span> <span class="o">==</span> <span class="s1">&#39;N&#39;</span><span class="p">:</span>
                <span class="n">res</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Instead grab from screen buffer</span>
            <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;From Extension&#39;</span><span class="p">:</span>
                <span class="n">res</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid</span></div></div>


<div class="viewcode-block" id="RecordSessionDialog"><a class="viewcode-back" href="../../ref/gui.dialogs.html#gui.dialogs.RecordSessionDialog">[docs]</a><span class="k">class</span> <span class="nc">RecordSessionDialog</span><span class="p">(</span><span class="n">FileDialog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dialog for recording the GUI to a video file.</span>

<span class="sd">    This is a specialized Dialog for the input of all data required to</span>
<span class="sd">    save the current pyFormex rendering to an image file. It is a</span>
<span class="sd">    convenient interactive frontend for the :func:`image.saveImage`</span>
<span class="sd">    function. The Dialog ask for the target file name and all the</span>
<span class="sd">    other parameters accepted by that function.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path: :term:`path_like`</span>
<span class="sd">        The initial path displayed in the file selector widget.</span>
<span class="sd">        See FileDialog.</span>
<span class="sd">    filer: list of str</span>
<span class="sd">        The filters for the files selectable in the file selecter widget.</span>
<span class="sd">        See FileDialog.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;video&#39;</span><span class="p">,</span> <span class="s1">&#39;all&#39;</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Create the dialog.&quot;&quot;&quot;</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">_C</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,[</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;extent&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">record_extents</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Extent:&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;The part(s) of the pyFormex window to be saved&quot;</span><span class="p">),</span>
            <span class="p">]),</span>
            <span class="n">_C</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,[</span>
                <span class="n">_I</span><span class="p">(</span><span class="s1">&#39;framerate&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span>
                   <span class="n">text</span><span class="o">=</span><span class="s2">&quot;framerate:&quot;</span><span class="p">,</span>
                   <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;The number of frames saved per second.&quot;</span><span class="p">),</span>
            <span class="p">],</span> <span class="n">spacer</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="n">extra</span><span class="p">,</span>
                       <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;pyFormex Record Session Dialog&quot;</span><span class="p">)</span></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href="">gui.dialogs</a></li--> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2023, Benedict Verhegghe.
    </span>
      Last updated on Mar 27, 2023.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.4.3.
    </span>
    </div>
  </body>
</html>