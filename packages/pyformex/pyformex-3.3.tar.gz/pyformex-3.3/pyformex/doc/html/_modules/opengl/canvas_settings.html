

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!--
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be)
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->
    <title>opengl.canvas_settings &#8212; pyFormex 3.3 documentation</title>

    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pyformex.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<link rel="icon" type="image/png" href="../../_static/pyformex_fav.png" />

  </head><body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="../../_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="../../_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href="">opengl.canvas_settings</a></li--> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<!-- PYFORMEX_SIDEBAR_LOGO -->
<!-- PYFORMEX_WEBSITE_SIDEBAR_TOP -->

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for opengl.canvas_settings</h1><div class="highlight"><pre>
<span></span><span class="c1">#</span>
<span class="c1">##</span>
<span class="c1">##  SPDX-FileCopyrightText: Â© 2007-2023 Benedict Verhegghe &lt;bverheg@gmail.com&gt;</span>
<span class="c1">##  SPDX-License-Identifier: GPL-3.0-or-later</span>
<span class="c1">##</span>
<span class="c1">##  This file is part of pyFormex 3.3  (Sun Mar 26 20:16:15 CEST 2023)</span>
<span class="c1">##  pyFormex is a tool for generating, manipulating and transforming 3D</span>
<span class="c1">##  geometrical models by sequences of mathematical operations.</span>
<span class="c1">##  Home page: https://pyformex.org</span>
<span class="c1">##  Project page: https://savannah.nongnu.org/projects/pyformex/</span>
<span class="c1">##  Development: https://gitlab.com/bverheg/pyformex</span>
<span class="c1">##  Distributed under the GNU General Public License version 3 or later.</span>
<span class="c1">##</span>
<span class="c1">##  This program is free software: you can redistribute it and/or modify</span>
<span class="c1">##  it under the terms of the GNU General Public License as published by</span>
<span class="c1">##  the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">##  (at your option) any later version.</span>
<span class="c1">##</span>
<span class="c1">##  This program is distributed in the hope that it will be useful,</span>
<span class="c1">##  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">##  GNU General Public License for more details.</span>
<span class="c1">##</span>
<span class="c1">##  You should have received a copy of the GNU General Public License</span>
<span class="c1">##  along with this program.  If not, see http://www.gnu.org/licenses/.</span>
<span class="c1">##</span>
<span class="sd">&quot;&quot;&quot;This modules defines the CanvasSettings class</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">pyformex</span> <span class="k">as</span> <span class="nn">pf</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">arraytools</span> <span class="k">as</span> <span class="n">at</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">colors</span>
<span class="kn">from</span> <span class="nn">pyformex.mydict</span> <span class="kn">import</span> <span class="n">Dict</span>
<span class="kn">from</span> <span class="nn">.sanitize</span> <span class="kn">import</span> <span class="n">saneColor</span>


<span class="c1">############### OpenGL Lighting #################################</span>

<span class="k">class</span> <span class="nc">Material</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ambient</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">diffuse</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">specular</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
                 <span class="n">emission</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">shininess</span><span class="o">=</span><span class="mf">2.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ambient</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ambient</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diffuse</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">diffuse</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">specular</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">specular</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emission</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">emission</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shininess</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">shininess</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="c1">#print &quot;setValues&quot;,kargs</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kargs</span><span class="p">:</span>
            <span class="c1">#print k,kargs[k]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
                <span class="c1">#print getattr(self,k)</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">kargs</span><span class="p">[</span><span class="n">k</span><span class="p">]))</span>
                <span class="c1">#print getattr(self,k)</span>


    <span class="k">def</span> <span class="nf">dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the material light parameters as a dict&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">k</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ambient&#39;</span><span class="p">,</span> <span class="s1">&#39;diffuse&#39;</span><span class="p">,</span> <span class="s1">&#39;specular&#39;</span><span class="p">,</span> <span class="s1">&#39;emission&#39;</span><span class="p">,</span> <span class="s1">&#39;shininess&#39;</span><span class="p">]])</span>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;&quot;MATERIAL: </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    ambient:  </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    diffuse:  </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    specular: </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    emission: </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    shininess: </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ambient</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">diffuse</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">specular</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">emission</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">shininess</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">getMaterials</span><span class="p">():</span>
    <span class="n">mats</span> <span class="o">=</span> <span class="n">pf</span><span class="o">.</span><span class="n">refcfg</span><span class="p">[</span><span class="s1">&#39;material&#39;</span><span class="p">]</span>
    <span class="n">mats</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pf</span><span class="o">.</span><span class="n">prefcfg</span><span class="p">[</span><span class="s1">&#39;material&#39;</span><span class="p">])</span>
    <span class="n">mats</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pf</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;material&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">mats</span>


<span class="k">def</span> <span class="nf">createMaterials</span><span class="p">():</span>
    <span class="n">mats</span> <span class="o">=</span> <span class="n">getMaterials</span><span class="p">()</span>
    <span class="n">matdb</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">mats</span><span class="p">:</span>
        <span class="n">matdb</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">**</span><span class="n">mats</span><span class="p">[</span><span class="n">m</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">matdb</span>


<div class="viewcode-block" id="Light"><a class="viewcode-back" href="../../ref/opengl.canvas_settings.html#opengl.canvas_settings.Light">[docs]</a><span class="k">class</span> <span class="nc">Light</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;A class representing an OpenGL light.</span>

<span class="sd">    The light can emit 3 types of light: ambient, diffuse and specular,</span>
<span class="sd">    which can have different color and are all off by default.</span>


<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ambient</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">diffuse</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">specular</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">ambient</span><span class="p">,</span> <span class="n">diffuse</span><span class="p">,</span> <span class="n">specular</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="n">enabled</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ambient</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">diffuse</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">specular</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ambient</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ambient</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">GLcolor</span><span class="p">(</span><span class="n">ambient</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">diffuse</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">diffuse</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">GLcolor</span><span class="p">(</span><span class="n">diffuse</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">specular</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">specular</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">GLcolor</span><span class="p">(</span><span class="n">specular</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">at</span><span class="o">.</span><span class="n">checkArray</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,),</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">enable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">onoff</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">onoff</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">disable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;&quot;LIGHT</span><span class="si">%s</span><span class="s2"> (enabled: </span><span class="si">%s</span><span class="s2">):</span>
<span class="s2">    ambient color:  </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    diffuse color:  </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    specular color: </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    position: </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ambient</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">diffuse</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">specular</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span></div>


<div class="viewcode-block" id="LightProfile"><a class="viewcode-back" href="../../ref/opengl.canvas_settings.html#opengl.canvas_settings.LightProfile">[docs]</a><span class="k">class</span> <span class="nc">LightProfile</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;A lightprofile contains all the lighting parameters.</span>

<span class="sd">    Currently this consists off:</span>
<span class="sd">    - `ambient`: the global ambient lighting (currently a float)</span>
<span class="sd">    - `lights`: a list of 1 to 4 Lights</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ambient</span><span class="p">,</span> <span class="n">lights</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ambient</span> <span class="o">=</span> <span class="n">ambient</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lights</span> <span class="o">=</span> <span class="n">lights</span>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;LIGHTPROFILE:</span>
<span class="s2">    global ambient:  </span><span class="si">%s</span><span class="s2"></span>
<span class="s2">    &quot;&quot;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ambient</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lights</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="n">l</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span></div>


<span class="c1">##################################################################</span>
<span class="c1">#</span>
<span class="c1">#  The Canvas Settings</span>
<span class="c1">#</span>

<div class="viewcode-block" id="CanvasSettings"><a class="viewcode-back" href="../../ref/opengl.canvas_settings.html#opengl.canvas_settings.CanvasSettings">[docs]</a><span class="k">class</span> <span class="nc">CanvasSettings</span><span class="p">(</span><span class="n">Dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A collection of settings for an OpenGL Canvas.</span>

<span class="sd">    The canvas settings are a collection of settings and default values</span>
<span class="sd">    affecting the rendering in an individual viewport. There are two type of</span>
<span class="sd">    settings:</span>

<span class="sd">    - mode settings are set during the initialization of the canvas and</span>
<span class="sd">      can/should not be changed during the drawing of actors and decorations;</span>
<span class="sd">    - default settings can be used as default values but may be changed during</span>
<span class="sd">      the drawing of actors/decorations: they are reset before each individual</span>
<span class="sd">      draw instruction.</span>

<span class="sd">    Currently the following mode settings are defined:</span>

<span class="sd">    - bgmode: the viewport background color mode</span>
<span class="sd">    - bgcolor: the viewport background color: a single color or a list of</span>
<span class="sd">      colors (max. 4 are used).</span>
<span class="sd">    - bgimage: background image filename</span>
<span class="sd">    - alphablend: boolean (transparency on/off)</span>

<span class="sd">    The list of default settings includes:</span>

<span class="sd">    - fgcolor: the default drawing color</span>
<span class="sd">    - bkcolor: the default backface color</span>
<span class="sd">    - slcolor: the highlight color</span>
<span class="sd">    - colormap: the default color map to be used if color is an index</span>
<span class="sd">    - bklormap: the default color map to be used if bkcolor is an index</span>
<span class="sd">    - textcolor: the default color for text drawing</span>
<span class="sd">    - smooth: boolean (smooth/flat shading)</span>
<span class="sd">    - lighting: boolean (lights on/off)</span>
<span class="sd">    - culling: boolean</span>
<span class="sd">    - transparency: float (0.0..1.0)</span>
<span class="sd">    - avgnormals: boolean</span>
<span class="sd">    - wiremode: integer -3..3</span>
<span class="sd">    - pointsize: the default size for drawing points</span>
<span class="sd">    - marksize: the default size for drawing markers</span>
<span class="sd">    - linewidth: the default width for drawing lines</span>

<span class="sd">    Any of these values can be set in the constructor using a keyword argument.</span>
<span class="sd">    All items that are not set, will get their value from the configuration</span>
<span class="sd">    file(s).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># A collection of default rendering profiles.</span>
    <span class="c1"># These contain the values different from the overall defaults</span>
    <span class="n">RenderProfiles</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;wireframe&#39;</span><span class="p">:</span> <span class="n">Dict</span><span class="p">({</span>
            <span class="s1">&#39;smooth&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;fill&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;lighting&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;alphablend&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;transparency&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
            <span class="s1">&#39;wiremode&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;avgnormals&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}),</span>
        <span class="s1">&#39;smooth&#39;</span><span class="p">:</span> <span class="n">Dict</span><span class="p">({</span>
            <span class="s1">&#39;smooth&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;fill&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;lighting&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;alphablend&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;transparency&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s1">&#39;wiremode&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;avgnormals&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}),</span>
        <span class="s1">&#39;smooth_avg&#39;</span><span class="p">:</span> <span class="n">Dict</span><span class="p">({</span>
            <span class="s1">&#39;smooth&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;fill&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;lighting&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;alphablend&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;transparency&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s1">&#39;wiremode&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;avgnormals&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="p">}),</span>
        <span class="s1">&#39;smoothwire&#39;</span><span class="p">:</span> <span class="n">Dict</span><span class="p">({</span>
            <span class="s1">&#39;smooth&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;fill&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;lighting&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;alphablend&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;transparency&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s1">&#39;wiremode&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;avgnormals&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}),</span>
        <span class="s1">&#39;flat&#39;</span><span class="p">:</span> <span class="n">Dict</span><span class="p">({</span>
            <span class="s1">&#39;smooth&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;fill&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;lighting&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;alphablend&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;transparency&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s1">&#39;wiremode&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;avgnormals&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}),</span>
        <span class="s1">&#39;flatwire&#39;</span><span class="p">:</span> <span class="n">Dict</span><span class="p">({</span>
            <span class="s1">&#39;smooth&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;fill&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;lighting&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;alphablend&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s1">&#39;transparency&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
            <span class="s1">&#39;wiremode&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;avgnormals&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}),</span>
        <span class="p">}</span>
    <span class="n">bgcolor_modes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;solid&#39;</span><span class="p">,</span> <span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="s1">&#39;full&#39;</span><span class="p">]</span>
    <span class="n">edge_modes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="s1">&#39;feature&#39;</span><span class="p">,</span> <span class="s1">&#39;all&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new set of CanvasSettings.&quot;&quot;&quot;</span>
        <span class="n">Dict</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">kargs</span><span class="p">)</span>

<div class="viewcode-block" id="CanvasSettings.reset"><a class="viewcode-back" href="../../ref/opengl.canvas_settings.html#opengl.canvas_settings.CanvasSettings.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="p">{}):</span>
        <span class="sd">&quot;&quot;&quot;Reset the CanvasSettings to its defaults.</span>

<span class="sd">        The default values are taken from the configuration files.</span>
<span class="sd">        An optional dictionary may be specified to override (some of) these defaults.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pf</span><span class="o">.</span><span class="n">refcfg</span><span class="p">[</span><span class="s1">&#39;canvas&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RenderProfiles</span><span class="p">[</span><span class="n">pf</span><span class="o">.</span><span class="n">prefcfg</span><span class="p">[</span><span class="s1">&#39;draw/rendermode&#39;</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pf</span><span class="o">.</span><span class="n">prefcfg</span><span class="p">[</span><span class="s1">&#39;canvas&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pf</span><span class="o">.</span><span class="n">cfg</span><span class="p">[</span><span class="s1">&#39;canvas&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">d</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></div>

<div class="viewcode-block" id="CanvasSettings.update"><a class="viewcode-back" href="../../ref/opengl.canvas_settings.html#opengl.canvas_settings.CanvasSettings.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update current values with the specified settings</span>

<span class="sd">        Returns the sanitized update values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ok</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkDict</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">strict</span><span class="p">)</span>
        <span class="n">Dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ok</span><span class="p">)</span></div>

<div class="viewcode-block" id="CanvasSettings.checkDict"><a class="viewcode-back" href="../../ref/opengl.canvas_settings.html#opengl.canvas_settings.CanvasSettings.checkDict">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">checkDict</span><span class="p">(</span><span class="n">clas</span><span class="p">,</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Transform a dict to acceptable settings.&quot;&quot;&quot;</span>
        <span class="n">ok</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;bgcolor&#39;</span><span class="p">,</span> <span class="s1">&#39;fgcolor&#39;</span><span class="p">,</span> <span class="s1">&#39;bkcolor&#39;</span><span class="p">,</span> <span class="s1">&#39;slcolor&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;colormap&#39;</span><span class="p">,</span> <span class="s1">&#39;bkcolormap&#39;</span><span class="p">,</span> <span class="s1">&#39;textcolor&#39;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">saneColor</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;bgimage&#39;</span><span class="p">]:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;smooth&#39;</span><span class="p">,</span> <span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="s1">&#39;lighting&#39;</span><span class="p">,</span> <span class="s1">&#39;culling&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;alphablend&#39;</span><span class="p">,</span> <span class="s1">&#39;avgnormals&#39;</span><span class="p">,</span> <span class="p">]:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">,</span> <span class="s1">&#39;pointsize&#39;</span><span class="p">,</span> <span class="s1">&#39;marksize&#39;</span><span class="p">]:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;wiremode&#39;</span><span class="p">]:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;linestipple&#39;</span><span class="p">:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">vi</span><span class="p">)</span> <span class="k">for</span> <span class="n">vi</span> <span class="ow">in</span> <span class="n">v</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;transparency&#39;</span><span class="p">:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;bgmode&#39;</span><span class="p">:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">clas</span><span class="o">.</span><span class="n">bgcolor_modes</span><span class="p">:</span>
                        <span class="k">raise</span>
                <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;marktype&#39;</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;rendermode&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;wireframe&#39;</span><span class="p">,</span> <span class="s1">&#39;smooth&#39;</span><span class="p">,</span> <span class="s1">&#39;smoothwire&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;flat&#39;</span><span class="p">,</span> <span class="s1">&#39;flatwire&#39;</span><span class="p">]:</span>
                        <span class="k">pass</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>
                <span class="n">ok</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Invalid key/value for CanvasSettings: </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ok</span></div>


<div class="viewcode-block" id="CanvasSettings.activate"><a class="viewcode-back" href="../../ref/opengl.canvas_settings.html#opengl.canvas_settings.CanvasSettings.activate">[docs]</a>    <span class="k">def</span> <span class="nf">activate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Activate the default canvas settings in the GL machine.&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">gl</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;smooth&#39;</span><span class="p">,</span> <span class="s1">&#39;fill&#39;</span><span class="p">,</span> <span class="s1">&#39;linewidth&#39;</span><span class="p">,</span> <span class="s1">&#39;pointsize&#39;</span><span class="p">]:</span>
                <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">gl</span><span class="p">,</span> <span class="s1">&#39;gl_&#39;</span><span class="o">+</span><span class="n">k</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error in setting </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2"> with func </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">raise</span></div>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># atoms = []</span>
        <span class="c1"># for k in self:</span>
        <span class="c1">#     print(k)</span>
        <span class="c1">#     try:</span>
        <span class="c1">#         s = f&quot;{k} = {self[k]!r}&quot;</span>
        <span class="c1">#     except:</span>
        <span class="c1">#         s = f&quot;{k} = FAIL&quot;</span>
        <span class="c1">#     print(s)</span>
        <span class="c1">#     atoms.append(s)</span>
        <span class="c1"># return &#39;\n&#39;.join(atoms)</span>

        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">formatDict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


    <span class="c1">## def setMode(self):</span>
    <span class="c1">##     &quot;&quot;&quot;Activate the mode canvas settings in the GL machine.&quot;&quot;&quot;</span>
    <span class="c1">##     GL.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT)</span>
    <span class="c1">##     if self.bgcolor.ndim &gt; 1:</span>
    <span class="c1">##         color = self.bgcolor[0]</span>
    <span class="c1">##     else:</span>
    <span class="c1">##         color = self.bgcolor</span>
    <span class="c1">##     GL.glClearColor(*colors.RGBA(color))</span>



<div class="viewcode-block" id="CanvasSettings.extractCanvasSettings"><a class="viewcode-back" href="../../ref/opengl.canvas_settings.html#opengl.canvas_settings.CanvasSettings.extractCanvasSettings">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">extractCanvasSettings</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Split a dict in canvas settings and other items.</span>

<span class="sd">        Returns a tuple of two dicts: the first one contains the items</span>
<span class="sd">        that are canvas settings, the second one the rest.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">pf</span><span class="o">.</span><span class="n">refcfg</span><span class="p">[</span><span class="s1">&#39;canvas&#39;</span><span class="p">]),</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">pf</span><span class="o">.</span><span class="n">refcfg</span><span class="p">[</span><span class="s1">&#39;canvas&#39;</span><span class="p">]))</span></div></div>


<span class="c1">### End</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href="">opengl.canvas_settings</a></li--> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2023, Benedict Verhegghe.
    </span>
      Last updated on Mar 27, 2023.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.4.3.
    </span>
    </div>
  </body>
</html>