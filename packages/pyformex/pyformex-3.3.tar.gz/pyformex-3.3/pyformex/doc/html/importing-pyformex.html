

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!--
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be)
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->
    <title>Importing pyFormex &#8212; pyFormex 3.3 documentation</title>

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/pyformex.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Graphical User Interface" href="gui.html" />
    <link rel="prev" title="Running pyFormex" href="running.html" />
<link rel="icon" type="image/png" href="_static/pyformex_fav.png" />

  </head><body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gui.html" title="The Graphical User Interface"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="running.html" title="Running pyFormex"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="user-guide.html" accesskey="U">pyFormex user guide</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href="">Importing pyFormex</a></li--> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<!-- PYFORMEX_SIDEBAR_LOGO -->
<!-- PYFORMEX_WEBSITE_SIDEBAR_TOP -->

  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Importing pyFormex</a><ul>
<li><a class="reference internal" href="#background">Background</a></li>
<li><a class="reference internal" href="#how-to-proceed">How to proceed</a></li>
<li><a class="reference internal" href="#running-non-gui-scripts">Running non-GUI scripts</a><ul>
<li><a class="reference internal" href="#example1">Example1</a></li>
<li><a class="reference internal" href="#example2">Example2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#caveats">Caveats</a></li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="running.html"
                        title="previous chapter">Running pyFormex</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="gui.html"
                        title="next chapter">The Graphical User Interface</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="importing-pyformex">
<span id="cha-importing"></span><h1>Importing pyFormex<a class="headerlink" href="#importing-pyformex" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This document contains very preliminary information of a new
feature under development. Use at your own risk!</p>
</div>
<div class="topic">
<p class="topic-title">Abstract</p>
<p>This document gives some guidelines about how to import pyFormex
into a Python application (instead of running the Python application
from pyFormex).</p>
</div>
<div class="section" id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>Traditionally, pyFormex is launched with the ‘pyformex’ command, and
pyFormex (or Python) scripts are executed from the pyFormex environment
(whether GUI or non-GUI).</p>
<p>Sometimes however it may be more suitable to import pyFormex into another
Python script or environment. Therefore some modifications are underway
to allow this.</p>
</div>
<div class="section" id="how-to-proceed">
<h2>How to proceed<a class="headerlink" href="#how-to-proceed" title="Permalink to this headline">¶</a></h2>
<p>In commit bd27925 of the git repositories the basic necessary changes were
made to allow a basic pyFormex to be imported into normal Python workflow.
These changes are currently only available when using pyFormex from the
git sources. You may have to do a pull first.</p>
</div>
<div class="section" id="running-non-gui-scripts">
<h2>Running non-GUI scripts<a class="headerlink" href="#running-non-gui-scripts" title="Permalink to this headline">¶</a></h2>
<p>If you do not need the pyFormex GUI, the following is required to import
pyFormex and make its scripting language usable just like in a pyFormex
script/application:</p>
<ul class="simple">
<li><p>make sure Python finds the path from which to import pyFormex,</p></li>
<li><p>import pyFormex (this is done implicitely when importing one of
the modules or subpackages from pyFormex),</p></li>
<li><p>import the pyFormex scripting language, if you want to use it. You
probably want to, since you have imported pyFormex, but you would
not need it if you just want to use some pyFormex classes or modules.</p></li>
</ul>
<p>While there are many ways to do this, we present hereafter a few typical
examples of how it can be done. Suppose we have a (partial) directory
layout as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span>
<span class="o">|--</span> <span class="n">home</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">user</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">pyformex</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">pyformex</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">main</span><span class="o">.</span><span class="n">py</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">gui</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">opengl</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">plugins</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">apps</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">example1</span><span class="o">.</span><span class="n">py</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">example2</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Thus, the path of the pyFormex package (i.e. the ‘pyformex’ directory containing
the pyFormex ‘main.py’ source file and having at least subdirectories
‘gui’, ‘opengl’, ‘plugins’) is ‘/home/user/pyformex/pyformex’.
We have to add its parent path (‘/home/user/pyformex’)
to the front of the Python paths to search for packages and modules.
Furthermore, suppose we have our Python scripts in a directory ‘/home/user/apps/example1.py’.</p>
<div class="section" id="example1">
<h3>Example1<a class="headerlink" href="#example1" title="Permalink to this headline">¶</a></h3>
<p>The contents of ‘example1.py’ looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set path to import pyFormex</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;/home/user/pyformex&#39;</span><span class="p">)</span>

<span class="c1"># Import the pyFormex with its full scripting language</span>
<span class="kn">from</span> <span class="nn">pyformex.script</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Show that we can do some pyFormex operations</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">growAxis</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>It can be run with the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">example1</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>and produces the result:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]]</span>
<span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="section" id="example2">
<h3>Example2<a class="headerlink" href="#example2" title="Permalink to this headline">¶</a></h3>
<p>Instead of hardcoding the pyFormex package path inside the script, you can
set it in the PYTHONPATH environment variable. Also, in this example we do
not import everything from the pyFormex scripting language, only the few
things we need:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import some required modules</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">pyformex</span> <span class="kn">import</span> <span class="n">arraytools</span>

<span class="c1"># Show that we can do some pyFormex operations</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">arraytools</span><span class="o">.</span><span class="n">growAxis</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>This script can now be run with a command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PYTHONPATH</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">pyformex</span> <span class="n">python</span> <span class="n">example2</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>and produces the results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]]</span>
<span class="p">[[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="caveats">
<h2>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>It is possible to use relative paths for the pyFormex package path. Be aware
though that these may not work if you execute the python command from a
directory that is actually a symlink.</p></li>
</ul>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>Currently you can not set the pyFormex command line options when not
using the pyformex command.</p>
<p>Loading user preferences has not been tested yet. There is a function
‘loadUserConfig’ in pyformex.main (untested).</p>
<p>Using (parts of) pyFormex other than through the pyformex command has not
been thoroughly tested yet. While the basic functionality should likely
work, the use of some complex classes and modules may raise some problems.</p>
<p>Warnings can not be silenced (unless you load the user preferences and
disable the warnings from the GUI first).</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gui.html" title="The Graphical User Interface"
             >next</a> |</li>
        <li class="right" >
          <a href="running.html" title="Running pyFormex"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="user-guide.html" >pyFormex user guide</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href="">Importing pyFormex</a></li--> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2023, Benedict Verhegghe.
    </span>
      Last updated on Mar 27, 2023.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.4.3.
    </span>
    </div>
  </body>
</html>