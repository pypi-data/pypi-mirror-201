

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!--
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be)
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->
    <title>62. plugins.bifmesh — Vascular Sweeping Mesher &#8212; pyFormex 3.3 documentation</title>

    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pyformex.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="63. plugins.cameratools — Camera tools" href="plugins.cameratools.html" />
    <link rel="prev" title="61. gui.widgets — Widgets and dialogs for the pyFormex GUI" href="gui.widgets.html" />
<link rel="icon" type="image/png" href="../_static/pyformex_fav.png" />

  </head><body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="../_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="../_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plugins.cameratools.html" title="63. plugins.cameratools — Camera tools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="gui.widgets.html" title="61. gui.widgets — Widgets and dialogs for the pyFormex GUI"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../refman.html" accesskey="U">pyFormex reference manual</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href=""><span class="section-number">62. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">plugins.bifmesh</span></code> — Vascular Sweeping Mesher</a></li--> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<!-- PYFORMEX_SIDEBAR_LOGO -->
<!-- PYFORMEX_WEBSITE_SIDEBAR_TOP -->

  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">62. <code class="xref py py-mod docutils literal notranslate"><span class="pre">plugins.bifmesh</span></code> — Vascular Sweeping Mesher</a><ul>
<li><a class="reference internal" href="#functions-defined-in-module-plugins-bifmesh">62.1. Functions defined in module plugins.bifmesh</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="gui.widgets.html"
                        title="previous chapter"><span class="section-number">61. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">gui.widgets</span></code> — Widgets and dialogs for the pyFormex GUI</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="plugins.cameratools.html"
                        title="next chapter"><span class="section-number">63. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">plugins.cameratools</span></code> — Camera tools</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-plugins.bifmesh">
<span id="plugins-bifmesh-vascular-sweeping-mesher"></span><span id="sec-ref-plugins-bifmesh"></span><h1><span class="section-number">62. </span><a class="reference internal" href="#module-plugins.bifmesh" title="plugins.bifmesh: Vascular Sweeping Mesher"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plugins.bifmesh</span></code></a> — Vascular Sweeping Mesher<a class="headerlink" href="#module-plugins.bifmesh" title="Permalink to this headline">¶</a></h1>
<div class="section" id="functions-defined-in-module-plugins-bifmesh">
<h2><span class="section-number">62.1. </span>Functions defined in module plugins.bifmesh<a class="headerlink" href="#functions-defined-in-module-plugins-bifmesh" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="plugins.bifmesh.structuredQuadMeshGrid">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">structuredQuadMeshGrid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sgx</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">sgy</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">isopquad</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#structuredQuadMeshGrid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.structuredQuadMeshGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>it returns nodes (2D) and elems of a structured quadrilateral grid. nodes and elements are both ordered first vertically (y) and then orizontally (x). This function is the equivalent of simple.rectangularGrid but on the mesh level.</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.structuredHexMeshGrid">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">structuredHexMeshGrid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dx</span></em>, <em class="sig-param"><span class="n">dy</span></em>, <em class="sig-param"><span class="n">dz</span></em>, <em class="sig-param"><span class="n">isophex</span><span class="o">=</span><span class="default_value">'hex64'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#structuredHexMeshGrid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.structuredHexMeshGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>it builds a structured hexahedral grid with nodes and elements both numbered in a structured way: first along z, then along y,and then along x. The resulting hex cells are oriented along z. This function is the equivalent of simple.rectangularGrid but for a mesh. Additionally, dx,dy,dz can be either integers or div (1D list or array). In case of list/array, first and last numbers should be 0.0 and 1.0 if the desired grid has to be inside the region 0.,0.,0. to 1.,1.,1.
TODO: include other optons to get the control points for other isoparametric transformation for hex.</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.findBisectrixUsingPlanes">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">findBisectrixUsingPlanes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cpx</span></em>, <em class="sig-param"><span class="n">centx</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#findBisectrixUsingPlanes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.findBisectrixUsingPlanes" title="Permalink to this definition">¶</a></dt>
<dd><p>it returns a bisectrix-points at each point of a Polygon (unit vector of the bisectrix). All the bisectrix-points are on the side of centx (inside the Polygon), regardless to the concavity or convexity of the angle, thus avoiding the problem of collinear or concave segments. The points will point towards the centx if the centx is offplane. It uses the lines from intersection of 2 planes.</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.cpBoundaryLayer">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">cpBoundaryLayer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">BS</span></em>, <em class="sig-param"><span class="n">centr</span></em>, <em class="sig-param"><span class="n">issection0</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">bl_rel</span><span class="o">=</span><span class="default_value">0.2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#cpBoundaryLayer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.cpBoundaryLayer" title="Permalink to this definition">¶</a></dt>
<dd><p>it takes n points of a nearly circular section (for the isop transformation, n should be 24, 48 etc) and find the control points needed for the boundary layer. The center of the section has to be given separately.
-issection0 needs to be True only for the section-0 of each branch of a bifurcation, which has to share the control points with the other branches. So it must be False for all other sections and single vessels.
This implementation for the bl (separated from the inner lumen) is needed to ensure an optimal mesh quality at the boundary layer in terms of angular skewness, needed for WSS calculation.</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.cpQuarterLumen">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">cpQuarterLumen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">lumb</span></em>, <em class="sig-param"><span class="n">centp</span></em>, <em class="sig-param"><span class="n">edgesq</span><span class="o">=</span><span class="default_value">0.75</span></em>, <em class="sig-param"><span class="n">diag</span><span class="o">=</span><span class="default_value">0.848528137423857</span></em>, <em class="sig-param"><span class="n">verbos</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#cpQuarterLumen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.cpQuarterLumen" title="Permalink to this definition">¶</a></dt>
<dd><p>control points for 1 quarter of lumen mapped in quad regions. lumb is a set of points on a quarter of section. centp is the center of the section. The number of poin I found that edgesq=0.75, diag=0.6*2**0.5 give the better mapping. Also possible edgesq=0.4, diag=0.42*2**0.5. Currently, it is not perfect if the section is not planar.</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.visualizeSubmappingQuadRegion">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">visualizeSubmappingQuadRegion</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sqr</span></em>, <em class="sig-param"><span class="n">timewait</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#visualizeSubmappingQuadRegion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.visualizeSubmappingQuadRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>visualilze the control points (-1,16,3) in each submapped region and check the quality of the region (which will be inherited by the mesh crossectionally)</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.cpOneSection">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">cpOneSection</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">hc</span></em>, <em class="sig-param"><span class="n">oc</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">isBranchingSection</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">verbos</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#cpOneSection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.cpOneSection" title="Permalink to this definition">¶</a></dt>
<dd><p>hc is a numbers of points on the boundary line of 1 almost circular section. oc is the center point of the section. It returns 3 groups of control points: for the inner part, for the transitional part and for the boundary layer of one single section</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.cpAllSections">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">cpAllSections</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">HC</span></em>, <em class="sig-param"><span class="n">OC</span></em>, <em class="sig-param"><span class="n">start_end_branching</span><span class="o">=</span><span class="default_value">[False, False]</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#cpAllSections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.cpAllSections" title="Permalink to this definition">¶</a></dt>
<dd><p>control points of all sections divided  in 3 groups of control points: for the inner part, for the transitional part and for the boundary layer. if start_end_branching is [True,True] the first and the last section are considered bifurcation sections and therefore meshed differently.</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.cpStackQ16toH64">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">cpStackQ16toH64</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cpq16</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#cpStackQ16toH64"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.cpStackQ16toH64" title="Permalink to this definition">¶</a></dt>
<dd><p>sweeping trick: from sweeping sections longitudinally to mapping hex64: ittakes -1,16,3 (cp of the quad16) and groups them in -1,64,3 (cp of the hex63) but slice after slice: [0,1,2,3],[1,2,3,4],[2,3,4,5],… It is a trick to use the hex64 for sweeping along an arbitrary number of sections.</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.mapHexLong">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">mapHexLong</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mesh_block</span></em>, <em class="sig-param"><span class="n">cpvr</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#mapHexLong"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.mapHexLong" title="Permalink to this definition">¶</a></dt>
<dd><p>map a structured mesh (n_block, e_block, cp_block are in mesh_block) into a volume defined by the control points cpvr (# regions longitudinally, # regions in 1 cross sectionsm, 64, 3 ). cp_block are the control points of the mesh block. It returns nodes and elements. Nodes are repeated in subsequently mapped regions !
TRICK: in order to make the mapping working for an arbitrary number of sections the following trick is used: of the whole mesh_block, only the part located between the points 1–2 is meshed and mapped between 2 slices only. Thus, the other parts 0–1 and 2–3 are not mapped. To do so, the first and the last slice need to be meshed separately: n_start 0–1 and n_end 2–3.</p>
</dd></dl>

<dl class="py function">
<dt id="plugins.bifmesh.mapQuadLong">
<code class="sig-prename descclassname">plugins.bifmesh.</code><code class="sig-name descname">mapQuadLong</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mesh_block</span></em>, <em class="sig-param"><span class="n">cpvr</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/plugins/bifmesh.html#mapQuadLong"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#plugins.bifmesh.mapQuadLong" title="Permalink to this definition">¶</a></dt>
<dd><p>TRICK: in order to make the mapping working for an arbitrary number of sections the following trick is used: of the whole mesh_block, only the part located between the points 1–2 is meshed and mapped between 2 slices only. Thus, the other parts 0–1 and 2–3 are not mapped. To do so, the first and the last slice need to be meshed separately: n_start 0–1 and n_end 2–3.</p>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plugins.cameratools.html" title="63. plugins.cameratools — Camera tools"
             >next</a> |</li>
        <li class="right" >
          <a href="gui.widgets.html" title="61. gui.widgets — Widgets and dialogs for the pyFormex GUI"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../refman.html" >pyFormex reference manual</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href=""><span class="section-number">62. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">plugins.bifmesh</span></code> — Vascular Sweeping Mesher</a></li--> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2023, Benedict Verhegghe.
    </span>
      Last updated on Mar 27, 2023.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.4.3.
    </span>
    </div>
  </body>
</html>