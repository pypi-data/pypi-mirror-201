

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!--
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be)
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->
    <title>20. field — Field data defined over a geometry. &#8212; pyFormex 3.3 documentation</title>

    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pyformex.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="21. fileread — Read geometry from files in a number of formats." href="fileread.html" />
    <link rel="prev" title="19. elements — Definition of elements for the Mesh model" href="elements.html" />
<link rel="icon" type="image/png" href="../_static/pyformex_fav.png" />

  </head><body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="../_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="../_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fileread.html" title="21. fileread — Read geometry from files in a number of formats."
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="elements.html" title="19. elements — Definition of elements for the Mesh model"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../refman.html" accesskey="U">pyFormex reference manual</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href=""><span class="section-number">20. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">field</span></code> — Field data defined over a geometry.</a></li--> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<!-- PYFORMEX_SIDEBAR_LOGO -->
<!-- PYFORMEX_WEBSITE_SIDEBAR_TOP -->

  <h4>Previous topic</h4>
  <p class="topless"><a href="elements.html"
                        title="previous chapter"><span class="section-number">19. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">elements</span></code> — Definition of elements for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Mesh</span></code> model</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fileread.html"
                        title="next chapter"><span class="section-number">21. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">fileread</span></code> — Read geometry from files in a number of formats.</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-field">
<span id="field-field-data-defined-over-a-geometry"></span><span id="sec-ref-field"></span><h1><span class="section-number">20. </span><a class="reference internal" href="#module-field" title="field: Field data defined over a geometry."><code class="xref py py-mod docutils literal notranslate"><span class="pre">field</span></code></a> — Field data defined over a geometry.<a class="headerlink" href="#module-field" title="Permalink to this headline">¶</a></h1>
<p>This module defines the Field class, which can be used to describe
scalar and vectorial field data over a geometrical domain.</p>
<dl class="py class">
<dt id="field.Field">
<em class="property">class </em><code class="sig-prename descclassname">field.</code><code class="sig-name descname">Field</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">geometry</span></em>, <em class="sig-param"><span class="n">fldtype</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">fldname</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/field.html#Field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#field.Field" title="Permalink to this definition">¶</a></dt>
<dd><p>Scalar or vectorial field data defined over a geometric domain.</p>
<p>A scalar data field is a quantity having exactly one value in each
point of some geometric domain. A vectorial field is a quantity having
exactly <cite>nval</cite> values at each point, where <cite>nval &gt;= 1</cite>.
A vectorial field can also be considered as a collection of <cite>nval</cite>
scalar fields: as far as the Field class is concerned, there is no
relation between the <cite>nval</cite> components of a vectorial field.</p>
<p>The definition of a field is always tied to some geometric domain.
Currently pyFormex allows fields to be defined on Formex and Mesh
type geometries.</p>
<p>Fields should only be defined on geometries whose topology does not
change anymore. This means that for Formex type, the shape of the
<cite>coords</cite> attribute should not be changed, and for Mesh type, the
shape of <cite>coords</cite> and the full contents of <cite>elems</cite> should not be
changed. It is therefore best ot only add field data to geometry
objects that will not be changed in place.
Nearly all methods in pyFormex return a copy of the object, and the
copy currently looses all the fields defined on the parent.
In future however, selected transformations may inherit fields from
the parent.</p>
<p>While Field class instances are usually created automatically by the
<code class="xref py py-func docutils literal notranslate"><span class="pre">Geometry.addField()</span></code> method of some Geometry,
it is possible to create Field
instances yourself and manage the objects like you want. The Fields
stored inside Geometry objects have some special features though,
like being exported to a PGF file together with the geometry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geometry</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Formex</span></code> | <code class="xref py py-class docutils literal notranslate"><span class="pre">Mesh</span></code>) – Describes the geometrical domain over which the field is defined.
Currently this has to be an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">Formex</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">Mesh</span></code> (or a subclass thereof).</p></li>
<li><p><strong>fldtype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – <p>The field type, one of the following predefined strings:</p>
<ul>
<li><p>’node’: the field data are specified at the nodes of the geometry;</p></li>
<li><p>’elemc’: the field data are constant per element;</p></li>
<li><p>’elemn’: the field data vary over the element and are specified at
the nodes of the elements;</p></li>
<li><p>’elemg’: the field data are specified at a number of points of
the elements, from which they can be inter- or extrapolated;</p></li>
</ul>
<p>The actually available field types depend on the type of the
<cite>geometry</cite> object. <code class="xref py py-class docutils literal notranslate"><span class="pre">Formex</span></code> type has only ‘elemc’ and ‘elemn’.
<cite>Mesh</cite> currently has ‘node’, ‘elemc’ and ‘elemn’.</p>
</p></li>
<li><p><strong>data`</strong> (<a class="reference internal" href="../glossary.html#term-array_like"><span class="xref std std-term">array_like</span></a>) – <p>An array with the field values defined at the specified
points. The required shape of the array depends on <cite>fldtype</cite>:</p>
<ul>
<li><p>’node’:  ( nnodes, ) or ( nnodes, nval )</p></li>
<li><p>’elemc’: ( nelems, ) or ( nelems, nval )</p></li>
<li><p>’elemn’: ( nelems, nplex ) or  (nelems, nplex, nval )</p></li>
<li><p>’elemg’: ( nelems, ngp ) or  (nelems, ngp, nval )</p></li>
</ul>
</p></li>
<li><p><strong>fldname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name used to identify the field. Fields stored in a Geometry
object can be retrieved using this name. See <code class="xref py py-func docutils literal notranslate"><span class="pre">Geometry.getField()</span></code>.
If no name is specified, an automatic name is generated.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.formex</span> <span class="kn">import</span> <span class="n">Formex</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;4:0123&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replic</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">toMesh</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[0. 0. 0.]</span>
<span class="go"> [0. 1. 0.]</span>
<span class="go"> [1. 0. 0.]</span>
<span class="go"> [1. 1. 0.]</span>
<span class="go"> [2. 0. 0.]</span>
<span class="go"> [2. 1. 0.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="n">elems</span><span class="p">)</span>
<span class="go">[[0 2 3 1]</span>
<span class="go"> [2 4 5 3]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">distanceFromPlane</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">M</span><span class="p">,</span><span class="s1">&#39;node&#39;</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
<span class="go">Field &#39;field-0&#39;, type &#39;node&#39;, shape (6,), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[0. 0. 1. 1. 2. 2.]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">f1</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;elemn&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f2</span><span class="p">)</span>
<span class="go">Field &#39;field-1&#39;, type &#39;elemn&#39;, shape (2, 4), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[[0. 1. 1. 0.]</span>
<span class="go"> [1. 2. 2. 1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f3</span> <span class="o">=</span> <span class="n">f2</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;elemc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f3</span><span class="p">)</span>
<span class="go">Field &#39;field-2&#39;, type &#39;elemc&#39;, shape (2,), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[0.5 1.5]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">distanceFromPlane</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f4</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">M</span><span class="p">,</span><span class="s1">&#39;node&#39;</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">([</span><span class="n">d</span><span class="p">,</span><span class="n">d1</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f4</span><span class="p">)</span>
<span class="go">Field &#39;field-3&#39;, type &#39;node&#39;, shape (6, 2), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[[0. 0.]</span>
<span class="go"> [0. 1.]</span>
<span class="go"> [1. 0.]</span>
<span class="go"> [1. 1.]</span>
<span class="go"> [2. 0.]</span>
<span class="go"> [2. 1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f5</span> <span class="o">=</span> <span class="n">f4</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;elemn&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f5</span><span class="p">)</span>
<span class="go">Field &#39;field-4&#39;, type &#39;elemn&#39;, shape (2, 4, 2), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[[[0. 0.]</span>
<span class="go">  [1. 0.]</span>
<span class="go">  [1. 1.]</span>
<span class="go">  [0. 1.]]</span>

<span class="go"> [[1. 0.]</span>
<span class="go">  [2. 0.]</span>
<span class="go">  [2. 1.]</span>
<span class="go">  [1. 1.]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f6</span> <span class="o">=</span> <span class="n">f5</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;elemc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f6</span><span class="p">)</span>
<span class="go">Field &#39;field-5&#39;, type &#39;elemc&#39;, shape (2, 2), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[[0.5 0.5]</span>
<span class="go"> [1.5 0.5]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f3</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;elemn&#39;</span><span class="p">))</span>
<span class="go">Field &#39;field-6&#39;, type &#39;elemn&#39;, shape (2, 4), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[[0.5 0.5 0.5 0.5]</span>
<span class="go"> [1.5 1.5 1.5 1.5]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f3</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">))</span>
<span class="go">Field &#39;field-8&#39;, type &#39;node&#39;, shape (6, 1), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[[0.5]</span>
<span class="go"> [0.5]</span>
<span class="go"> [1. ]</span>
<span class="go"> [1. ]</span>
<span class="go"> [1.5]</span>
<span class="go"> [1.5]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f6</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;elemn&#39;</span><span class="p">))</span>
<span class="go">Field &#39;field-9&#39;, type &#39;elemn&#39;, shape (2, 4, 2), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[[[0.5 0.5]</span>
<span class="go">  [0.5 0.5]</span>
<span class="go">  [0.5 0.5]</span>
<span class="go">  [0.5 0.5]]</span>

<span class="go"> [[1.5 0.5]</span>
<span class="go">  [1.5 0.5]</span>
<span class="go">  [1.5 0.5]</span>
<span class="go">  [1.5 0.5]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f6</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">))</span>
<span class="go">Field &#39;field-11&#39;, type &#39;node&#39;, shape (6, 2), nnodes=6, nelems=2, nplex=4</span>
<span class="go">[[0.5 0.5]</span>
<span class="go"> [0.5 0.5]</span>
<span class="go"> [1.  0.5]</span>
<span class="go"> [1.  0.5]</span>
<span class="go"> [1.5 0.5]</span>
<span class="go"> [1.5 0.5]]</span>
</pre></div>
</div>
<dl class="py method">
<dt id="field.Field.comp">
<code class="sig-name descname">comp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">i</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/field.html#Field.comp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#field.Field.comp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the data component i of a vectorial Field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>i</strong> (<em>int:</em>) – Component index of a vectorial Field. If the Field is a
scalar one, any value will return the full scalar data.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>array</em> – An array with scalar data over the Geometry.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="field.Field.convert">
<code class="sig-name descname">convert</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">totype</span></em>, <em class="sig-param"><span class="n">toname</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/field.html#Field.convert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#field.Field.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a Field to another type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>totype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The target field type. Can be any of the available
field types. See <a class="reference internal" href="#field.Field" title="field.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> class. If the target type is equal
to the source type, a copy of the original Field will result.
This may or may not be a shallow copy.</p></li>
<li><p><strong>toname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The name of the target field. If not specified,
a autoname is generated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Field</em> – A Field of type <cite>totype</cite> with data converted from the input Field.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fileread.html" title="21. fileread — Read geometry from files in a number of formats."
             >next</a> |</li>
        <li class="right" >
          <a href="elements.html" title="19. elements — Definition of elements for the Mesh model"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../refman.html" >pyFormex reference manual</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href=""><span class="section-number">20. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">field</span></code> — Field data defined over a geometry.</a></li--> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2023, Benedict Verhegghe.
    </span>
      Last updated on Mar 27, 2023.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.4.3.
    </span>
    </div>
  </body>
</html>