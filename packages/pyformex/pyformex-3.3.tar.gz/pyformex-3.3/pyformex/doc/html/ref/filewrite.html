

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!--
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be)
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->
    <title>22. filewrite — Write geometry to file in a whole number of formats. &#8212; pyFormex 3.3 documentation</title>

    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pyformex.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="23. flatkeydb — Flat Text File Database." href="flatkeydb.html" />
    <link rel="prev" title="21. fileread — Read geometry from files in a number of formats." href="fileread.html" />
<link rel="icon" type="image/png" href="../_static/pyformex_fav.png" />

  </head><body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="../_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="../_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="flatkeydb.html" title="23. flatkeydb — Flat Text File Database."
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="fileread.html" title="21. fileread — Read geometry from files in a number of formats."
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../refman.html" accesskey="U">pyFormex reference manual</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href=""><span class="section-number">22. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">filewrite</span></code> — Write geometry to file in a whole number of formats.</a></li--> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<!-- PYFORMEX_SIDEBAR_LOGO -->
<!-- PYFORMEX_WEBSITE_SIDEBAR_TOP -->

  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">22. <code class="xref py py-mod docutils literal notranslate"><span class="pre">filewrite</span></code> — Write geometry to file in a whole number of formats.</a><ul>
<li><a class="reference internal" href="#functions-defined-in-module-filewrite">22.1. Functions defined in module filewrite</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="fileread.html"
                        title="previous chapter"><span class="section-number">21. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">fileread</span></code> — Read geometry from files in a number of formats.</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="flatkeydb.html"
                        title="next chapter"><span class="section-number">23. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">flatkeydb</span></code> — Flat Text File Database.</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-filewrite">
<span id="filewrite-write-geometry-to-file-in-a-whole-number-of-formats"></span><span id="sec-ref-filewrite"></span><h1><span class="section-number">22. </span><a class="reference internal" href="#module-filewrite" title="filewrite: Write geometry to file in a whole number of formats."><code class="xref py py-mod docutils literal notranslate"><span class="pre">filewrite</span></code></a> — Write geometry to file in a whole number of formats.<a class="headerlink" href="#module-filewrite" title="Permalink to this headline">¶</a></h1>
<p>This module defines both the basic routines to write geometrical data
to a file and the specialized exporters to write files in a number of
well known standardized formats.</p>
<p>Most of the exporters support transparent compression of the output files
by just specifying a file name that ends in ‘.gz’ or ‘.bz2’.</p>
<p>The basic routines are very versatile as well as optimized and allow to
easily create new exporters for other formats.</p>
<div class="section" id="functions-defined-in-module-filewrite">
<h2><span class="section-number">22.1. </span>Functions defined in module filewrite<a class="headerlink" href="#functions-defined-in-module-filewrite" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="filewrite.writePGF">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">writePGF</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">objects</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">' '</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'w'</span></em>, <em class="sig-param"><span class="n">shortlines</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#writePGF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.writePGF" title="Permalink to this definition">¶</a></dt>
<dd><p>Save geometric objects to a pyFormex Geometry File.</p>
<p>A pyFormex Geometry File can store multiple geometrical objects in a
native format that can be efficiently read back into pyFormex.
The format is portable over different pyFormex versions and
even to other software.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<a class="reference internal" href="../glossary.html#term-path_like"><span class="xref std std-term">path_like</span></a>) – The name of the file to be written. Usually this has a suffix ‘.pgf’.
If a ‘.gz’ or ‘.bz2’ is added, the file will be compressed with gzip
or bzip2, respectively.</p></li>
<li><p><strong>objects</strong> (<em>object | list | dict</em>) – One or more objects to be saved on the file.
If it is a dictionary, the keys are saved in the file as the names
of the objects.
Objects that can not be exported to a pyFormex Geometry File are
silently ignored.</p></li>
<li><p><strong>mode</strong> (<em>'w' | 'a'</em>) – The mode in which to open the file. The default ‘w’ will overwrite
an existing file. Use ‘a’ to append to an existing file.</p></li>
<li><p><strong>sep</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The string used to separate data. If set to an empty string, the
data will be written in binary format and the resulting file
will be smaller, but less portable.</p></li>
<li><p><strong>**kargs</strong> – Extra keyword arguments are passed to
<a class="reference internal" href="geomfile.html#geomfile.GeometryFile.write" title="geomfile.GeometryFile.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>int</em> – The number of objects that were written to the file.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test_filewrite.pgf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">eltype</span><span class="o">=</span><span class="s1">&#39;quad4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;tri3-u&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writePGF</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">M</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go"># pyFormex Geometry File (http://pyformex.org) version=&#39;2.1&#39;; sep=&#39; &#39;</span>
<span class="go"># objtype=&#39;Mesh&#39;; ncoords=4; nelems=2; nplex=3; props=False; normals=False;    color=None; sep=&#39; &#39;; name=&#39;test_filewrite-0&#39;; eltype=&#39;tri3&#39;</span>
<span class="go">0.0 0.0 0.0 1.0 0.0 0.0 1.0 1.0 0.0 0.0 1.0 0.0</span>
<span class="go">0 1 2 2 3 0</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="filewrite.writeOFF">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">writeOFF</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fn</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">faces</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comment</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">signature</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#writeOFF"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.writeOFF" title="Permalink to this definition">¶</a></dt>
<dd><p>Write polygons to a file in OFF format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> (<a class="reference internal" href="../glossary.html#term-path_like"><span class="xref std std-term">path_like</span></a>) – The output file name, commonly having a suffix ‘.off’.
If the suffix ends on ‘.gz’ or ‘.bz2’, the file will transparently
be compressed during writing.</p></li>
<li><p><strong>coords</strong> (<a class="reference internal" href="../glossary.html#term-coords_like"><span class="xref std std-term">coords_like</span></a> | <a class="reference internal" href="mesh.html#mesh.Mesh" title="mesh.Mesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mesh</span></code></a> | <a class="reference internal" href="polygons.html#polygons.Polygons" title="polygons.Polygons"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polygons</span></code></a>) – A float array (ncoords, 3) with the coordinates of all vertices.
As a convenience, a Mesh or Polygons object may be provided instead.
In that case the coords will be taken from that object and the faces
argument will be set to the object’s elems attribute.</p></li>
<li><p><strong>faces</strong> (<a class="reference internal" href="varray.html#varray.Varray" title="varray.Varray"><code class="xref py py-class docutils literal notranslate"><span class="pre">Varray</span></code></a> | ndarray | list of ndarray) – Specifies the connectivity of the faces to be stored in the OFF file.
It is either a Varray like in a <code class="xref py py-class docutils literal notranslate"><span class="pre">Polygons</span></code> object, or a 2D
int array or a list of arrays, holding one or more connectivity
tables of plexitude &gt;= 3.
This argument is required if coords is a <a class="reference internal" href="../glossary.html#term-coords_like"><span class="xref std std-term">coords_like</span></a> and is
ignored if coords is a Mesh or Polygons.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the object to be stored in the file.</p></li>
<li><p><strong>comment</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – An extra comment to be stored in the file.</p></li>
<li><p><strong>signature</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If True (default), a comment is inserted with the creator name and
version and the creation date. This can be switch off for cases
where the file has to be further processed by software that does not
understand comments in .off files.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See <a class="reference external" href="https://en.wikipedia.org/wiki/OFF_(file_format">https://en.wikipedia.org/wiki/OFF_(file_format</a>).</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.polygons</span> <span class="kn">import</span> <span class="n">Polygons</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.fileread</span> <span class="kn">import</span> <span class="n">readOFF</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test_filewrite.off&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">Polygons</span><span class="p">(</span><span class="n">Coords</span><span class="p">(</span><span class="s1">&#39;011233&#39;</span><span class="p">),</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writeOFF</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">elems</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;This is a test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go">OFF</span>
<span class="go"># OFF file written by pyFormex ...</span>
<span class="go"># This is a test</span>
<span class="go"># name=test</span>
<span class="go">6 3 0</span>
<span class="go">0.0 0.0 0.0</span>
<span class="go">1.0 0.0 0.0</span>
<span class="go">2.0 0.0 0.0</span>
<span class="go">2.0 1.0 0.0</span>
<span class="go">1.0 1.0 0.0</span>
<span class="go">0.0 1.0 0.0</span>
<span class="go">4 0 1 4 5</span>
<span class="go">3 4 1 2</span>
<span class="go">3 2 3 4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">readOFF</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">Polygons: nnodes: 6, nelems: 3, nplex: min 3, max 4, eltype: polygon</span>
<span class="go">  BBox: [0. 0. 0.], [2. 1. 0.]</span>
<span class="go">  Size: [2. 1. 0.]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[0. 0. 0.]</span>
<span class="go"> [1. 0. 0.]</span>
<span class="go"> [2. 0. 0.]</span>
<span class="go"> [2. 1. 0.]</span>
<span class="go"> [1. 1. 0.]</span>
<span class="go"> [0. 1. 0.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">elems</span><span class="p">)</span>
<span class="go">Varray (3, (3, 4))</span>
<span class="go">  [0 1 4 5]</span>
<span class="go">  [4 1 2]</span>
<span class="go">  [2 3 4]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="filewrite.writeOBJ">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">writeOBJ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fn</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">faces</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">edges</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">points</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comment</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#writeOBJ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.writeOBJ" title="Permalink to this definition">¶</a></dt>
<dd><p>Write polygons to a file in OBJ format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> (<a class="reference internal" href="../glossary.html#term-path_like"><span class="xref std std-term">path_like</span></a>) – The output file name, commonly having a suffix ‘.obj’.
If the suffix ends on ‘.gz’ or ‘.bz2’, the file will transparently
be compressed during writing.</p></li>
<li><p><strong>coords</strong> (<a class="reference internal" href="../glossary.html#term-coords_like"><span class="xref std std-term">coords_like</span></a> | <a class="reference internal" href="mesh.html#mesh.Mesh" title="mesh.Mesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mesh</span></code></a> | <a class="reference internal" href="polygons.html#polygons.Polygons" title="polygons.Polygons"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polygons</span></code></a>) – A float array (ncoords, 3) with the coordinates of all vertices.
As a convenience, a Mesh or Polygons object may be provided instead.
In that case the coords will be taken from that object and the faces
argument will be set to the object’s elems attribute.</p></li>
<li><p><strong>faces</strong> (<a class="reference internal" href="varray.html#varray.Varray" title="varray.Varray"><code class="xref py py-class docutils literal notranslate"><span class="pre">Varray</span></code></a> | ndarray | list of ndarray) – Specifies the connectivity of the faces to be stored in the OFF file.
It is either a Varray like in a <code class="xref py py-class docutils literal notranslate"><span class="pre">Polygons</span></code> object, or a 2D
int array or a list of arrays, holding one or more connectivity
tables of plexitude &gt;= 3.
This argument is required if coords is a <a class="reference internal" href="../glossary.html#term-coords_like"><span class="xref std std-term">coords_like</span></a> and is
ignored if coords is a Mesh or Polygons.</p></li>
<li><p><strong>edges</strong> (<a class="reference internal" href="connectivity.html#connectivity.Connectivity" title="connectivity.Connectivity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connectivity</span></code></a> like, optional) – A connectivity table with plexitude 2, specifying the edges to be
stored in the OBJ file.</p></li>
<li><p><strong>points</strong> (<a class="reference internal" href="connectivity.html#connectivity.Connectivity" title="connectivity.Connectivity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connectivity</span></code></a> like, optional) – A connectivity table with plexitude 1 specifying the points to be
stored in the OBJ file.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the object to be stored in the file.</p></li>
<li><p><strong>comment</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – An extra comment to be stored in the file.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>See <a class="reference external" href="https://en.wikipedia.org/wiki/OBJ_(file_format">https://en.wikipedia.org/wiki/OBJ_(file_format</a>).</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.polygons</span> <span class="kn">import</span> <span class="n">Polygons</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.fileread</span> <span class="kn">import</span> <span class="n">readOBJ</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test_filewrite.obj&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">Polygons</span><span class="p">(</span><span class="n">Coords</span><span class="p">(</span><span class="s1">&#39;011233&#39;</span><span class="p">),</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writeOBJ</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">elems</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;This is a test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go"># OBJ file written by pyFormex ...</span>
<span class="go"># This is a test</span>
<span class="go">o test</span>
<span class="go">v 0.0 0.0 0.0</span>
<span class="go">v 1.0 0.0 0.0</span>
<span class="go">v 2.0 0.0 0.0</span>
<span class="go">v 2.0 1.0 0.0</span>
<span class="go">v 1.0 1.0 0.0</span>
<span class="go">v 0.0 1.0 0.0</span>
<span class="go">f 1 2 5 6</span>
<span class="go">f 5 2 3</span>
<span class="go">f 3 4 5</span>
<span class="go"># End</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">readOBJ</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">Polygons: nnodes: 6, nelems: 3, nplex: min 3, max 4, eltype: polygon</span>
<span class="go">  BBox: [0. 0. 0.], [2. 1. 0.]</span>
<span class="go">  Size: [2. 1. 0.]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[0. 0. 0.]</span>
<span class="go"> [1. 0. 0.]</span>
<span class="go"> [2. 0. 0.]</span>
<span class="go"> [2. 1. 0.]</span>
<span class="go"> [1. 1. 0.]</span>
<span class="go"> [0. 1. 0.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">elems</span><span class="p">)</span>
<span class="go">Varray (3, (3, 4))</span>
<span class="go">  [0 1 4 5]</span>
<span class="go">  [4 1 2]</span>
<span class="go">  [2 3 4]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="filewrite.writePLY">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">writePLY</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fn</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">faces</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">edges</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">vcolor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fcolor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ecolor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">comment</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">binary</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#writePLY"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.writePLY" title="Permalink to this definition">¶</a></dt>
<dd><p>Write polygons to a file in PLY format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> (<a class="reference internal" href="../glossary.html#term-path_like"><span class="xref std std-term">path_like</span></a>) – The output file name, commonly having a suffix ‘.ply’.
If the suffix ends on ‘.gz’ or ‘.bz2’, the file will transparently
be compressed during writing.</p></li>
<li><p><strong>coords</strong> (<a class="reference internal" href="../glossary.html#term-coords_like"><span class="xref std std-term">coords_like</span></a> | <a class="reference internal" href="mesh.html#mesh.Mesh" title="mesh.Mesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mesh</span></code></a> | <a class="reference internal" href="polygons.html#polygons.Polygons" title="polygons.Polygons"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polygons</span></code></a>) – A float array (ncoords, 3) with the coordinates of all vertices.
As a convenience, a Mesh or Polygons object may be provided instead.
In that case the coords will be taken from that object and the faces
argument will be set to the object’s elems attribute.</p></li>
<li><p><strong>faces</strong> (<a class="reference internal" href="varray.html#varray.Varray" title="varray.Varray"><code class="xref py py-class docutils literal notranslate"><span class="pre">Varray</span></code></a> | ndarray | list of ndarray) – Specifies the connectivity of the faces to be stored in the OFF file.
It is either a Varray like in a <code class="xref py py-class docutils literal notranslate"><span class="pre">Polygons</span></code> object, or a 2D
int array or a list of arrays, holding one or more connectivity
tables of plexitude &gt;= 3.
This argument is required if coords is a <a class="reference internal" href="../glossary.html#term-coords_like"><span class="xref std std-term">coords_like</span></a> and is
ignored if coords is a Mesh or Polygons.</p></li>
<li><p><strong>edges</strong> (<a class="reference internal" href="connectivity.html#connectivity.Connectivity" title="connectivity.Connectivity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connectivity</span></code></a> like, optional) – A connectivity table with plexitude 2, specifying the edges to be
stored in the PLY file.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the object to be stored in the file.</p></li>
<li><p><strong>comment</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – An extra comment to be stored in the file.</p></li>
<li><p><strong>binary</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If True, a binary file is written. The default is ascii.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>For details on the PLY format,
see <a class="reference external" href="https://en.wikipedia.org/wiki/PLY_(file_format)">https://en.wikipedia.org/wiki/PLY_(file_format)</a>.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.polygons</span> <span class="kn">import</span> <span class="n">Polygons</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.fileread</span> <span class="kn">import</span> <span class="n">readPLY</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test_filewrite.ply&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">Polygons</span><span class="p">(</span><span class="n">Coords</span><span class="p">(</span><span class="s1">&#39;011233&#39;</span><span class="p">),</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writePLY</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">P</span><span class="o">.</span><span class="n">elems</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;This is a test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go">ply</span>
<span class="go">format ascii 1.0</span>
<span class="go">comment PLY file written by pyFormex ...</span>
<span class="go">comment This is a test</span>
<span class="go">comment name=test</span>
<span class="go">element vertex 6</span>
<span class="go">property float x</span>
<span class="go">property float y</span>
<span class="go">property float z</span>
<span class="go">element face 3</span>
<span class="go">property list int int vertex_indices</span>
<span class="go">end_header</span>
<span class="go">0.0 0.0 0.0</span>
<span class="go">1.0 0.0 0.0</span>
<span class="go">2.0 0.0 0.0</span>
<span class="go">2.0 1.0 0.0</span>
<span class="go">1.0 1.0 0.0</span>
<span class="go">0.0 1.0 0.0</span>
<span class="go">4 0 1 4 5</span>
<span class="go">3 4 1 2</span>
<span class="go">3 2 3 4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">readPLY</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">Polygons: nnodes: 6, nelems: 3, nplex: min 3, max 4, eltype: polygon</span>
<span class="go">  BBox: [0. 0. 0.], [2. 1. 0.]</span>
<span class="go">  Size: [2. 1. 0.]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="go">[[0. 0. 0.]</span>
<span class="go"> [1. 0. 0.]</span>
<span class="go"> [2. 0. 0.]</span>
<span class="go"> [2. 1. 0.]</span>
<span class="go"> [1. 1. 0.]</span>
<span class="go"> [0. 1. 0.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">elems</span><span class="p">)</span>
<span class="go">Varray (3, (3, 4))</span>
<span class="go">  [0 1 4 5]</span>
<span class="go">  [4 1 2]</span>
<span class="go">  [2 3 4]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writePLY</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;This is a test&#39;</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">readPLY</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="go">Polygons: nnodes: 6, nelems: 3, nplex: min 3, max 4, eltype: polygon</span>
<span class="go">  BBox: [0. 0. 0.], [2. 1. 0.]</span>
<span class="go">  Size: [2. 1. 0.]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="filewrite.writeGTS">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">writeGTS</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fn</span></em>, <em class="sig-param"><span class="n">surf</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#writeGTS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.writeGTS" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a TriSurface to a file in GTS format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> (<a class="reference internal" href="../glossary.html#term-path_like"><span class="xref std std-term">path_like</span></a>) – The output file name, commonly having a suffix ‘.gts’.
If the suffix ends on ‘.gz’ or ‘.bz2’, the file will transparently
be compressed during writing.</p></li>
<li><p><strong>surf</strong> (<a class="reference internal" href="trisurface.html#trisurface.TriSurface" title="trisurface.TriSurface"><em>TriSurface</em></a>) – The TriSurface to write to the file.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test_filewrite.gts&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">eltype</span><span class="o">=</span><span class="s1">&#39;quad4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;tri3-u&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writeGTS</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">M</span><span class="o">.</span><span class="n">toSurface</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go">4 5 2</span>
<span class="go">0.000000 0.000000 0.000000</span>
<span class="go">1.000000 0.000000 0.000000</span>
<span class="go">1.000000 1.000000 0.000000</span>
<span class="go">0.000000 1.000000 0.000000</span>
<span class="go">1 2</span>
<span class="go">3 1</span>
<span class="go">4 1</span>
<span class="go">2 3</span>
<span class="go">3 4</span>
<span class="go">1 4 2</span>
<span class="go">5 3 2</span>
<span class="go">#GTS file written by pyFormex ...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="filewrite.writeSTL">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">writeSTL</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fn</span></em>, <em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">binary</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">color</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#writeSTL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.writeSTL" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a collection of triangles to an STL file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> (<a class="reference internal" href="../glossary.html#term-path_like"><span class="xref std std-term">path_like</span></a>) – The output file name, commonly having a suffix ‘.stl’ or
‘.stla’ (for ascii output) or ‘.stlb’ (for binary output).
If the suffix ends on ‘.gz’ or ‘.bz2’, the file will transparently
be compressed during writing.</p></li>
<li><p><strong>x</strong> (<em>Coords | Formex</em>) – A Coords or Formex with shape (ntriangles,3,3) holding the coordinates of
the vertices of the triangles to write to the file.</p></li>
<li><p><strong>n</strong> (<a class="reference internal" href="coords.html#coords.Coords" title="coords.Coords"><em>Coords</em></a><em>, </em><em>optional</em>) – A Coords with shape (ntriangles,3) holding the normal vectors to the
triangles. If not specified, they will be calculated.</p></li>
<li><p><strong>binary</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – If True, the output file format  will be a binary STL.
The default is an ascii STL.</p></li>
<li><p><strong>color</strong> (<em>array</em>) – An int of float array with the color to be added to the header of
a binary STL (in Magics format).
If float, values are in the range 0..1.
If int, values are in the range 0..255. Either 3 (RGB) or 4 (RGBA)
components should be given. If only 3, an alpha value will be added:
pf.canvas.transparency if float, or 128 in int type was used.
Float values are converted to int using <code class="xref py py-func docutils literal notranslate"><span class="pre">colors.RGBAcolors()</span></code>.
Note that color can only be used with a binary STL format, and
is not recognized by all STL processing software.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The STL format stores a loose collection of triangles and does
not include connectivity information between the triangles.
Therefore the use of this format for intermediate storage is
<strong>strongly discouraged</strong>, as many processing algorithms will need
to build the connectivity information over and again, which may
lead to different results depending on round-off errors.
The STL format should only be used as a <strong>final export</strong> to
e.g. visualisation methods or machining processes.</p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test_filewrite.stl&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">eltype</span><span class="o">=</span><span class="s1">&#39;quad4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;tri3-u&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writeSTL</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">M</span><span class="o">.</span><span class="n">toFormex</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go">solid  Created by pyFormex ...</span>
<span class="go">  facet normal 0.0 0.0 1.0</span>
<span class="go">    outer loop</span>
<span class="go">      vertex 0.0 0.0 0.0</span>
<span class="go">      vertex 1.0 0.0 0.0</span>
<span class="go">      vertex 1.0 1.0 0.0</span>
<span class="go">    endloop</span>
<span class="go">  endfacet</span>
<span class="go">  facet normal 0.0 0.0 1.0</span>
<span class="go">    outer loop</span>
<span class="go">      vertex 1.0 1.0 0.0</span>
<span class="go">      vertex 0.0 1.0 0.0</span>
<span class="go">      vertex 0.0 0.0 0.0</span>
<span class="go">    endloop</span>
<span class="go">  endfacet</span>
<span class="go">endsolid</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="filewrite.writeData">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">writeData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fil</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">fmt</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">'\n'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#writeData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.writeData" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an array of numerical data to an open file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fil</strong> (<a class="reference internal" href="../glossary.html#term-file_like"><span class="xref std std-term">file_like</span></a>) – The file to write the data to. It can be any object supporting
the write(bytes) method, like a file opened in binary write mode.</p></li>
<li><p><strong>data</strong> (<a class="reference internal" href="../glossary.html#term-array_like"><span class="xref std std-term">array_like</span></a>) – A numerical array of int or float type. For output, the array
will be reshaped to a 2D array, keeping the length of the last axis.</p></li>
<li><p><strong>fmt</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – A format string compatible with the array data type.
If not provided, the data are written as a single block
using <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.tofile()</span></code>.
If provided, the format string should contain a valid format
converter for a single data item. It may also contain the necessary
spacing or separator.
Examples are ‘%5i ‘ for int data and ‘%f,’ or ‘%10.3e’
for float data.</p></li>
<li><p><strong>sep</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – A string to be used as separator between single items.
Only used if fmt is provided and the file is written in ascii mode.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – A string to be written at the end of the data block (if no <cite>fmt</cite>)
or at the end of each row (with <cite>fmt</cite>). The default value is a newline
character.
Only used if fmt is provided and the file is written in ascii mode.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test_filewrite.out&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fil</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">writeData</span><span class="p">(</span><span class="n">fil</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">size</span>
<span class="go">35</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go">1.0 0.0 0.0 0.0 1.0 0.0 0.0 0.0 1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fil</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">writeData</span><span class="p">(</span><span class="n">fil</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.4f</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">size</span>
<span class="go">63</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go">1.0000 0.0000 0.0000</span>
<span class="go">0.0000 1.0000 0.0000</span>
<span class="go">0.0000 0.0000 1.0000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fil</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">writeData</span><span class="p">(</span><span class="n">fil</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.4f</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go">0.0000 1.0000 2.0000 3.0000</span>
<span class="go">4.0000 5.0000 6.0000 7.0000</span>
<span class="go">8.0000 9.0000 10.0000 11.0000</span>
<span class="go">12.0000 13.0000 14.0000 15.0000</span>
<span class="go">16.0000 17.0000 18.0000 19.0000</span>
<span class="go">20.0000 21.0000 22.0000 23.0000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="filewrite.writeIData">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">writeIData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fil</span></em>, <em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">fmt</span></em>, <em class="sig-param"><span class="n">ind</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">' '</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">'\n'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#writeIData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.writeIData" title="Permalink to this definition">¶</a></dt>
<dd><p>Write an indexed array of numerical data to an open file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fil</strong> (<a class="reference internal" href="../glossary.html#term-file_like"><span class="xref std std-term">file_like</span></a>) – The file to write the data to. It can be any object supporting
the write(bytes) method, like a file opened in binary write mode.</p></li>
<li><p><strong>data</strong> (<a class="reference internal" href="../glossary.html#term-array_like"><span class="xref std std-term">array_like</span></a>) – A numerical array of int or float type. For output, the array
will be reshaped to a 2D array, keeping the length of the last axis.</p></li>
<li><p><strong>fmt</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – A format string compatible with the array data type.
The format string should contain a valid format converter for a
a single data item. It may also contain the necessary spacing or
separator. Examples are ‘%5i ‘ for int data and ‘%f,’ or ‘%10.3e’
for float data.</p></li>
<li><p><strong>ind</strong> (int or int <a class="reference internal" href="../glossary.html#term-array_like"><span class="xref std std-term">array_like</span></a>) – The row indices to write with the data. If an array, its length
should be equal to the numbe of rows in the (2D-reshaped) <cite>data</cite>
array. If a single int, it specifies the index for the first row,
and the value will be automatically incremented for the other rows.</p></li>
<li><p><strong>sep</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – A string to be used as separator between single items.</p></li>
<li><p><strong>end</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – A string to be written at the end of the data block (if no <cite>fmt</cite>)
or at the end of each row (with <cite>fmt</cite>). The default value is a newline
character.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test_filewrite.out&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">f</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fil</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">writeIData</span><span class="p">(</span><span class="n">fil</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.4f</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">size</span>
<span class="go">72</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="go">1  1.0000 0.0000 0.0000</span>
<span class="go">2  0.0000 1.0000 0.0000</span>
<span class="go">3  0.0000 0.0000 1.0000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="filewrite.writeText">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">writeText</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fil</span></em>, <em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#writeText"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.writeText" title="Permalink to this definition">¶</a></dt>
<dd><p>Write text to a file opened in text or binary mode</p>
<p>text can be either str or bytes. If not matching the open mode,
text is encoded to/decoded from utf-8</p>
</dd></dl>

<dl class="py function">
<dt id="filewrite.write_stl_asc">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">write_stl_asc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fil</span></em>, <em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#write_stl_asc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.write_stl_asc" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a collection of triangles to an ascii .stl file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a low level routine for use in writeSTL. It is not intended
to be used directly.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fil</strong> (<a class="reference internal" href="../glossary.html#term-file_like"><span class="xref std std-term">file_like</span></a>) – The file to write the data to. It can be any object supporting
the write(bytes) method, like a file opened in binary write mode.</p></li>
<li><p><strong>x</strong> (<em>(</em><em>ntri</em><em>,</em><em>4</em><em>,</em><em>3</em><em>) </em><em>float array</em>) – Array with 1 normal and 3 vertices and 1 normal per triangle.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="filewrite.write_stl_bin">
<code class="sig-prename descclassname">filewrite.</code><code class="sig-name descname">write_stl_bin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fil</span></em>, <em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">color</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/filewrite.html#write_stl_bin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#filewrite.write_stl_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a binary stl.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a low level routine for use in writeSTL. It is not intended
to be used directly.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fil</strong> (<a class="reference internal" href="../glossary.html#term-file_like"><span class="xref std std-term">file_like</span></a>) – The file to write the data to. It can be any object supporting
the write(bytes) method, like a file opened in binary write mode.</p></li>
<li><p><strong>x</strong> (<em>(</em><em>ntri</em><em>,</em><em>4</em><em>,</em><em>3</em><em>) </em><em>float array</em>) – Array with 1 normal and 3 vertices and 1 normal per triangle.</p></li>
<li><p><strong>color</strong> (<em>(</em><em>4</em><em>,</em><em>) </em><em>int array</em><em>, </em><em>optional</em>) – Four color components in the range 0..255: red, green, blue and alpha.
If specified, these will be stored in the header and <strong>may</strong> be
recognized by some other software.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyformex.fileread</span> <span class="kn">import</span> <span class="n">readSTL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;test_filewrite.stl&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">eltype</span><span class="o">=</span><span class="s1">&#39;quad4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;tri3-u&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">writeSTL</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">M</span><span class="o">.</span><span class="n">toFormex</span><span class="p">()</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">128</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">readSTL</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">[[[0.  0.  0.]</span>
<span class="go">  [1.  0.  0.]</span>
<span class="go">  [1.  1.  0.]]</span>

<span class="go"> [[1.  1.  0.]</span>
<span class="go">  [0.  1.  0.]</span>
<span class="go">  [0.  0.  0.]]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="go">[[0.  0.  1.]</span>
<span class="go"> [0.  0.  1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">(1.0, 0.0, 0.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="flatkeydb.html" title="23. flatkeydb — Flat Text File Database."
             >next</a> |</li>
        <li class="right" >
          <a href="fileread.html" title="21. fileread — Read geometry from files in a number of formats."
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pyFormex 3.3 documentation</a> &gt;</li>
          <li class="nav-item nav-item-1"><a href="../refman.html" >pyFormex reference manual</a> &gt;</li>
        <!--li class="nav-item nav-item-this"><a href=""><span class="section-number">22. </span><code class="xref py py-mod docutils literal notranslate"><span class="pre">filewrite</span></code> — Write geometry to file in a whole number of formats.</a></li--> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2023, Benedict Verhegghe.
    </span>
      Last updated on Mar 27, 2023.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.4.3.
    </span>
    </div>
  </body>
</html>