function getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let a=0;a<o.length;a++){const r=o[a].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}}return t}function LoadComment(e,t){$(`#comment-${e}`).load(`/comment/detail?urlhash=${e}&settings_slug=${t}`)}function LoadCommentList(e=1,t=!1){let o=$("#form-comment-create [name='app_name']").val(),a=$("#form-comment-create [name='model_name']").val(),r=$("#form-comment-create [name='object_id']").val(),n=$("#form-comment-create [name='settings_slug']").val(),m=$("#comment-list");m.load(`/comment/list?app_name=${o}&model_name=${a}&object_id=${r}&page=${e}&settings_slug=${n}`),t||$("html, body").animate({scrollTop:m.offset().top},700)}function LoadDeleteCommentForm(e){$("#comment-modal").load(`/comment/delete/${e}`)}function LoadCommentReactions(e){$(`#form-comment-react-${e} #comment-react-list`).load(`/comment/react?urlhash=${e}`)}function ResetCreateCommentForm(){$("#form-comment-create [name='content']").val("").height("124px"),$("#form-comment-create [name='is_spoiler']").prop("checked",!1)}function ResetEditCommentForm(e,t,o){let a=$(`#${e}`);a.find("textarea").val(t).removeClass("animate-[pulse_500ms_linear_infinite] border-textarea-border-empty-light dark:border-textarea-border-empty-dark").addClass("border-textarea-bg-light dark:border-textarea-bg-dark"),"True"===o?a.find("[name='is_spoiler']").prop("checked",!0):a.find("[name='is_spoiler']").prop("checked",!1)}function ResetDeleteCommentForm(){$("#comment-modal").html("")}function CreateComment(e,t){let o=$(`#${e}`),a=o.prop("method"),r=o.prop("action"),n={app_name:$("#form-comment-create [name='app_name']").val(),model_name:$("#form-comment-create [name='model_name']").val(),content_type:$("#form-comment-create [name='content_type']").val(),object_id:$("#form-comment-create [name='object_id']").val(),settings_slug:$("#form-comment-create [name='settings_slug']").val(),content:$(`#${e} [name='content']`).val(),is_spoiler:$(`#${e} [name='is_spoiler']`).is(":checked"),parent_id:$(`#${e} [name='parent_id']`).val()};$.ajax({type:a,url:r,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},data:n,success:function(){if(t&&document.getElementById("toast").classList.remove("hidden"),n.parent_id){LoadCommentList($(`#form-comment-reply-${n.parent_id} [name='page']`).val())}else ResetCreateCommentForm(),LoadCommentList()},error:function(){""!==$(`#${e} textarea`).val().trim()&&alert("ERROR in Creating Comment!")}})}function CheckEditTextarea(e){let t=$(`#${e} textarea`);""===t.val().trim()?t.removeClass("border-textarea-bg-light dark:border-textarea-bg-dark").addClass("border-textarea-border-empty-light dark:border-textarea-border-empty-dark"):t.removeClass("border-textarea-border-empty-light dark:border-textarea-border-empty-dark animate-[pulse_500ms_linear_infinite]").addClass("border-textarea-bg-light dark:border-textarea-bg-dark")}function EditComment(e,t,o){let a=$(`#${e}`),r=a.prop("method"),n=a.prop("action"),m={content:$(`#${e} [name='content']`).val(),is_spoiler:$(`#${e} [name='is_spoiler']`).is(":checked"),urlhash:e.replace("form-comment-edit-",""),settings_slug:t};$.ajax({type:r,url:n,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},data:m,success:function(e){o&&document.getElementById("toast").classList.remove("hidden"),LoadComment(e.urlhash,t)},error:function(){let t=$(`#${e} textarea`);""===t.val().trim()?t.removeClass("border-textarea-bg-light dark:border-textarea-bg-dark").addClass("animate-[pulse_500ms_linear_infinite] border-textarea-border-empty-light dark:border-textarea-border-empty-dark"):alert("ERROR in Creating Comment!")}})}function DeleteComment(e){let t=$(`#form-comment-delete-${e}`),o=t.prop("method"),a=t.prop("action");$.ajax({type:o,url:a,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},success:function(){ResetDeleteCommentForm(),LoadCommentList()},error:function(){alert("ERROR in Deleting Comment!")}})}function ReactComment(e,t){let o=$(`#form-comment-react-${e}`),a=o.prop("method"),r=o.prop("action");$.ajax({type:a,url:r,data:{urlhash:e,react_slug:t},headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":getCookie("csrftoken")},success:function(){LoadCommentReactions(e)}})}function CloseToast(){document.getElementById("toast").classList.add("hidden")}$(document).ready((function(){LoadCommentList(void 0,!0)}));