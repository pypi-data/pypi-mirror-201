"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[464],{1223:function(e,n,t){t.d(n,{K:function(){return j},w:function(){return k}});var i=t(95764),r=t(19065),s=t(81034),o=t(922),a=t(77843),l=t(31112),c=t(32030),d=t(12745),u=t(11831),p=t(85370),h=t(7838),f=t(325),x=t(74549),m=t(13065),g=t(9429),y=t(32289),v=["assetKey"],j=function(e){var n=e.assetKey,t=(0,s.Z)(e,v),o=(0,g.m)(),a=n.path.join("/"),x=f.useState(!1),j=(0,r.Z)(x,2),k=j[0],N=j[1],A=f.useRef(),S=f.useCallback((function(){A.current&&clearTimeout(A.current),o(a),N(!0),m.L.show({icon:"done",intent:"primary",message:"Copied asset key!"}),A.current=setTimeout((function(){N(!1)}),2e3)}),[o,a]),_=f.useMemo((function(){var e=[{text:"Assets",href:"/assets"}];return n.path.reduce((function(n,t){var i="".concat(n,"/").concat(encodeURIComponent(t));return e.push({text:t,href:i}),i}),"/assets"),e}),[n.path]);return(0,y.jsx)(l.m,(0,i.Z)({title:(0,y.jsxs)(c.x,{flex:{alignItems:"center",gap:4},style:{maxWidth:"600px",overflow:"hidden",marginBottom:4},children:[(0,y.jsx)(C,{items:_,currentBreadcrumbRenderer:function(e){var n=e.text;return(0,y.jsx)(d.X6,{children:n})},breadcrumbRenderer:function(e){var n=e.text,t=e.href;return(0,y.jsx)(d.X6,{children:(0,y.jsx)(b,{to:t||"#",children:n})})}}),(0,y.jsx)(u.u,{placement:"bottom",content:"Copy asset key",children:(0,y.jsx)(w,{onClick:S,children:(0,y.jsx)(p.JO,{name:k?"copy_to_clipboard_done":"copy_to_clipboard",color:h.w.Gray400})})})]})},t))},w=o.ZP.button.withConfig({displayName:"AssetPageHeader__CopyButton",componentId:"sc-1hk7vw2-0"})(["border:none;background:transparent;cursor:pointer;padding:3px;margin-top:2px;:focus{outline:none;}","{transition:background-color 100ms linear;}:hover ","{background-color:",";}"],p.a1,p.a1,h.w.Gray800),k=function(){return(0,y.jsx)(x.rU,{to:"/asset-groups",children:(0,y.jsxs)(c.x,{flex:{gap:4},children:[(0,y.jsx)(p.JO,{color:h.w.Link,name:"schema"}),"View global asset lineage"]})})},C=(0,o.ZP)(a.Oo).withConfig({displayName:"AssetPageHeader__BreadcrumbsWithSlashes",componentId:"sc-1hk7vw2-1"})(["& li:not(:first-child)::after{background:none;font-size:20px;font-weight:bold;color:#5c7080;content:'/';width:8px;line-height:16px;}"]),b=(0,o.ZP)(x.rU).withConfig({displayName:"AssetPageHeader__BreadcrumbLink",componentId:"sc-1hk7vw2-2"})(["color:",";:hover,:active{color:",";}"],h.w.Gray800,h.w.Gray800)},4934:function(e,n,t){t.d(n,{s:function(){return a},v:function(){return l}});var i,r,s=t(99500),o=t(3159),a=(0,o.Ps)(i||(i=(0,s.Z)(["\n  fragment AssetTableDefinitionFragment on AssetNode {\n    id\n    groupName\n    isSource\n    hasMaterializePermission\n    partitionDefinition {\n      description\n    }\n    description\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n  }\n"]))),l=(0,o.Ps)(r||(r=(0,s.Z)(["\n  fragment AssetTableFragment on Asset {\n    __typename\n    id\n    key {\n      path\n    }\n    definition {\n      id\n      ...AssetTableDefinitionFragment\n    }\n  }\n\n  ","\n"])),a)},24326:function(e,n,t){t.d(n,{fv:function(){return oe}});var i,r,s,o=t(59019),a=t(99500),l=t(19065),c=t(73701),d=t(3159),u=t(32030),p=t(87011),h=t(88863),f=t(42872),x=t(85370),m=t(8412),g=t(90428),y=t.n(g),v=t(54972),j=t.n(v),w=t(325),k=t(79082),C=t(12436),b=t(19102),N=t(44198),A=t(74386),S=t(50741),_=t(37099),z=t(95764),P=t(89646),O=t(50346),T=t(7838),Z=t(11831),E=t(75453),q=t(762),I=t(63579),R=t(82576),F=t(519),M=t(3580),L=t(86111),K=t(32289),W=function(e){var n=e.headerCheckbox,t=e.prefixPath,i=e.groups,r=e.checkedPaths,s=e.onToggleFactory,a=e.onWipe,l=e.showRepoColumn,c=e.view,d=void 0===c?"flat":c,u=w.useRef(null),p=Object.keys(i).length,h=(0,F.useVirtualizer)({count:p,getScrollElement:function(){return u.current},estimateSize:function(){return 64},overscan:10}),f=h.getTotalSize(),x=h.getVirtualItems(),m=w.useMemo((function(){return Object.keys(i).map((function(e){var n=[].concat((0,o.Z)(t),(0,o.Z)(JSON.parse(e))),r=i[e];return r.length>1||n.join("/")!==r[0].key.path.join("/")?{type:"folder",path:n,assets:r}:{type:"asset",path:n,asset:r[0]}}))}),[t,i]);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(L.R_,{headerCheckbox:n,view:d}),(0,K.jsx)("div",{style:{overflow:"hidden"},children:(0,K.jsx)(M.W2,{ref:u,children:(0,K.jsx)(M.Nh,{$totalHeight:f,children:x.map((function(e){var n=e.index,t=e.key,i=e.size,o=e.start,c=m[n],u=JSON.stringify(c.path),p="folder"===c.type?c.assets:[c.asset];return(0,K.jsx)(L.pN,{view:d,type:"folder"===c.type?"folder":c.asset.definition?"asset":"asset_non_sda",path:c.path,repoAddress:function(){if("folder"===c.type||!c.asset.definition)return null;var e=c.asset.definition.repository;return(0,_.kQ)(e.name,e.location.name)}(),showCheckboxColumn:!0,showRepoColumn:l,height:i,start:o,checked:r.has(u),onToggleChecked:s(u),onWipe:function(){return a(p)}},t)}))})})})]})},G=t(85358),J=t(95550),B=t.n(J),U=t(49148),$=t(8358),D=t(6466),V=t(39061),X=function(e){var n=e.assetKeys,t=e.isOpen,i=e.onClose,r=e.onComplete,s=e.requery,o=(0,U.D)(H,{variables:{assetKeys:n.map((function(e){return{path:e.path||[]}}))},refetchQueries:s}),a=(0,l.Z)(o,1)[0],c=function(){var e=(0,G.Z)(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a();case 4:r(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,K.jsxs)($.Vq,{isOpen:t,title:"Wipe materializations",onClose:i,style:{width:600},children:[(0,K.jsx)($.a7,{children:(0,K.jsxs)(D.Z,{direction:"column",spacing:16,children:[(0,K.jsx)("div",{children:"Are you sure you want to wipe materializations for these assets?"}),(0,K.jsx)("ul",{style:{paddingLeft:32,margin:0},children:n.map((function(e){var n=(0,V.ll)(e);return(0,K.jsx)("li",{style:{marginBottom:4},children:n},n)}))}),(0,K.jsx)("div",{children:"Assets defined only by their historical materializations will disappear from the Asset Catalog. Software-defined assets will remain unless their definition is also deleted."}),(0,K.jsx)("strong",{children:"This action cannot be undone."})]})}),(0,K.jsxs)($.cN,{topBorder:!0,children:[(0,K.jsx)(E.zx,{intent:"none",onClick:i,children:"Cancel"}),(0,K.jsx)(E.zx,{intent:"danger",onClick:c,children:"Wipe"})]})]})},H=(0,d.Ps)(i||(i=(0,a.Z)(["\n  mutation AssetWipeMutation($assetKeys: [AssetKeyInput!]!) {\n    wipeAssets(assetKeys: $assetKeys) {\n      ... on AssetWipeSuccess {\n        assetKeys {\n          path\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),k.B),Q=t(52165),Y=function(e){var n=e.assets,t=e.actionBarComponents,i=e.refreshState,r=e.prefixPath,s=e.displayPathForAsset,a=e.requery,c=e.searchPath,d=e.searchGroup,p=e.view,h=w.useState(),f=(0,l.Z)(h,2),m=f[0],g=f[1],y={};n.forEach((function(e){var n=JSON.stringify(s(e));y[n]=[].concat((0,o.Z)(y[n]||[]),[e])}));var v=(0,R.a)(Object.keys(y)),j=(0,l.Z)(v,2),k=j[0].checkedIds,C=j[1],N=C.onToggleFactory,A=C.onToggleAll,S=[],_=[],q=Object.keys(y).sort();q.forEach((function(e){k.has(e)&&(_.push(e),S.push.apply(S,(0,o.Z)(y[e]||[])))}));return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(u.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,K.jsxs)(u.x,{background:T.w.White,flex:{alignItems:"center",gap:12},padding:{vertical:8,left:24,right:12},style:{position:"sticky",top:0,zIndex:1},children:[t,(0,K.jsx)("div",{style:{flex:1}}),(0,K.jsx)(b.xi,{refreshState:i}),(0,K.jsxs)(u.x,{flex:{alignItems:"center",gap:8},children:[S.some((function(e){return!e.definition}))?(0,K.jsx)(Z.u,{content:"One or more selected assets are not software-defined and cannot be launched directly.",children:(0,K.jsx)(E.zx,{intent:"primary",icon:(0,K.jsx)(x.JO,{name:"materialization"}),disabled:!0,children:S.length>1?"Materialize (".concat(S.length.toLocaleString(),")"):"Materialize"})}):(0,K.jsx)(Q.XE,{scope:{selected:S.map((function(e){return(0,z.Z)((0,z.Z)({},e.definition),{},{assetKey:e.key})}))}}),(0,K.jsx)(ee,{selected:S,clearSelection:function(){return A(!1)}})]})]}),n.length?(0,K.jsx)(W,{headerCheckbox:(0,K.jsx)(O.X,{indeterminate:_.length>0&&_.length!==q.length,checked:_.length>0&&_.length===q.length,onChange:function(e){e.target instanceof HTMLInputElement&&A(_.length!==q.length)}}),prefixPath:r,groups:y,checkedPaths:k,onToggleFactory:N,showRepoColumn:!0,view:p,onWipe:function(e){return g(e.map((function(e){return e.key})))}}):c?(0,K.jsx)(u.x,{padding:{top:64},children:(0,K.jsx)(P.t,{icon:"search",title:"No matching assets",description:d?(0,K.jsxs)("div",{children:["No assets matching ",(0,K.jsx)("strong",{children:c})," were found in"," ",(0,K.jsx)("strong",{children:d.groupName})]}):(0,K.jsxs)("div",{children:["No assets matching ",(0,K.jsx)("strong",{children:c})," were found"]})})}):(0,K.jsx)(u.x,{padding:{top:20},children:(0,K.jsx)(P.t,{icon:"search",title:"No assets",description:d?(0,K.jsxs)("div",{children:["No assets were found in ",(0,K.jsx)("strong",{children:d.groupName})]}):"No assets were found"})})]}),(0,K.jsx)(X,{assetKeys:m||[],isOpen:!!m,onClose:function(){return g(void 0)},onComplete:function(){return g(void 0)},requery:a})]})},ee=w.memo((function(e){var n=e.selected,t=e.clearSelection,i=e.requery,r=w.useState(!1),s=(0,l.Z)(r,2),o=s[0],a=s[1];if(!(0,I.WB)().permissions.canWipeAssets)return null;var c=0===n.length;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(q.J,{position:"bottom-right",content:(0,K.jsx)(m.v2,{children:(0,K.jsx)(m.sN,{text:"Wipe materializations",onClick:function(){return a(!0)},icon:(0,K.jsx)(x.JO,{name:"delete",color:c?T.w.Gray600:T.w.Red500}),disabled:c,intent:"danger"})}),children:(0,K.jsx)(E.zx,{icon:(0,K.jsx)(x.JO,{name:"expand_more"})})}),(0,K.jsx)(X,{assetKeys:n.map((function(e){return e.key})),isOpen:o,onClose:function(){return a(!1)},onComplete:function(){a(!1),t()},requery:i})]})})),ne=t(4934),te=function(e){var n=e.prefixPath;return(0,K.jsx)(P.t,{icon:"asset",title:"Assets",description:(0,K.jsxs)("p",{children:[n&&n.length?"There are no matching materialized assets with the specified asset key. ":"There are no known materialized assets. ","Any asset keys that have been specified with an ",(0,K.jsx)("code",{children:"AssetMaterialization"})," during a pipeline run will appear here. See the"," ",(0,K.jsx)("a",{href:"https://docs.dagster.io/_apidocs/ops#dagster.AssetMaterialization",children:"AssetMaterialization documentation"})," ","for more information."]})})},ie=t(13172),re=t(76314),se=function(e){return"flat"===e||"directory"===e?e:"flat"};var oe=function(e){var n=e.prefixPath,t=e.setPrefixPath,i=e.groupSelector,r=(0,re.U)("AssetViewPreference",se),s=(0,l.Z)(r,2),a=s[0],d=s[1],f=(0,N.q)({queryKey:"q"}),x=(0,l.Z)(f,2),m=x[0],g=x[1],v=(0,N.q)({queryKey:"g",decode:function(e){return e.group?JSON.parse(e.group):null},encode:function(e){return{group:e?JSON.stringify(e):void 0}}}),j=(0,l.Z)(v,2),k=j[0],A=j[1],_=(m||"").replace(/(( ?> ?)|\.|\/)/g,"/").toLowerCase().trim(),z=function(e){var n=(0,c.a)(le,{skip:!!e,notifyOnNetworkStatusChange:!0}),t=(0,c.a)(ce,{skip:!e,variables:{group:e},notifyOnNetworkStatusChange:!0});return w.useMemo((function(){var i;if(e){var r,s=null===(r=t.data)||void 0===r?void 0:r.assetNodes;return{query:t,error:void 0,assets:null===s||void 0===s?void 0:s.map(de)}}var o=null===(i=n.data)||void 0===i?void 0:i.assetsOrError;return{query:n,error:"PythonError"===(null===o||void 0===o?void 0:o.__typename)?o:void 0,assets:"AssetConnection"===(null===o||void 0===o?void 0:o.__typename)?o.nodes:void 0}}),[n,t,e])}(i),P=z.assets,O=z.query,T=z.error,Z=(0,ie.f)(_,P||[]),E=w.useMemo((function(){return Z.filter((function(e){return!k||y()(ue(e),k)}))}),[Z,k]),q="flat"===a?function(e,n){return{displayed:e,displayPathForAsset:function(e){return e.key.path}}}(E):function(e,n){var t=function(e){return e.key.path.slice(n.length,n.length+1)},i=e.filter((function(e){return e.key.path.join(",").startsWith(n.join(","))})),r=Array.from(new Set(i.map((function(e){return JSON.stringify(t(e))})))).map((function(e){return JSON.parse(e)})).sort();return{displayPathForAsset:t,displayed:pe(i,r.map((function(e){return[].concat((0,o.Z)(n),(0,o.Z)(e))})))}}(E,n),I=q.displayPathForAsset,R=q.displayed,F=(0,b.C4)(O,b.dT);return w.useEffect((function(){"directory"!==a&&n.length&&d("directory")}),[a,d,n]),T?(0,K.jsx)(C.T9,{error:T}):P?P.length?(0,K.jsx)(Y,{view:a,assets:R,actionBarComponents:(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(p.h,{activeItems:new Set([a]),buttons:[{id:"flat",icon:"view_list",tooltip:"List view"},{id:"directory",icon:"folder",tooltip:"Folder view"}],onClick:function(e){d(e),"flat"===e&&n.length&&t([])}}),(0,K.jsx)(h.oi,{value:m||"",style:{width:"30vw",minWidth:150,maxWidth:400},placeholder:n.length?"Filter asset keys in ".concat(n.join("/"),"\u2026"):"Filter asset keys\u2026",onChange:function(e){return g(e.target.value)}}),i?void 0:(0,K.jsx)(ae,{assets:P,value:k,onChange:A})]}),refreshState:F,prefixPath:n||[],searchPath:_,searchGroup:k,displayPathForAsset:I,requery:function(e){return[{query:le}]}}):(0,K.jsx)(u.x,{padding:{vertical:64},children:(0,K.jsx)(te,{prefixPath:n})}):(0,K.jsx)(S.T,{purpose:"page"})},ae=function(e){var n=e.assets,t=e.value,i=e.onChange,r=w.useMemo((function(){return j()((n||[]).map(ue).filter((function(e){return!!e})),(function(e){return JSON.stringify(e)})).sort((function(e,n){return e.groupName.localeCompare(n.groupName)}))}),[n]),s=w.useMemo((function(){var e={};return r.forEach((function(n){return e[n.groupName]=e.hasOwnProperty(n.groupName)})),e}),[r]);return(0,K.jsx)(f.U5,{selectedItem:t,items:r,inputProps:{style:{width:220},placeholder:"Filter asset groups\u2026",rightElement:t?(0,K.jsx)(A.C,{onClick:function(){return i(null)},style:{marginTop:5,marginRight:4},children:(0,K.jsx)(x.JO,{name:"cancel"})}):void 0},inputValueRenderer:function(e){return e.groupName},itemPredicate:function(e,n){return 0===e.length||n.groupName.includes(e)},itemsEqual:y(),itemRenderer:function(e,n){return(0,K.jsx)(m.sN,{active:n.modifiers.active,onClick:n.handleClick,text:(0,K.jsxs)(K.Fragment,{children:[e.groupName,s[e.groupName]?(0,K.jsx)("span",{style:{opacity:.5,paddingLeft:4},children:(0,_.At)(e.repositoryName,e.repositoryLocationName)}):void 0]})},JSON.stringify(e))},noResults:(0,K.jsx)(m.sN,{disabled:!0,text:"No asset groups"}),onItemSelect:i})},le=(0,d.Ps)(r||(r=(0,a.Z)(["\n  query AssetCatalogTableQuery {\n    assetsOrError {\n      __typename\n      ... on AssetConnection {\n        nodes {\n          id\n          ...AssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),ne.v,k.B),ce=(0,d.Ps)(s||(s=(0,a.Z)(["\n  query AssetCatalogGroupTableQuery($group: AssetGroupSelector) {\n    assetNodes(group: $group) {\n      id\n      ...AssetCatalogGroupTableNode\n    }\n  }\n\n  fragment AssetCatalogGroupTableNode on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    ...AssetTableDefinitionFragment\n  }\n\n  ","\n"])),ne.s);function de(e){return{__typename:"Asset",id:e.id,key:e.assetKey,definition:e}}function ue(e){return e.definition&&e.definition.groupName?{groupName:e.definition.groupName,repositoryName:e.definition.repository.name,repositoryLocationName:e.definition.repository.location.name}:null}var pe=function(e,n){return e.filter((function(e){return n.some((function(n){return n.every((function(n,t){return n===e.key.path[t]}))}))}))}},13172:function(e,n,t){t.d(n,{f:function(){return o},h:function(){return a}});var i=t(325),r=t(39061),s=function(e){return i.useMemo((function(){return(e||"").replace(/(( ?> ?)|\.|\/)/g,"/").toLowerCase().trim()}),[e])},o=function(e,n){var t=s(e);return i.useMemo((function(){return t?n.filter((function(e){return(0,r.Je)(e.key).toLowerCase().includes(t)})):n}),[n,t])},a=function(e,n){var t=s(e);return i.useMemo((function(){return t?n.filter((function(e){return(0,r.Je)(e.assetKey).toLowerCase().includes(t)})):n}),[n,t])}},95968:function(e,n,t){t.d(n,{T:function(){return u},f:function(){return p}});var i=t(59019),r=t(47427),s=t(16798),o=t(32030),a=t(50346),l=(t(325),t(1520)),c=t(54920),d=t(32289);function u(e){var n,t,i=(n={},(0,s.Z)(n,c.AB.SUCCESS,0),(0,s.Z)(n,c.AB.SUCCESS_MISSING,0),(0,s.Z)(n,c.AB.MISSING,0),(0,s.Z)(n,c.AB.FAILURE,0),(0,s.Z)(n,c.AB.QUEUED,0),(0,s.Z)(n,c.AB.STARTED,0),n),o=(0,r.Z)(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;i[a.state]=(i[a.state]||0)+1}}catch(l){o.e(l)}finally{o.f()}return i}var p=function(e){var n=e.counts,t=e.value,r=e.onChange,s=e.allowed,u=e.disabled;return(0,d.jsx)(o.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:s.map((function(e){return(0,d.jsx)(a.X,{"data-testid":(0,l.N)("partition-state-".concat(e,"-checkbox")),disabled:u,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!u,label:"".concat((0,c.qg)(e)," (").concat(n[e],")"),onChange:function(){return r(t.includes(e)?t.filter((function(n){return n!==e})):[].concat((0,i.Z)(t),[e]))}},e)}))})}},78072:function(e,n,t){t.d(n,{i:function(){return f}});var i=t(19065),r=t(11831),s=t(75453),o=t(85370),a=t(8358),l=t(325),c=t(63579),d=t(12436),u=t(17235),p=t(73362),h=t(32289),f=function(e){var n=e.label,t=void 0===n?"Reload all":n,f=(0,c.WB)(),x=f.permissions.canReloadWorkspace,m=f.disabledReasons,g=(0,u.Dc)({scope:"workspace",reloadFn:u.rL}),y=g.reloading,v=g.tryReload,j=g.error,w=g.errorLocationId,k=l.useState(!!j),C=(0,i.Z)(k,2),b=C[0],N=C[1];return l.useEffect((function(){return N(!!j)}),[j]),x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.zx,{onClick:v,icon:(0,h.jsx)(o.JO,{name:"refresh"}),loading:y,intent:"none",children:t}),w?(0,h.jsx)(p.V,{error:j,location:w,reloading:y,onTryReload:v,onDismiss:function(){return N(!1)},isOpen:b}):(0,h.jsxs)(a.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:b,children:[(0,h.jsx)(a.a7,{children:j&&(0,h.jsx)(d.T9,{error:j})}),(0,h.jsx)(a.cN,{children:(0,h.jsx)(s.zx,{onClick:function(){return N(!1)},children:"Dismiss"})})]})]}):(0,h.jsx)(r.u,{content:m.canReloadWorkspace,children:(0,h.jsx)(s.zx,{icon:(0,h.jsx)(o.JO,{name:"refresh"}),disabled:!0,intent:"none",children:t})})}},86111:function(e,n,t){t.d(n,{R_:function(){return J},XC:function(){return B},pN:function(){return W}});var i,r=t(99500),s=t(19065),o=t(922),a=t(65880),l=t(3159),c=t(7838),d=t(50346),u=t(32030),p=t(12745),h=t(85370),f=t(325),x=t(74549),m=t(11540),g=t(79714),y=t(39061),v=t(64424),j=t(762),w=t(8412),k=t(11831),C=t(34595),b=t(75453),N=t(63579),A=t(90933),S=t(25582),_=t(52165),z=t(77171),P=t(32289),O=function(e){var n,t=e.repoAddress,i=e.asset,r=e.onWipe,s=(0,N.xz)(null===t||void 0===t?void 0:t.location).permissions,o=s.canWipeAssets,a=s.canLaunchPipelineExecution,l=i.key.path,c=(0,_.DO)(),d=c.onClick,u=c.loading,p=c.launchpadElement;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(j.J,{position:"bottom-right",content:(0,P.jsxs)(w.v2,{children:[(0,P.jsx)(k.u,{content:a?"Shift+click to add configuration":"You do not have permission to materialize assets",placement:"left",display:"block",useDisabledButtonTooltipFix:!0,children:(0,P.jsx)(w.sN,{text:"Materialize",icon:u?(0,P.jsx)(C.$,{purpose:"body-text"}):"materialization",disabled:!a||u,onClick:function(e){return d([i.key],e)}})}),(0,P.jsx)(A.U,{text:"Show in group",to:t&&null!==(n=i.definition)&&void 0!==n&&n.groupName?(0,S.$U)(t,"/asset-groups/".concat(i.definition.groupName)):"",disabled:!(null!==i&&void 0!==i&&i.definition),icon:"asset_group"}),(0,P.jsx)(A.U,{text:"View neighbors",to:(0,z.p)({path:l},{view:"lineage",lineageScope:"neighbors"}),disabled:!(null!==i&&void 0!==i&&i.definition),icon:"graph_neighbors"}),(0,P.jsx)(A.U,{text:"View upstream assets",to:(0,z.p)({path:l},{view:"lineage",lineageScope:"upstream"}),disabled:!(null!==i&&void 0!==i&&i.definition),icon:"graph_upstream"}),(0,P.jsx)(A.U,{text:"View downstream assets",to:(0,z.p)({path:l},{view:"lineage",lineageScope:"downstream"}),disabled:!(null!==i&&void 0!==i&&i.definition),icon:"graph_downstream"}),(0,P.jsx)(w.sN,{text:"Wipe materializations",icon:"delete",disabled:!r||!o,intent:"danger",onClick:function(){return o&&r&&r([i])}})]}),children:(0,P.jsx)(b.zx,{icon:(0,P.jsx)(h.JO,{name:"expand_more"})})}),p]})},T=t(86655),Z=t(4934),E=t(90815),q=t(72572),I=t(30057),R=t(68156),F=t(3580),M=t(16279),L="1.3fr 1fr 1fr 80px",K="76px 1.3fr 1.3fr 1fr 1fr 80px",W=function(e){var n,t=e.path,i=e.type,r=e.repoAddress,o=e.start,l=e.height,m=e.checked,v=e.onToggleChecked,j=e.onWipe,w=e.showCheckboxColumn,k=void 0!==w&&w,C=e.showRepoColumn,b=e.view,N=void 0===b?"flat":b,A=(0,a.t)($,{variables:{input:{path:t}}}),_=(0,s.Z)(A,2),Z=_[0],L=_[1];(0,M.v5)(Z);var K=L.data,W=f.useMemo((function(){return"Asset"===(null===K||void 0===K?void 0:K.assetOrError.__typename)?K.assetOrError:null}),[K]),J=f.useMemo((function(){if(null!==W&&void 0!==W&&W.definition&&null!==K&&void 0!==K&&K.assetsLatestInfo){var e=K.assetsLatestInfo[0];if(e)return(0,y.dZ)(W.definition,e)}return null}),[K,W]),B=(0,z.p)({path:t});return(0,P.jsx)(F.X2,{$height:l,$start:o,children:(0,P.jsxs)(U,{border:{side:"bottom",width:1,color:c.w.KeylineGray},$showRepoColumn:C,children:[k?(0,P.jsx)(F.E5,{children:(0,P.jsx)(d.X,{checked:m,onChange:function(e){if(v&&e.target instanceof HTMLInputElement){var n=e.target.checked,t=e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift");v({checked:n,shiftKey:t})}}})}):null,(0,P.jsxs)(F.E5,{children:[(0,P.jsxs)(u.x,{flex:{alignItems:"center"},children:[(0,P.jsx)("div",{style:{flex:1,minWidth:0},children:(0,P.jsx)(T.R,{path:"folder"===i||"directory"===N?t.slice(-1):t,url:B,isGroup:"folder"===i,icon:i,textStyle:"middle-truncate"})}),(null===W||void 0===W?void 0:W.definition)&&(0,P.jsx)(q.hG,{reduceColor:!0,reduceText:!0,definition:W.definition,style:{position:"relative"}})]}),(0,P.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,P.jsx)(p.YS,{style:{color:c.w.Gray500,whiteSpace:"nowrap"},children:null===W||void 0===W||null===(n=W.definition)||void 0===n?void 0:n.description})})]}),C?(0,P.jsx)(F.E5,{children:r?(0,P.jsxs)(u.x,{flex:{direction:"column",gap:4},style:{maxWidth:"100%",overflow:"hidden"},children:[(0,P.jsx)(I.b,{repoAddress:r,showIcon:!0,showRefresh:!1}),null!==W&&void 0!==W&&W.definition&&null!==W&&void 0!==W&&W.definition.groupName?(0,P.jsx)(x.rU,{to:(0,S.$U)(r,"/asset-groups/".concat(W.definition.groupName)),children:(0,P.jsxs)(u.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,P.jsx)(h.JO,{color:c.w.Gray400,name:"asset_group"}),W.definition.groupName]})}):null]}):(0,P.jsx)("span",{children:"\u2013"})}):null,(0,P.jsx)(F.E5,{children:null!==J&&void 0!==J&&J.lastMaterialization?(0,P.jsxs)(u.x,{flex:{direction:"column"},children:[(0,P.jsxs)(u.x,{flex:{gap:4,alignItems:"flex-start",justifyContent:"space-between"},children:[(0,P.jsx)(g.Tj,{runId:J.lastMaterialization.runId,event:{stepKey:J.stepKey,timestamp:J.lastMaterialization.timestamp},children:(0,P.jsx)(R.v,{timestamp:Number(J.lastMaterialization.timestamp)/1e3,timeFormat:{showSeconds:!1,showTimezone:!1}})}),(0,P.jsx)("div",{style:{marginTop:"-2px"},children:(0,P.jsx)(E.T3,{liveData:J})})]}),J.partitionStats&&(0,P.jsx)(G,{stats:J.partitionStats})]}):(0,P.jsx)(M.mq,{queryResult:L,noneString:"\u2013"})}),(0,P.jsx)(F.E5,{children:J?(0,P.jsx)(g.o9,{liveData:J,includeFreshness:!0,includeRunStatus:!0}):(0,P.jsx)(M.mq,{queryResult:L,noneString:"\u2013"})}),(0,P.jsx)(F.E5,{children:W?(0,P.jsx)(O,{repoAddress:r,asset:W,onWipe:j}):null})]})})},G=function(e){var n=e.stats,t=n.numMaterialized,i=n.numPartitions,r=i-t;return(0,P.jsx)("span",{children:r>0?"".concat(i.toLocaleString()," Partitions (").concat(r.toLocaleString()," missing)"):"".concat(i.toLocaleString()," Partitions")})},J=function(e){var n=e.headerCheckbox,t=e.view;return(0,P.jsxs)(u.x,{border:{side:"horizontal",width:1,color:c.w.KeylineGray},style:{display:"grid",gridTemplateColumns:K,height:"32px",fontSize:"12px",color:c.w.Gray600},children:[(0,P.jsx)(F.qN,{children:n}),(0,P.jsx)(F.qN,{children:"flat"===t?"Asset name":"Asset key prefix"}),(0,P.jsx)(F.qN,{children:"Repository / Asset group"}),(0,P.jsx)(F.qN,{children:"Materialized"}),(0,P.jsx)(F.qN,{children:"Latest run"}),(0,P.jsx)(F.qN,{})]})},B=function(e){var n=e.nameLabel;return(0,P.jsxs)(u.x,{border:{side:"horizontal",width:1,color:c.w.KeylineGray},style:{display:"grid",gridTemplateColumns:L,height:"32px",fontSize:"12px",color:c.w.Gray600},children:[(0,P.jsx)(F.qN,{children:n}),(0,P.jsx)(F.qN,{children:"Materialized"}),(0,P.jsx)(F.qN,{children:"Latest run"}),(0,P.jsx)(F.qN,{})]})},U=(0,o.ZP)(u.x).withConfig({displayName:"VirtualizedAssetRow__RowGrid",componentId:"sc-12bv5lt-0"})(["display:grid;grid-template-columns:",";height:100%;"],(function(e){return e.$showRepoColumn?K:L})),$=(0,l.Ps)(i||(i=(0,r.Z)(["\n  query SingleAssetQuery($input: AssetKeyInput!) {\n    assetOrError(assetKey: $input) {\n      ... on Asset {\n        id\n        assetMaterializations(limit: 1) {\n          runId\n          timestamp\n        }\n        definition {\n          id\n          computeKind\n          ...AssetNodeLiveFragment\n        }\n        ...AssetTableFragment\n      }\n    }\n    assetsLatestInfo(assetKeys: [$input]) {\n      ...AssetLatestInfoFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),m.oR,Z.v,v.m)}}]);
//# sourceMappingURL=464.b080068e.chunk.js.map