"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[598],{9429:function(n,e,t){t.d(e,{m:function(){return o}});var r=t(325),o=function(){var n=navigator.clipboard,e=r.useRef(null);return r.useEffect((function(){return n||(e.current=document.createElement("input"),e.current.style.position="fixed",e.current.style.top="-10000px",document.body.appendChild(e.current)),function(){e.current&&document.body.removeChild(e.current)}}),[n]),r.useCallback((function(t){n?n.writeText(t):e.current&&(e.current.value=t,e.current.select(),document.execCommand("copy"))}),[n])}},80342:function(n,e,t){t.d(e,{Qq:function(){return v}});var r=t(47427),o=t(16798),u=t(32030),i=t(325),a=t(13065),l=t(9429),c=t(39061),s=t(28064),f=t(32289),p=new Set([s.H.ScheduleName,s.H.SensorName,s.H.Backfill]),d=(0,o.Z)({},s.H.SolidSelection,s.H.OpSelection),v=i.memo((function(n){var e=n.tags,t=n.onAddTag,o=n.mode,v=(0,l.m)(),g=i.useMemo((function(){return{label:"Copy tag",onClick:function(n){v("".concat(n.key,":").concat(n.value)),a.L.show({intent:"success",message:"Copied tag!"})}}}),[v]),x=i.useMemo((function(){return t?{label:"Add tag to filter",onClick:function(n){t({token:"tag",value:"".concat(n.key,"=").concat(n.value)})}}:null}),[t]),h=function(n){var e,t=[g];return x&&((e=n.key)!==s.H.SolidSelection&&e!==s.H.OpSelection)&&t.push(x),t.filter((function(n){return!!n}))},y=i.useMemo((function(){var n,t=[],o=[],u=e.map((function(n){return{key:n.key,value:n.value}})),i=(0,r.Z)(u);try{for(i.s();!(n=i.n()).done;){var a=n.value,l=a.key;d.hasOwnProperty(l)&&(a.key=d[l]),(!a.value.startsWith(c.u1)||l!==s.H.PartitionSet&&l!==s.H.StepSelection)&&(p.has(l)?t.push(a):o.push(a))}}catch(f){i.e(f)}finally{i.f()}return[].concat(t,o)}),[e]);return e.length?(0,f.jsxs)(u.x,{flex:{direction:"row",wrap:"wrap",gap:4},children:[o?(0,f.jsx)(s.i,{tag:{key:"mode",value:o}}):null,y.map((function(n,e){return(0,f.jsx)(s.i,{tag:n,actions:h(n)},e)}))]}):null}))},45302:function(n,e,t){t.d(e,{oD:function(){return m},it:function(){return k},VH:function(){return w},nr:function(){return b}});var r,o,u=t(99500),i=t(19065),a=t(47427),l=t(65880),c=t(3159),s=t(57615),f=t(41332),p=t.n(f),d=t(325),v=t(69305),g=t(44198),x=t(76336),h=t(32289),y=[{token:"id",values:function(){return[]}},{token:"status",values:function(){return[]}},{token:"pipeline",values:function(){return[]}},{token:"job",values:function(){return[]}},{token:"tag",values:function(){return[]}},{token:"snapshotId",values:function(){return[]}}];function m(n){return(0,g.q)(d.useMemo((function(){return{encode:function(n){return{q:(0,s.cJ)(n),cursor:void 0}},decode:function(e){var t=e.q,r=void 0===t?[]:t;return(0,s.TC)(r,y).filter((function(e){return!e.token||!n||n.includes(e.token)}))}}}),[n]))}function k(n){return"/runs?".concat(p().stringify({q:(0,s.cJ)(n)},{arrayFormat:"brackets"}))}function w(n){if(!n[0])return{};var e,t={},r=(0,a.Z)(n);try{for(r.s();!(e=r.n()).done;){var o=e.value;if("pipeline"===o.token||"job"===o.token)t.pipelineName=o.value;else if("id"===o.token)t.runIds=t.runIds||[],t.runIds.push(o.value);else if("status"===o.token)t.statuses=t.statuses||[],t.statuses.push(o.value);else if("snapshotId"===o.token)t.snapshotId=o.value;else if("tag"===o.token){var u=o.value.split("="),l=(0,i.Z)(u,2),c=l[0],s=l[1],f=void 0===s?"":s;t.tags?t.tags.push({key:c,value:f}):t.tags=[{key:c,value:f}]}}}catch(p){r.e(p)}finally{r.f()}return t}var b=function(n){var e,t,r=n.loading,o=n.tokens,u=n.onChange,c=n.enabledFilters,f=(0,x.vl)().options,p=d.useState(),g=(0,i.Z)(p,2),y=g[0],m=g[1],k=(0,l.t)(C),w=(0,i.Z)(k,2),b=w[0],S=w[1].data,Z=(0,l.t)(T,{variables:{tagKeys:y?[y]:[]}}),E=(0,i.Z)(Z,2),_=E[0],j=E[1].data;d.useEffect((function(){y&&_()}),[y,_]);var O=function(n,e,t,r,o){var u,i=new Set,l=new Set,c=(0,a.Z)(n);try{for(c.s();!(u=c.n()).done;){var s,f=u.value.repository,p=(0,a.Z)(f.pipelines);try{for(p.s();!(s=p.n()).done;){var d=s.value;d.isJob?l.add(d.name):i.add(d.name)}}catch(x){p.e(x)}finally{p.f()}}}catch(x){c.e(x)}finally{c.f()}var g=[{token:"id",values:function(){return[]}},{token:"status",values:function(){return Object.keys(v.VOA)}},{token:"pipeline",values:function(){return Array.from(i)}},{token:"job",values:function(){return Array.from(l)}},{token:"tag",values:function(){return t?(r||[]).filter((function(n){return n.key===t})).map((function(n){return n.values.map((function(n){return"".concat(t,"=").concat(n)}))})).flat():(e||[]).map((function(n){return"".concat(n)}))},textOnly:!t},{token:"snapshotId",values:function(){return[]}}];return o?g.filter((function(n){return o.includes(n.token)})):g}(f,"RunTagKeys"===(null===S||void 0===S||null===(e=S.runTagKeysOrError)||void 0===e?void 0:e.__typename)?S.runTagKeysOrError.keys:[],y,"RunTags"===(null===j||void 0===j||null===(t=j.runTagsOrError)||void 0===t?void 0:t.__typename)?j.runTagsOrError.tags:[],c),P=(0,s.TC)((0,s.cJ)(o),O),K=d.useCallback((function(){return b()}),[b]);return(0,h.jsx)(s.Gf,{values:P,onChange:function(n){return u(n)},onFocus:K,onTextChange:function(n){var e;if(n.startsWith("tag:")){var t=n.slice(4);"RunTagKeys"===(null===S||void 0===S||null===(e=S.runTagKeysOrError)||void 0===e?void 0:e.__typename)&&S.runTagKeysOrError.keys.includes(t)&&m(t)}},suggestionProviders:O,suggestionProvidersFilter:function(n,e){var t,r=[],o=(0,a.Z)(e);try{for(o.s();!(t=o.n()).done;){var u=t.value.token;u&&r.push(u)}}catch(c){o.e(c)}finally{o.f()}if(r.includes("id"))return[];var i=new Set(["id","job","pipeline","snapshotId"]),l=r.filter((function(n){return i.has(n)}));return n.filter((function(n){return!n.token||!l.includes(n.token)}))},loading:r})},C=(0,c.Ps)(r||(r=(0,u.Z)(["\n  query RunTagKeysQuery {\n    runTagKeysOrError {\n      ... on RunTagKeys {\n        keys\n      }\n    }\n  }\n"]))),T=(0,c.Ps)(o||(o=(0,u.Z)(["\n  query RunTagValuesQuery($tagKeys: [String!]!) {\n    runTagsOrError(tagKeys: $tagKeys) {\n      __typename\n      ... on RunTags {\n        tags {\n          key\n          values\n        }\n      }\n    }\n  }\n"])))},57615:function(n,e,t){t.d(e,{HE:function(){return x},TC:function(){return h},WD:function(){return y},HY:function(){return m},cJ:function(){return k},jP:function(){return w},Gf:function(){return b}});var r=t(47427),o=t(59019),u=t(19065),i=t(922),a=t(77843),l=t(325),c=t(32030),s=t(7838),f=t(8412),p=t(762),d=t(34595),v=t(32289);function g(n,e){return e.find((function(e){return e.token&&e.token.toLowerCase()===n.toLowerCase()}))}var x=function(n,e){if(""===n)return[];var t=n.split(",");return h(t,e)},h=function(n,e){return n.map((function(n){return y(n,e)}))};function y(n,e){var t=function(n){var e=n.indexOf(":");return-1===e?[n,""]:[n.slice(0,e),n.slice(e+1)]}(n),r=(0,u.Z)(t,2),o=r[0],i=r[1];return g(o,e)&&o&&i?{token:o,value:i}:{value:n}}var m=function(n){return n.token?"".concat(n.token,":").concat(n.value):n.value},k=function(n){return n.filter((function(n){return""!==n.value})).map(m)},w=function(n){return k(n).join(",")},b=function(n){var e,t,i=n.suggestionProviders,a=n.suggestionProvidersFilter,s=n.values,x=n.maxValues,h=n.onChange,m=n.onChangeBeforeCommit,k=n.onFocus,w=n.onTextChange,b=n.placeholder,S=n.addOnBlur,Z=n.loading,E=n.className,_=n.fullwidth,j=n.suggestionRenderer,O=l.useState(!1),P=(0,u.Z)(O,2),K=P[0],I=P[1],D=l.useState(null),H=(0,u.Z)(D,2),R=H[0],M=H[1],F=l.useState(""),G=(0,u.Z)(F,2),q=G[0],A=G[1],N=l.useMemo((function(){return(0,o.Z)(s)}),[s]),V=y(q,i);e=V,(t=N[N.length-1])&&e.token===t.token&&e.value===t.value&&N.pop();var W=void 0!==x&&N.length>=x,B=a?a(i,N):i,J=q.split(":"),L=(J[J.length-1]||"").toLowerCase(),$=l.useMemo((function(){if(W)return[];var n=[],e=function(n,e){return!n||e.text.toLowerCase().split(":").some((function(e){return e.includes(n)}))},t=function(n){var t=n.suggestionFilter||e;return n.values().filter((function(e){return!N.some((function(t){return t.token===n.token&&t.value===e}))})).map((function(e){return{text:null!==n&&void 0!==n&&n.token?"".concat(n.token,":").concat(e):e,final:!n.textOnly}})).filter((function(n){return t(L,n)})).slice(0,100)};if(1===J.length){n=B.reduce((function(n,e){return e.token?[].concat((0,o.Z)(n),[{text:"".concat(e.token,":"),final:!1}]):n}),[]).filter((function(n){return e(L,n)}));var u,i=(0,r.Z)(B);try{for(i.s();!(u=i.n()).done;){var a,l=u.value;if(!l.token||q.length>0)(a=n).push.apply(a,(0,o.Z)(t(l)))}}catch(f){i.e(f)}finally{i.f()}}if(2===J.length){var c=J[0];if(c){var s=g(c,B);n=s?t(s):[]}}return n.sort((function(n,e){return n.text.localeCompare(e.text)})),n}),[W,B,L,J,q.length,N]),z=function(n){A(n),w&&w(n)};l.useEffect((function(){if(R||!$.length){if(R)if(0!==$.length){var n=$.findIndex((function(n){return n.text===R.text})),e=-1!==n?n:R.idx;e=Math.max(0,Math.min($.length-1,e));var t=$[e];!t||e===R.idx&&t.text===R.text||M({text:t.text,idx:e})}else M(null)}else{var r=$[0];r&&M({text:r.text,idx:0})}}),[R,$]);var Y=function(n){W||(n.final?(Q(n.text),z(""),M(null),I(!1)):z(n.text))},Q=function(n){W||n.endsWith(":")||""!==n&&(z(""),h([].concat((0,o.Z)(N),[y(n,B)])))},U=l.createRef();l.useEffect((function(){if(U.current&&R){var n=U.current.querySelector("[data-idx='".concat(R.idx,"']"));n&&n instanceof HTMLElement&&"scrollIntoView"in n&&n.scrollIntoView({block:"nearest"})}}),[U,R]);var X=j||function(n){return n.text};return(0,v.jsx)(p.J,{isOpen:K&&$.length>0&&!W,position:"bottom-left",content:$.length>0?(0,v.jsx)("div",{style:{maxHeight:235,overflowY:"scroll"},ref:U,children:(0,v.jsx)(T,{children:$.map((function(n,e){return(0,v.jsx)(f.sN,{"data-idx":e,text:X(n),shouldDismissPopover:!1,active:(null===R||void 0===R?void 0:R.idx)===e,onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),Y(n),M(null)}},n.text)}))})}):(0,v.jsx)("div",{}),children:(0,v.jsx)(C,{className:E,values:N.map((function(n){return n.token?"".concat(n.token,":").concat(n.value):n.value})),inputValue:q,onRemove:function(n,e){var t=(0,o.Z)(N);t.splice(e,1),h(t)},onInputChange:function(n){if(z(n.currentTarget.value),m){var e=y(n.currentTarget.value,B);h([].concat((0,o.Z)(N),[e]))}},inputProps:{onFocus:function(){I(!0),k&&k()},onBlur:function(){S&&Q(q),I(!1)}},$maxWidth:_?"100%":void 0,onAdd:function(){return!1},onKeyDown:function(n){if(W&&"Delete"!==n.key&&"Backspace"!==n.key)return n.preventDefault(),void n.stopPropagation();if("Enter"!==n.key&&"Return"!==n.key&&"Tab"!==n.key){if(" "===n.key)return n.preventDefault(),void Q(q);if("Escape"===n.key)return M(null),void I(!1);K||"Delete"===n.key||"Backspace"===n.key||I(!0);var e={ArrowDown:1,ArrowUp:-1}[n.key];if(e&&$.length>0){n.preventDefault();var t=(R?R.idx:-1)+e;t=Math.max(0,Math.min(t,$.length-1));var r=$[t];r&&M({text:r.text,idx:t})}}else if(R){var o=$.find((function(n){return n.text===R.text}));if(!o)throw new Error("Selection out of sync with suggestions");Y(o),n.preventDefault(),n.stopPropagation()}else q.length&&(Q(q),n.preventDefault(),n.stopPropagation())},tagProps:{minimal:!0},placeholder:b||"Filter\u2026",rightElement:Z&&K?(0,v.jsx)(c.x,{style:{alignSelf:"center"},margin:{right:4},children:(0,v.jsx)(d.$,{purpose:"body-text"})}):void 0})})},C=(0,i.ZP)(a.EG).withConfig({displayName:"TokenizingField__StyledTagInput",componentId:"sc-1ah04ip-0"})(["border:none;border-radius:8px;box-shadow:"," inset 0px 0px 0px 1px,"," inset 2px 2px 1.5px;min-width:400px;max-width:",";transition:box-shadow 150ms;&.bp4-active{box-shadow:"," inset 0px 0px 0px 1px,"," inset 2px 2px 1.5px,rgba(58,151,212,0.6) 0 0 0 3px;}input{font-size:14px;font-weight:400;padding-left:4px;padding-bottom:2px;padding-top:2px;}&& .bp4-tag-input-values:first-child .bp4-input-ghost:first-child{padding-left:8px;}&& .bp4-tag-input-values{margin-right:4px;margin-top:4px;}&& .bp4-tag-input-values > *{margin-bottom:4px;}.bp4-tag{border-radius:6px;display:inline-flex;flex-direction:row;font-size:12px;line-height:16px;align-items:center;max-width:400px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:4px 8px;user-select:none;}.bp4-tag.bp4-minimal:not([class*='bp4-intent-']){background-color:",";color:",";}.bp4-tag.bp4-minimal.bp4-intent-success{background-color:",";color:",";}.bp4-tag.bp4-minimal.bp4-intent-warning{background-color:",";color:",";}.bp4-tag.bp4-minimal.bp4-intent-danger{background-color:",";color:",";}"],s.w.Gray300,s.w.KeylineGray,(function(n){return n.$maxWidth?n.$maxWidth:"600px"}),s.w.Gray300,s.w.KeylineGray,s.w.Gray100,s.w.Gray900,s.w.Green50,s.w.Green700,s.w.Yellow50,s.w.Yellow700,s.w.Red50,s.w.Red700),T=(0,i.ZP)(f.v2).withConfig({displayName:"TokenizingField__StyledMenu",componentId:"sc-1ah04ip-1"})(["width:400px;"])}}]);
//# sourceMappingURL=598.df76d139.chunk.js.map