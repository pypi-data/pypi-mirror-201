import{P as G}from"./ListviewItem-2dad89ff.js";import{g as E,b as r,d as Y,r as A,G as q,e as K,z as Q,A as J,s as x,c as R,h as l,q as c,w as i,i as s,p as o,k as u,N as H,l as y,j as p,v as d,m as F,F as I,x as M,n as N,Q as D}from"./index-ae16a2c4.js";import{_ as U,p as O,b as j}from"./MediaItemThumb.vue_vue_type_style_index_0_lang-cffebb56.js";import{g as W,b as X}from"./MediaItemContextMenu.vue_vue_type_style_index_0_lang-13accfb2.js";import{b as Z,a as z,c as _,V as ee}from"./VCardText-71947399.js";import{b as te,V as b,a as B,c as ie}from"./VCard-9f6fa2d9.js";import{V as ae}from"./VTooltip-a863dfb2.js";import{u as le,V as v,a as w,l as re}from"./VBtn-0cfa308b.js";import{V as ne}from"./VMenu-007b7f7f.js";import{V as oe}from"./forwardRefs-1f57184b.js";import{b as me,c as se}from"./layout-bba99708.js";import{V as de}from"./VDialog-348f08de.js";import{c as ue}from"./VSelect-89a9aee1.js";const S=E()({name:"VLayout",props:me(),setup(e,m){let{slots:f}=m;const{layoutClasses:k,layoutStyles:$,getLayoutItem:L,items:V,layoutRef:T}=se(e);return le(()=>{var h;return r("div",{ref:T,class:k.value,style:$.value},[(h=f.default)==null?void 0:h.call(f)])}),{getLayoutItem:L,items:V}}}),ce={key:0,xs5:"","pa-5":"",style:{width:"230px",height:"230px","margin-top":"15px","margin-bottom":"15px","margin-right":"24px"}},ye={key:0},fe={key:1},ge={style:{"padding-bottom":"10px"}},pe=["onClick"],be={style:{color:"primary"}},ve={style:{display:"flex","margin-left":"14px","padding-bottom":"10px"}},he=["innerHTML"],xe={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},ke={style:{position:"absolute",float:"right",right:"15px",top:"15px"}},Ne=Y({__name:"InfoHeader",props:{item:null},setup(e){const m=e,f=A(!1),k=A(),{mobile:$}=q(),L=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,V=K();Q(()=>m.item,async t=>{t&&(x.topBarTitle=t.name,k.value=await j(m.item,D.FANART)||await j(m.item,D.THUMB),x.topBarContextMenuItems=X([t],t))},{immediate:!0}),J(()=>{x.topBarContextMenuItems=[]});const T=function(t){V.push({name:"album",params:{itemId:t.item_id,provider:t.provider}})},h=function(t){console.log("artistClick",t),V.push({name:"artist",params:{itemId:t.item_id,provider:t.provider}})},C=R(()=>{let t="";return m.item?(m.item.metadata&&m.item.metadata.description?t=m.item.metadata.description:m.item.metadata&&m.item.metadata.copyright?t=m.item.metadata.copyright:"artists"in m.item&&m.item.artists.forEach(function(n){"metadata"in n&&n.metadata.description&&(t=n.metadata.description)}),t=t.replace(`\r
`,"<br /><br /><br />"),t=t.replace("\r","<br /><br />"),t=t.replace(`
`,"<br /><br />"),t):""}),P=R(()=>{const t=$.value?160:260;return C.value.length>t?C.value.substring(0,t)+"...":C.value});return(t,n)=>(l(),c("div",null,[r(B,{variant:"flat",img:u(L),style:{"margin-top":"-10px","z-index":"0"},height:"30vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?o("",!0):(l(),s(re,{key:0,indeterminate:""})),r(Z,{width:"100%",height:"100%",cover:"",class:"background-image",src:k.value,gradient:t.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),e.item?(l(),s(S,{key:1,style:{margin:"0",position:"absolute",top:"50%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:i(()=>[t.$vuetify.display.mobile?o("",!0):(l(),c("div",ce,[e.item.media_type&&(e.item.media_type==u(H).ARTIST||"owner"in e.item)?(l(),c("div",ye,[r(z,{size:"192"},{default:i(()=>[r(U,{item:e.item,height:"230px",width:"230px"},null,8,["item"])]),_:1})])):(l(),c("div",fe,[r(U,{width:"230px",item:e.item},null,8,["item"])]))])),y("div",null,[r(te,null,{default:i(()=>[p(d(e.item.name),1)]),_:1}),y("div",ge,["version"in e.item&&e.item.version?(l(),s(b,{key:0,class:"caption"},{default:i(()=>[p(d(e.item.version)+" ",1),r(ae,{location:"bottom"},{activator:i(({props:a})=>[u(O)(e.item.metadata.explicit||!1)?(l(),s(v,F({key:0},a,{class:"listitem-action",icon:"mdi-alpha-e-box",width:"35"}),null,16)):o("",!0)]),default:i(()=>[y("span",null,d(t.$t("tooltip.explicit")),1)]),_:1})]),_:1})):o("",!0),"artists"in e.item&&e.item.artists?(l(),s(b,{key:1,class:"title accent--text"},{default:i(()=>[r(v,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(l(!0),c(I,null,M(e.item.artists,(a,g)=>(l(),c("span",{key:a.item_id},[y("a",{style:{color:"accent"},onClick:Ve=>h(a)},d(a.name),9,pe),g+1<e.item.artists.length?(l(),c("span",{key:g,style:{color:"accent"}},d(" / "))):o("",!0)]))),128))]),_:1})):o("",!0),"artist"in e.item&&e.item.artist?(l(),s(b,{key:2,class:"title"},{default:i(()=>[r(v,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),y("a",{onClick:n[0]||(n[0]=a=>h(e.item.artist))},d(e.item.artist.name),1)]),_:1})):o("",!0),"owner"in e.item&&e.item.owner?(l(),s(b,{key:3,class:"title"},{default:i(()=>[r(v,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),y("a",be,d(e.item.owner),1)]),_:1})):o("",!0),"album"in e.item&&e.item.album?(l(),s(b,{key:4},{default:i(()=>[r(v,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),y("a",{style:{color:"secondary"},onClick:n[1]||(n[1]=a=>{var g;return T((g=e.item)==null?void 0:g.album)})},d(e.item.album.name),1)]),_:1})):o("",!0)]),y("div",ve,[r(ne,{location:"bottom"},{activator:i(({props:a})=>{var g;return[r(w,F({color:"primary"},a,{"prepend-icon":"mdi-play-circle",disabled:!((g=u(x).selectedPlayer)!=null&&g.available)||u(x).blockGlobalPlayMenu}),{default:i(()=>[p(d(t.$t("play")),1)]),_:2},1040,["disabled"])]}),default:i(()=>[r(B,{"min-width":"300"},{default:i(()=>[r(oe,{lines:"one",density:"comfortable"},{default:i(()=>[(l(!0),c(I,null,M(u(W)([e.item]),a=>(l(),s(ee,{key:a.label,title:t.$t(a.label,a.labelArgs),onClick:g=>a.action?a.action():""},{prepend:i(()=>[r(z,{style:{"padding-right":"10px"}},{default:i(()=>[r(v,{icon:a.icon},null,8,["icon"])]),_:2},1024)]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})]),_:1}),!t.$vuetify.display.mobile&&!e.item.in_library?(l(),s(w,{key:0,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart-outline",onClick:n[2]||(n[2]=a=>u(N).addItemsToLibrary([e.item]))},{default:i(()=>[p(d(t.$t("add_library")),1)]),_:1})):o("",!0),!t.$vuetify.display.mobile&&e.item.in_library?(l(),s(w,{key:1,style:{"margin-left":"10px"},color:"primary",tile:"","prepend-icon":"mdi-heart",onClick:n[3]||(n[3]=a=>u(N).removeItemsFromLibrary([e.item]))},{default:i(()=>[p(d(t.$t("remove_library")),1)]),_:1})):o("",!0)]),u(P)?(l(),s(b,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:n[4]||(n[4]=a=>f.value=!f.value)},{default:i(()=>[y("div",{innerHTML:u(P)},null,8,he)]),_:1})):o("",!0),e.item&&e.item.metadata.genres?(l(),c("div",xe,[(l(!0),c(I,null,M(e.item.metadata.genres.slice(0,t.$vuetify.display.mobile?15:25),a=>(l(),s(ue,{key:a,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[p(d(a),1)]),_:2},1024))),128))])):o("",!0)])]),_:1})):o("",!0),e.item?(l(),s(S,{key:2,style:{"z-index":"800",height:"100%","padding-left":"15px"}},{default:i(()=>[y("div",ke,[r(G,{"provider-mappings":e.item.provider_mappings,height:25,"enable-details":!0,"enable-preview":e.item.media_type==u(H).TRACK},null,8,["provider-mappings","enable-preview"])])]),_:1})):o("",!0)]),_:1},8,["img"]),r(de,{modelValue:f.value,"onUpdate:modelValue":n[6]||(n[6]=a=>f.value=a),width:"auto"},{default:i(()=>[r(B,null,{default:i(()=>[r(_,{innerHTML:u(C)},null,8,["innerHTML"]),r(ie,null,{default:i(()=>[r(w,{color:"primary",block:"",onClick:n[5]||(n[5]=a=>f.value=!1)},{default:i(()=>[p(d(t.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{Ne as _};
