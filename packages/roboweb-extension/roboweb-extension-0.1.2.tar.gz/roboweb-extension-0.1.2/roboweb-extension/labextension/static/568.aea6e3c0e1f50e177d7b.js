"use strict";(self.webpackChunkroboweb_extension=self.webpackChunkroboweb_extension||[]).push([[568],{568:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=n(884),l=(n(604),n(679)),i=n(431);class c extends i.Widget{constructor(){super(),this.id="assistant-panel",this.addClass("assistant-panel"),this.title.caption="Assistant",this.title.iconClass="fa fa-robot"}}const r={id:"roboweb-extension",requires:[l.INotebookTracker,o.ICommandPalette],activate:(e,t,n)=>{console.log("Roboweb extension activated");const o=new c;o.node.style.minWidth="500px",e.shell.add(o,"right",{rank:0}),window.currentCellText=function(){const n=t.currentWidget;if(n){if(-1===n.content.activeCellIndex)return"";{const t=e.shell.currentWidget.content.activeCell;window.current=t;var o="";const n=t.outputArea.model.toJSON();if(n.length>0){const e=n[0].traceback;for(var l=0;l<e.length;l++){const t=/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]/g;o+=e[l].replace(t,"")+"\n"}}return{text:t.model.value.text,output:o}}}},window.replaceCodeCurrentCell=function(e){const n=t.currentWidget;if(!n)return;const o=n.content.activeCellIndex;if(e.startsWith("pip")||e.startsWith("gcloud")){e="!"+e;const t=n.content.model.contentFactory.createCodeCell({});t.value.text=e,n.content.model.cells.insert(0,t),console.log("Adding new cell at the beginning")}else if(-1===o){const t=n.content.model.contentFactory.createCodeCell({});t.value.text=e,n.content.model.cells.push(t),console.log("Adding new cell")}else n.content.model.cells.get(o).value.text=e,console.log("Replacing code in current cell")},e.commands.addCommand("fix-cell-extension:fixCell",{label:"Fix",execute:()=>{if(!t.currentWidget)return;const e=window.currentCellText(),n="My code has an error. Ideally give me a quick command to fix it. If that's not available give me python code to fix it. Assume i dont have a credentials or key file. \n\nCode: \n\n"+e.text+"\n\nError: \n\n"+e.output;window.pastePrompt(n)}}),e.contextMenu.addItem({command:"fix-cell-extension:fixCell",selector:".jp-Notebook",rank:0});const l=document.createElement("script");l.src="/roboweb-server-extension/flutter.js",document.head.appendChild(l);const i=document.createElement("script");i.src="/roboweb-server-extension/main.js",document.head.appendChild(i),l.onload=function(){console.log("Downloading main.dart.js"),_flutter.loader.loadEntrypoint({serviceWorker:{serviceWorkerVersion:"124778936"}}).then((function(e){console.log("Initializing engine");let t=document.getElementById("assistant-panel");return e.initializeEngine({hostElement:t})})).then((function(e){return console.log("Running app"),e.runApp()}))}},autoStart:!0}}}]);