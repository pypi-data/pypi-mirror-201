(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8450],{19395:function(e,n,t){"use strict";t.d(n,{IJ:function(){return s},Vx:function(){return d},eI:function(){return f},gU:function(){return b},tL:function(){return p},vJ:function(){return v}});var r,i,u=t(82394),c=t(92083),l=t.n(c);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,u.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,i=n.started_at,c=n.status,o=null;i&&r&&(o=l()(r).valueOf()-l()(i).valueOf());return a(a({},e),{},(0,u.Z)({},t,{runtime:o,status:c}))}),{})}function f(e){if(!e)return null;var n=new Date(l()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function d(e){return f(e).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(i||(i={}));var p=(r={},(0,u.Z)(r,i.DAY,86400),(0,u.Z)(r,i.HOUR,3600),(0,u.Z)(r,i.MINUTE,60),(0,u.Z)(r,i.SECOND,1),r);function b(e){var n=i.SECOND,t=e;return e%86400===0?(t/=86400,n=i.DAY):e%3600===0?(t/=3600,n=i.HOUR):e%60===0&&(t/=60,n=i.MINUTE),{time:t,unit:n}}function v(e,n){return e*p[n]}},43526:function(e,n,t){"use strict";t.d(n,{I7:function(){return r},IB:function(){return o},VV:function(){return u},_7:function(){return c},rn:function(){return l}});var r,i=t(66050),u="datetime",c="code",l=i.V;!function(e){e.SECOND="second",e.MINUTE="minute",e.HOUR="hour",e.DAY="day",e.WEEK="week",e.MONTH="month",e.YEAR="year",e.CUSTOM="custom"}(r||(r={}));var o=[r.SECOND,r.MINUTE,r.HOUR,r.DAY,r.WEEK,r.MONTH,r.YEAR,r.CUSTOM]},66050:function(e,n,t){"use strict";var r;t.d(n,{V:function(){return r}}),function(e){e.CANCELLED="cancelled",e.COMPLETED="completed",e.FAILED="failed",e.INITIAL="initial",e.RUNNING="running"}(r||(r={}))},47409:function(e,n,t){"use strict";t.d(n,{D:function(){return c},V:function(){return u}});var r,i=t(82394),u=t(66050).V,c=(r={},(0,i.Z)(r,u.CANCELLED,"Cancelled"),(0,i.Z)(r,u.COMPLETED,"Done"),(0,i.Z)(r,u.FAILED,"Failed"),(0,i.Z)(r,u.INITIAL,"Ready"),(0,i.Z)(r,u.RUNNING,"Running"),r)},30206:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var r=t(77837),i=t(75582),u=t(38860),c=t.n(u),l=t(82684),o=t(83455),a=t(34376),s=t(12691),f=t.n(s),d=t(43526),p=t(60328),b=t(10919),v=t(58180),m=t(19711),O=t(10503),h=t(47409),k=t(49125),E=t(19395),g=t(9736),j=t(28598);var _=function(e){var n=e.models,t=e.onClickRow,r=e.pipeline,i=e.selectedRow,u=(0,g.Ct)(),c=null===r||void 0===r?void 0:r.uuid,l=[{uuid:"Status"},{uuid:"Name"},{uuid:"Type"},{uuid:"Runs"},{uuid:"Backfill"},{uuid:"Started at"},{uuid:"Completed at"}];return u||l.push({label:function(){return""},uuid:"edit"}),(0,j.jsx)(v.Z,{columnFlex:[null,1,null,null,null,1,1,null],columns:l,isSelectedRow:function(e){return n[e].id===(null===i||void 0===i?void 0:i.id)},onClickRow:function(e){return t(n[e])},rows:n.map((function(e,n){var t=e.block_uuid,r=e.completed_at,i=e.end_datetime,l=e.id,o=e.name,a=e.start_datetime,s=e.started_at,v=e.status,g=e.total_run_count,_=[(0,j.jsx)(m.ZP,{default:!0,monospace:!0,children:v||"inactive"},"status"),(0,j.jsx)(f(),{as:"/pipelines/".concat(c,"/backfills/").concat(l),href:"/pipelines/[pipeline]/backfills/[...slug]",passHref:!0,children:(0,j.jsx)(b.Z,{bold:!0,sameColorAsText:!0,children:o})},"name"),(0,j.jsx)(m.ZP,{default:!0,monospace:!0,children:t?d._7:d.VV},"type"),(0,j.jsx)(m.ZP,{default:!0,monospace:!0,children:g||0},"runs"),(0,j.jsxs)(m.ZP,{default:!0,monospace:!0,children:[a&&i&&(0,j.jsxs)(j.Fragment,{children:[(0,E.Vx)(a),"\xa0-\xa0",(0,E.Vx)(i)]}),!(a&&i)&&"-"]},"backfill"),(0,j.jsx)(m.ZP,{default:!0,monospace:!0,children:s?(0,E.Vx)(s):"-"},"started_at"),(0,j.jsx)(m.ZP,{default:!0,monospace:!0,children:r?(0,E.Vx)(r):"-"},"completed_at")];return u||_.push((0,j.jsx)(p.Z,{default:!0,disabled:v===h.V.COMPLETED,iconOnly:!0,linkProps:{as:"/pipelines/".concat(c,"/backfills/").concat(l,"/edit"),href:"/pipelines/[pipeline]/backfills/[...slug]"},noBackground:!0,title:"Edit",children:(0,j.jsx)(O.I8,{default:!0,size:2*k.iI})},"".concat(n,"_edit_button"))),_})),uuid:"pipeline-runs"})},P=t(11135),y=t(2626),w=t(41788),D=t(86673),Z=t(82531),C=t(59920),N=t(33766),x=t(96510),I=t(59e3),S=t(90211);function A(e){var n=e.pipeline,t=(0,a.useRouter)(),r=n.uuid,u=Z.ZP.backfills.list({_limit:20,_offset:0,include_run_count:!0,pipeline_uuid:r},{refreshInterval:6e4}),c=u.data,s=(u.mutate,(0,l.useMemo)((function(){return(null===c||void 0===c?void 0:c.backfills)||[]}),[c])),f=(0,I.iV)(),d=(0,l.useState)(null),p=d[0],b=d[1],v=(0,l.useState)(null),h=v[0],E=v[1];(0,l.useEffect)((function(){null!==f&&void 0!==f&&f.backfill_id?b(null===s||void 0===s?void 0:s.find((function(e){return e.id===Number(f.backfill_id)}))):p&&b(null)}),[s,f,p]);var g=(0,l.useMemo)((function(){var e="/pipelines/".concat(r,"/backfills"),n=[{label:function(){return"Backfills"},linkProps:p?{as:e,href:"/pipelines/[pipeline]/backfills"}:null}];return p&&n.push({label:function(){return p.name}}),n}),[p]),w=(0,o.Db)(Z.ZP.backfills.pipelines.useCreate(r),{onSuccess:function(e){return(0,x.wD)(e,{callback:function(e){var n=e.backfill.id;t.push("/pipelines/[pipeline]/backfills/[...slug]","/pipelines/".concat(r,"/backfills/").concat(n,"/edit"))},onErrorCallback:function(e,n){return E({errors:n,response:e})}})}}),A=(0,i.Z)(w,2),M=A[0],T=A[1].isLoading;return(0,j.jsxs)(y.Z,{breadcrumbs:g,errors:h,pageName:C.M.BACKFILLS,pipeline:n,setErrors:E,title:function(e){var n=e.name;return"".concat(n," backfills")},uuid:"".concat(C.M.BACKFILLS,"_").concat(r),children:[(0,j.jsx)(D.Z,{p:k.cd,children:(0,j.jsx)(P.ZP,{beforeElement:(0,j.jsx)(O.mm,{size:2.5*k.iI}),blackBorder:!0,inline:!0,loading:T,noHoverUnderline:!0,onClick:function(){return M({backfill:{name:(0,S.Y6)()}})},sameColorAsText:!0,uuid:"PipelineDetailPage/Backfills/add_new_backfill",children:"Create new backfill"})}),s&&0===s.length&&(0,j.jsx)(D.Z,{p:k.cd,children:(0,j.jsx)(m.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No backfills available"})}),(null===s||void 0===s?void 0:s.length)>=1&&(0,j.jsx)(_,{models:s,onClickRow:function(e){var n=e.id;return(0,N.u7)({backfill_id:n})},pipeline:n,selectedRow:p})]})}A.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:t}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var M=(0,w.Z)(A)},33766:function(e,n,t){"use strict";t.d(n,{g_:function(){return d},u7:function(){return f}});var r=t(75582),i=t(82394),u=t(34376),c=t.n(u),l=t(59e3),o=t(24224);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.replaceParams,u=t.pushHistory,o=i?{}:(0,l.iV)();n=window.location.pathname;var a=u?c().push:c().replace,f=s(s({},o),e);Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];"undefined"!==typeof i&&null!==i||delete f[t]}));var d=(0,l.uM)(f);d.length>=1&&(d="?".concat(d));var p="".concat(n.split("?")[0]).concat(d);return a(c().router.pathname,p,{shallow:!0})}function d(e,n,t){var i=t.addingMultipleValues,u=t.isList,c=t.itemsPerPage,l=t.pushHistory,a=void 0!==l&&l,d=t.resetLimitParams,p=s({},e);i?Object.entries(n).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];if(Array.isArray(i)){var u="".concat(t,"[]");p[u]=i.map(String)}})):u?Object.entries(n).forEach((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],u=String(i),c="".concat(t,"[]"),l=p[c];l&&Array.isArray(l)?(l=l.map(String)).includes(u)?p[c]=(0,o.Od)(l,(function(e){return e===u})):p[c]=l.concat(u):p[c]=[u]})):p=s(s({},p),n),d&&(p._limit=c||20,p._offset=0),f(p,{pushHistory:a})}},37459:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/backfills",function(){return t(30206)}])}},function(e){e.O(0,[3850,2083,2344,9386,6166,8180,2626,9774,2888,179],(function(){return n=37459,e(e.s=n);var n}));var n=e.O();_N_E=n}]);