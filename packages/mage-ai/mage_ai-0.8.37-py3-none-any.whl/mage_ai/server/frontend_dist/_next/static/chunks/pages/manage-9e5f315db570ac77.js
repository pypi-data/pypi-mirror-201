(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8867],{59739:function(e,n,t){"use strict";var r=t(56669);function i(){}function c(){}c.resetWarningCache=i,e.exports=function(){function e(e,n,t,i,c,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:c,resetWarningCache:i};return t.PropTypes=t,t}},47329:function(e,n,t){e.exports=t(59739)()},56669:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1210:function(e,n,t){"use strict";t.d(n,{Z:function(){return T}});var r=t(82394),i=t(21831),c=t(82684),o=t(47999),s=t(28358),a=t(93461),u=t(57384),l=t(12344),d=t(72454),f=t(28598);function h(e,n){var t=e.children;return(0,f.jsx)(d.HS,{ref:n,children:t})}var p=c.forwardRef(h),m=t(32063),v=t(15270),x=t(82531),O=t(66166),b=t(3055),E=t(49125),j=t(91427),R=t(24141);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var T=function(e){var n,t=e.after,r=e.afterHidden,h=e.afterWidth,Z=e.afterWidthOverride,T=e.before,P=e.beforeWidth,g=e.breadcrumbs,S=e.children,_=e.errors,C=e.headerMenuItems,D=e.navigationItems,y=e.setErrors,w=e.subheaderChildren,k=e.title,N=e.uuid,I=(0,R.i)().width,M="dashboard_after_width_".concat(N),L="dashboard_before_width_".concat(N),F=(0,c.useRef)(null),H=(0,c.useState)(Z?h:(0,j.U2)(M,h)),W=H[0],U=H[1],X=(0,c.useState)(!1),Y=X[0],z=X[1],B=(0,c.useState)(T?Math.max((0,j.U2)(L,P),13*E.iI):null),G=B[0],q=B[1],Q=(0,c.useState)(!1),V=Q[0],$=Q[1],J=(0,c.useState)(null)[1],K=x.ZP.projects.list({},{revalidateOnFocus:!1}).data,ee=null===K||void 0===K?void 0:K.projects,ne=[];g?ne.push.apply(ne,(0,i.Z)(g)):(null===ee||void 0===ee?void 0:ee.length)>=1&&ne.push.apply(ne,[{label:function(){var e;return null===(e=ee[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return k}}]),(0,c.useEffect)((function(){null===F||void 0===F||!F.current||Y||V||null===J||void 0===J||J(F.current.getBoundingClientRect().width)}),[Y,W,V,G,F,J,I]),(0,c.useEffect)((function(){Y||(0,j.t8)(M,W)}),[r,Y,W,M]),(0,c.useEffect)((function(){V||(0,j.t8)(L,G)}),[V,G,L]);var te=(0,O.Z)(h);return(0,c.useEffect)((function(){Z&&te!==h&&U(h)}),[Z,h,te]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.Z,{title:k}),(0,f.jsx)(l.Z,{breadcrumbs:ne,menuItems:C,project:null===ee||void 0===ee?void 0:ee[0],version:null===ee||void 0===ee||null===(n=ee[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(d.Nk,{children:[0!==(null===D||void 0===D?void 0:D.length)&&(0,f.jsx)(d.lm,{children:(0,f.jsx)(v.Z,{navigationItems:D})}),(0,f.jsx)(a.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(m.Z,{after:t,afterHeightOffset:b.Mz,afterHidden:r,afterMousedownActive:Y,afterWidth:W,before:T,beforeHeightOffset:b.Mz,beforeMousedownActive:V,beforeWidth:d.k1+(T?G:0),hideAfterCompletely:!0,leftOffset:T?d.k1:null,mainContainerRef:F,setAfterMousedownActive:z,setAfterWidth:U,setBeforeMousedownActive:$,setBeforeWidth:q,children:[w&&(0,f.jsx)(p,{children:w}),S]})})]}),_&&(0,f.jsx)(o.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===y||void 0===y?void 0:y(null)},children:(0,f.jsx)(s.Z,A(A({},_),{},{onClose:function(){return null===y||void 0===y?void 0:y(null)}}))})]})}},65597:function(e,n,t){"use strict";t.d(n,{f:function(){return s}});var r=t(9518),i=t(23831),c=t(49125),o=t(73942),s=r.default.div.withConfig({displayName:"Tablestyle__PopupContainerStyle",componentId:"sc-8ammqd-0"})(["position:absolute;max-height:","px;z-index:10;border-radius:","px;padding:","px;"," "," "," ",""],58*c.iI,o.TR,2*c.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||i.Z.shadow).popup,";\n    background-color: ").concat((e.theme.interactive||i.Z.interactive).defaultBackground,";\n  ")}),(function(e){return e.leftOffset&&"\n    left: ".concat(e.leftOffset,"px;\n  ")}),(function(e){return e.topOffset&&"\n    top: ".concat(e.topOffset,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width,"px;\n  ")}))},86422:function(e,n,t){"use strict";t.d(n,{$W:function(){return f},DA:function(){return d},HX:function(){return m},J8:function(){return p},Lq:function(){return u},Qj:function(){return v},Ut:function(){return E},V4:function(){return b},VZ:function(){return h},dO:function(){return l},f2:function(){return O},iZ:function(){return x},t6:function(){return o},tf:function(){return a}});var r,i,c,o,s=t(82394);!function(e){e.PYTHON="python",e.R="r",e.SQL="sql",e.YAML="yaml"}(o||(o={}));var a,u,l=(r={},(0,s.Z)(r,o.PYTHON,"PY"),(0,s.Z)(r,o.R,"R"),(0,s.Z)(r,o.SQL,"SQL"),(0,s.Z)(r,o.YAML,"YAML"),r);!function(e){e.CHART="chart",e.CUSTOM="custom",e.DATA_EXPORTER="data_exporter",e.DATA_LOADER="data_loader",e.DBT="dbt",e.EXTENSION="extension",e.SCRATCHPAD="scratchpad",e.SENSOR="sensor",e.TRANSFORMER="transformer"}(a||(a={})),function(e){e.BLUE="blue",e.GREY="grey",e.PINK="pink",e.PURPLE="purple",e.TEAL="teal",e.YELLOW="yellow"}(u||(u={}));var d,f=[a.CHART,a.CUSTOM,a.DATA_EXPORTER,a.DATA_LOADER,a.SCRATCHPAD,a.SENSOR,a.TRANSFORMER],h=[a.DATA_EXPORTER,a.DATA_LOADER],p=[a.DATA_EXPORTER,a.DATA_LOADER,a.TRANSFORMER],m=[a.DATA_EXPORTER,a.DATA_LOADER,a.DBT,a.TRANSFORMER],v=[a.CHART,a.SCRATCHPAD,a.SENSOR],x=[a.EXTENSION,a.SCRATCHPAD];!function(e){e.EXECUTED="executed",e.FAILED="failed",e.NOT_EXECUTED="not_executed",e.UPDATED="updated"}(d||(d={}));var O=[a.CUSTOM,a.DATA_EXPORTER,a.TRANSFORMER],b=(i={},(0,s.Z)(i,a.CUSTOM,"Custom"),(0,s.Z)(i,a.DATA_EXPORTER,"Data exporter"),(0,s.Z)(i,a.DATA_LOADER,"Data loader"),(0,s.Z)(i,a.EXTENSION,"Extension"),(0,s.Z)(i,a.SCRATCHPAD,"Scratchpad"),(0,s.Z)(i,a.SENSOR,"Sensor"),(0,s.Z)(i,a.TRANSFORMER,"Transformer"),i),E=[a.DATA_LOADER,a.TRANSFORMER,a.DATA_EXPORTER,a.SENSOR];c={},(0,s.Z)(c,a.DATA_EXPORTER,"DE"),(0,s.Z)(c,a.DATA_LOADER,"DL"),(0,s.Z)(c,a.SCRATCHPAD,"SP"),(0,s.Z)(c,a.SENSOR,"SR"),(0,s.Z)(c,a.TRANSFORMER,"TF")},48438:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return F}});var r=t(77837),i=t(75582),c=t(38860),o=t.n(c),s=t(82684),a=t(83455),u=t(60328),l=t(47999),d=t(57722),f=t(67971),h=t(87372),p=t(11135),m=t(86673),v=t(58180),x=t(19711),O=t(82944),b=t(70902),E=t(82531),j=t(10503),R=t(86422),Z=t(73899),A=t(99994),T=t(85307),P=t(49125),g=t(96510),S=t(90211),_=t(28598);var C=function(e){var n=e.fetchInstances,t=e.instanceType,r=(0,s.useState)(),c=r[0],o=r[1],u=(0,s.useState)(),l=u[0],C=u[1],D=(0,s.useState)(),y=D[0],w=D[1],k=(0,s.useState)(null),N=k[0],I=k[1],M=(0,s.useState)(),L=M[0],F=M[1],H=(0,s.useState)(),W=H[0],U=H[1],X=(0,a.Db)(E.ZP.instances.clusters.useCreate(t),{onSuccess:function(e){return(0,g.wD)(e,{callback:function(e){e.success?(n(),o(!1)):C(e.error_message)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),Y=(0,i.Z)(X,2),z=Y[0],B=Y[1].isLoading,G=[[(0,_.jsx)(x.ZP,{bold:!0,color:Z.cM,children:"Instance name"}),(0,_.jsx)(O.Z,{label:"ecs"===t?"Spaces will be replaced by underscores":"Spaces will be replaced by hyphens",monospace:!0,onChange:function(e){e.preventDefault(),F(e.target.value)},placeholder:"Name your new instance",value:L})]];return"k8s"===t&&G.push([(0,_.jsx)(x.ZP,{bold:!0,color:Z.cM,children:"Service account name (optional)"}),(0,_.jsx)(O.Z,{label:"Name of service account to be attached to stateful set",monospace:!0,onChange:function(e){e.preventDefault(),U(e.target.value)},placeholder:"Service account name",value:W})]),(0,_.jsx)(_.Fragment,{children:c?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(h.Z,{default:!0,level:5,monospace:!0,children:"Configure new instance"}),(0,_.jsx)(v.Z,{columnFlex:[null,3],rows:G}),"k8s"===t&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.Z,{mt:1,children:(0,_.jsxs)(f.Z,{alignItems:"center",children:[(0,_.jsx)(x.ZP,{default:!0,monospace:!0,children:"Configure container"}),(0,_.jsx)(m.Z,{ml:1}),(0,_.jsx)(b.Z,{checked:y,onCheck:function(){return w((function(e){return!e}))}})]})}),y&&(0,_.jsx)(m.Z,{mt:1,children:(0,_.jsx)(T.$W,{children:(0,_.jsx)(d.Z,{autoHeight:!0,language:R.t6.YAML,onChange:function(e){I(e)},tabSize:2,value:N||void 0,width:"100%"})})})]}),B&&(0,_.jsx)(m.Z,{mt:1,children:(0,_.jsx)(x.ZP,{small:!0,warning:!0,children:"This may take up to a few minutes... Once the service is created, it may take another 5-10 minutes for the service to be accessible."})}),!B&&l&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.Z,{mt:1,children:(0,_.jsx)(x.ZP,{small:!0,danger:!0,children:"Failed to create instance, see error below."})}),(0,_.jsx)(m.Z,{mt:1,children:(0,_.jsx)(x.ZP,{small:!0,danger:!0,children:l})})]}),(0,_.jsx)(m.Z,{my:2,children:(0,_.jsxs)(f.Z,{children:[(0,_.jsx)(p.ZP,{background:Z.a$,bold:!0,inline:!0,loading:B,onClick:function(){return z({instance:{name:(e=L,"ecs"===t?(0,S.We)(e,"_"):(0,S.We)(e,"-")),service_account_name:W,container_config:y&&N}});var e},uuid:"EnvironmentListPage/new",children:"Create"}),(0,_.jsx)(m.Z,{ml:1}),(0,_.jsx)(p.ZP,{bold:!0,inline:!0,onClick:function(){return o(!1)},uuid:"EnvironmentListPage/cancel",children:"Cancel"})]})})]}):(0,_.jsx)(p.ZP,{background:A.eW,beforeElement:(0,_.jsx)(j.mm,{size:2.5*P.iI}),bold:!0,inline:!0,onClick:function(){F((0,S.Y6)()),o(!0)},uuid:"EnvironmentListPage/new_instance",children:"Create new instance"})})},D=t(1210),y=t(62084),w=t(41788),k=t(73942),N=t(65597),I=t(72454);function M(e){var n=e.fetchInstances,t=e.instance,r=e.instanceType,c=(0,s.useRef)(null),o=(0,s.useState)(),d=o[0],h=o[1],p=(0,s.useState)(),v=p[0],O=p[1],b=t.name,R=t.task_arn,Z={};R&&(Z.task_arn=R);var A=(0,a.Db)(E.ZP.instances.clusters.useUpdate(r,b),{onSuccess:function(e){return(0,g.wD)(e,{callback:function(){n(),h(!1)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),T=(0,i.Z)(A,1)[0],S=(0,a.Db)(E.ZP.instances.clusters.useDelete(r,b,Z),{onSuccess:function(e){return(0,g.wD)(e,{callback:function(){n(),h(!1)},onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),C=(0,i.Z)(S,1)[0],D=(0,s.useMemo)((function(){var e=t.status,n=[{label:function(){return(0,_.jsx)(x.ZP,{children:"Delete instance"})},onClick:function(){return O(!0)},uuid:"delete_instance"}];return"STOPPED"===e?n.unshift({label:function(){return(0,_.jsx)(x.ZP,{children:"Resume instance"})},onClick:function(){return T({instance:{action:"resume",name:t.name,task_arn:t.task_arn}})},uuid:"resume_instance"}):"RUNNING"===e&&n.unshift({label:function(){return(0,_.jsx)(x.ZP,{children:"Stop instance"})},onClick:function(){return T({instance:{action:"stop",name:t.name,task_arn:t.task_arn}})},uuid:"stop_instance"}),n}),[t]);return(0,_.jsx)(_.Fragment,{children:"ecs"===r&&(0,_.jsxs)("div",{ref:c,style:{position:"relative",zIndex:"1"},children:[(0,_.jsx)(u.Z,{iconOnly:!0,onClick:function(){return h(!d)},children:(0,_.jsx)(j.mH,{size:2*P.iI})}),(0,_.jsx)(l.Z,{disableEscape:!0,onClickOutside:function(){h(!1),O(!1)},open:d,children:v?(0,_.jsxs)(N.f,{leftOffset:30*-P.iI,topOffset:3*-P.iI,width:30*P.iI,children:[(0,_.jsx)(x.ZP,{children:"Are you sure you want to delete"}),(0,_.jsx)(x.ZP,{children:"this instance? You may not be"}),(0,_.jsx)(x.ZP,{children:"able to recover your data."}),(0,_.jsx)(m.Z,{mt:1}),(0,_.jsxs)(f.Z,{children:[(0,_.jsx)(u.Z,{danger:!0,onClick:C,children:"Confirm"}),(0,_.jsx)(m.Z,{ml:1}),(0,_.jsx)(u.Z,{default:!0,onClick:function(){return O(!1)},children:"Cancel"})]})]}):(0,_.jsx)(y.Z,{items:D,left:25*-P.iI,open:d,parentRef:c,topOffset:3*-P.iI,uuid:"Manage/more_actions",width:25*P.iI})})]})})}function L(){var e,n=(0,s.useState)(),t=(n[0],n[1],E.ZP.status.list().data),r=(null===t||void 0===t||null===(e=t.status)||void 0===e?void 0:e.instance_type)||"ecs",i=E.ZP.instances.clusters.list(r,{},{refreshInterval:3e3,revalidateOnFocus:!0}),c=i.data,o=i.mutate,a=(0,s.useMemo)((function(){var e;return null===c||void 0===c||null===(e=c.instances)||void 0===e?void 0:e.filter((function(e){return e.name}))}),[c]);return(0,_.jsx)(D.Z,{afterWidth:I.k1,beforeWidth:I.k1,breadcrumbs:[{bold:!0,label:function(){return"Manage (".concat(r,")")}}],navigationItems:[],subheaderChildren:(0,_.jsx)(C,{fetchInstances:o,instanceType:r}),title:"Manage",uuid:"Manage/index",children:(0,_.jsx)(v.Z,{columns:[{uuid:"Status"},{uuid:"Instance Name"},{uuid:"Type"},{uuid:"Public IP address"},{uuid:"Open"},{label:function(){return""},uuid:"Actions"}],columnFlex:[2,4,2,3,1,null],rows:null===a||void 0===a?void 0:a.map((function(e){var n=e.ip,t=e.name,i=e.status,c=e.type,s="http://".concat(n);return"ecs"===r&&(s="http://".concat(n,":6789")),[(0,_.jsx)(u.Z,{borderRadius:k.D7,danger:"STOPPED"===i,default:"PROVISIONING"===i,notClickable:!0,padding:"6px",primary:"RUNNING"===i,warning:"PENDING"===i,children:(0,S.vg)(i)}),(0,_.jsx)(x.ZP,{children:t}),(0,_.jsx)(x.ZP,{children:(0,S.vg)(c)}),(0,_.jsx)(x.ZP,{children:n}),(0,_.jsx)(u.Z,{iconOnly:!0,onClick:function(){return window.open(s)},children:(0,_.jsx)(j.M0,{size:2*P.iI})}),(0,_.jsx)(M,{fetchInstances:o,instance:e,instanceType:r})]}))})})}L.getInitialProps=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var F=(0,w.Z)(L)},13157:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage",function(){return t(48438)}])}},function(e){e.O(0,[3850,2083,8789,2344,9386,6166,8180,4261,9774,2888,179],(function(){return n=13157,e(e.s=n);var n}));var n=e.O();_N_E=n}]);